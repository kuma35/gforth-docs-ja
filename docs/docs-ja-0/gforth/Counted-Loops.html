<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Counted Loops (Gforth マニュアル)</title>

<meta name="description" content="Counted Loops (Gforth マニュアル)">
<meta name="keywords" content="Counted Loops (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Control-Structures.html" rel="up" title="Control Structures">
<link href="BEGIN-loops-with-multiple-exits.html" rel="next" title="BEGIN loops with multiple exits">
<link href="Simple-Loops.html" rel="prev" title="Simple Loops">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="Counted-Loops">
<div class="header">
<p>
Next: <a href="BEGIN-loops-with-multiple-exits.html" accesskey="n" rel="next"><code>Begin</code> loops with multiple exits</a>, Previous: <a href="Simple-Loops.html" accesskey="p" rel="prev">Simple Loops</a>, Up: <a href="Control-Structures.html" accesskey="u" rel="up">Control Structures</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Counted-Loops-1"></span><h4 class="subsection">6.9.3 Counted Loops</h4>
<span id="index-counted-loops"></span>
<span id="index-loops_002c-counted"></span>
<span id="index-DO-loops"></span>

<p>基本のカウント・ループ:
</p><div class="example">
<pre class="example"><i>limit</i> <i>start</i> ?DO
  <i>body</i>
LOOP
</pre></div>

<p>これは、 <i>start</i> から始まり <i>limit</i> まで(<i>limit</i> 自身は除く)、 各整数値に対して 1 回の反復を実行します。
カウンタ、 つまりインデックスには、 <code>i</code> を使用してアクセスできます。 たとえば、 以下のループをご覧ください:
</p><div class="example">
<pre class="example">10 0 ?DO
  i .
LOOP
</pre></div>
<p>出力: <code>0 1 2 3 4 5 6 7 8 9</code>
</p>
<p>最も内側のループのインデックスには <code>i</code> を使用してアクセスでき、 その一つ外側のループのインデックスには <code>j</code>
を使用してアクセスでき、 さらにもう一つ外側のループのインデックスには <code>k</code> を使用してアクセスできます。
</p>
<p><code>i'</code> を使用すると最も内側のループの limit にアクセスでき、 <code>delta-i</code> を使用すると <code>i'</code> -
<code>i</code> にアクセスできます。
</p>
<div class="example">
<pre class="example">: foo 7 5 ?do cr i . i' . delta-i . loop ; 
</pre></div>

<p>出力:
</p>
<div class="example">
<pre class="example">5 7 2 
6 7 1
</pre></div>

<p>ループ制御データはリターン・スタックに保持されるため、 リターン・スタックへのアクセスとカウント・ループ・ワードの混在にはいくつかの制限があります。
特に、ループの外側のリターン・スタックに値を置いた場合、 ループ内で値を読み取る事はできません<a id="DOCF12" href="#FOOT12"><sup>12</sup></a>。 ループ内のリターン・スタックに値を置く場合は、 ループの終了前、
およびループのインデックスにアクセスする前に値を削除する必要があります。
</p>
<p>カウント・ループにはいくつかのバリエーションがあります:
</p>
<ul>
<li> <code>LEAVE</code> は、 最も内側のカウント・ループを直ちに抜け出します。 それが関係する <code>LOOP</code> または <code>NEXT</code>
の後へ実行は移ります。 例:

<div class="example">
<pre class="example">10 0 ?DO  i DUP . 3 = IF LEAVE THEN LOOP
</pre></div>
<p>出力: <code>0 1 2 3</code>
</p>

</li><li> <code>UNLOOP</code> は、 例えば <code>EXIT</code> などを介しての異常なループ終了の準備を行います。 <code>UNLOOP</code> は、
<code>EXIT</code> がリターン・アドレスに到達できるように、 リターン・スタックからループ制御パラメーターを削除します(訳注: 1重ループなので
unloop 1つ。2重ループなら unloop 2つ)。 例:

<div class="example">
<pre class="example">: demo 10 0 ?DO i DUP . 3 = IF UNLOOP EXIT THEN LOOP .&quot; Done&quot; ;
</pre></div>
<p>出力: <code>0 1 2 3</code>
</p>

</li><li> <i>start</i> が <i>limit</i> より大きい場合でも、 <code>?DO</code>
はループを開始します(ラップアラウンド演算(処理可能な範囲をの最後に達した後に最初に戻る事)によって両者が等しくなるまで <code>LOOP</code>
を反復します)。 通常、 この振る舞いは望ましくないものです。 したがって、 Gforth は (<code>?DO</code> の代替として、)
<code>+DO</code> と <code>U+DO</code> を提供します。 これらは、 <i>start</i> が <i>limit</i>
より大きい場合にはループを開始しません。 <code>+DO</code> は符号付きループ・パラメータ用で、 <code>U+DO</code>
は符号なしループ・パラメータ用です。

</li><li> <code>?DO</code> は <code>DO</code> に置き換えることはできます。 <code>DO</code> は、 ループ・パラメータ に関係なく、
常にループに入ります。 あなたが、 どの場合にもループに入ることを知っている場合でも <code>DO</code> は使用しないでください。
このような知恵はプログラムを保守していく中で無効になる傾向があり、 それゆえ <code>DO</code> が問題を引き起こすことになります。

</li><li> <code>LOOP</code> は <code><i>n</i> +LOOP</code> に置き換えることができます。 これにより、インデックスが 1 ではなく <i>n</i>
によって更新されます。 <i>limit-1</i> と <i>limit</i> の間の境界を越えると、 ループは終了します。 例:

<div class="example">
<pre class="example">4 0 +DO  i .  2 +LOOP
</pre></div>
<p>出力: <code>0 2</code>
</p>
<div class="example">
<pre class="example">4 1 +DO  i .  2 +LOOP
</pre></div>
<p>出力: <code>1 3</code>
</p>
</li><li> <span id="index-negative-increment-for-counted-loops"></span>
<span id="index-counted-loops-with-negative-increment"></span>
<i>n</i> が負数の場合、 <code><i>n</i> +LOOP</code> の動作は奇妙です:

<div class="example">
<pre class="example">-1 0 ?DO  i .  -1 +LOOP
</pre></div>
<p>出力: <code>0 -1</code>
</p>
<div class="example">
<pre class="example">0 0 ?DO  i .  -1 +LOOP
</pre></div>
<p>出力: なし。
</p>
<p>私たちは <code>?DO</code> と <code>+LOOP</code> を組み合わせないことをお勧めします。  Gfors はいくつかの代替手段を提供します:
</p>
<p><code>I</code>=limit の反復を含める <code>-1 +LOOP</code> の振る舞いが必要な場合、 <code>-[DO</code> または
<code>U-[DO</code>] でループを開始します(ここで、 <code>[</code> は、 包含範囲の数学的表記法(例: [1,n]
からインスピレーションを得ています):
</p>
<div class="example">
<pre class="example">-1 0 -[DO  i .  -1 +LOOP
</pre></div>

<p>出力: <code>0 -1</code>.
</p>
<div class="example">
<pre class="example">0 0 -[DO  i .  -1 +LOOP
</pre></div>

<p>出力: <code>0</code>
</p>
<div class="example">
<pre class="example">0 -1 -[DO  i .  -1 +LOOP
</pre></div>

<p>出力: なし。
</p>
<p>limit を除外したい場合、 代わりに <code>1 -LOOP</code> (または一般的には <code><i>u</i> -LOOP</code>)を使用し、
<code>?DO</code> または <code>-DO </code> または <code>U-DO</code> でループを開始します。 <code>-LOOP</code>
は、<i>limit+1</i> と <i>limit</i> の間の境界を越えたときにループを終了します。  例:
</p>
<div class="example">
<pre class="example">-2 0 -DO  i .  1 -LOOP
</pre></div>
<p>出力: <code>0 -1</code>
</p>
<div class="example">
<pre class="example">-1 0 -DO  i .  1 -LOOP
</pre></div>
<p>出力: <code>0</code>
</p>
<div class="example">
<pre class="example">0 0 -DO  i .  1 -LOOP
</pre></div>
<p>出力: なし。
</p>
<p>残念ながら、 <code>+DO</code>, <code>U+DO</code>, <code>-DO</code>, <code>U-DO</code>, <code>-LOOP</code> は 標準
Forth では定義されていません。 ただし、 標準のワードのみを使用するこれらのワードの実装が <samp>compat/loops.fs</samp>
にて提供されています。
</p>
</li><li> <span id="index-iterate-over-array"></span>
<span id="index-array_002c-iterating-over"></span>
よくある作業は、 配列の要素を前方または後方に反復処理することです。  要素のアドレスに対して反復処理することには 2 つの利点があります。
配列の開始アドレスを保持する必要がなくなり、 データ・スタックの負荷が軽減されます。 また、 反復ごとにアドレス計算を実行する必要がなくなります。
欠点は、 通常の配列表現 <i>addr u要素</i> または <i>addr uバイト</i> から始めて、 start アドレスと limit
アドレスを生成するために何らかの処理が必要なことです。  Gforth には、<i>addr ubytes</i> 表現からそこに到達するために
<code>bounds</code> があるため、セル配列 <code>v</code> を介した前方ループを以下のように記述できます:

<div class="example">
<pre class="example">create v 1 , 3 , 7 ,
: foo v 3 cells bounds U+DO i &nbsp;. cell +LOOP ;
foo
</pre></div>

<p>これは <code>1 3 7</code> を出力します。  逆方向にたどるための入力の前処理はより複雑であるため、 Gforth はそれを行う
<code>MEM-DO</code> … <code>LOOP</code> 形式のループ構造を提供します。 これは <i>addr uバイト</i>
表現の配列と要素サイズを受け取り、 要素のアドレスを逆順に反復処理します。
</p>
<div class="example">
<pre class="example">create v 1 , 3 , 7 ,
: foo1 v 3 cell array&gt;mem MEM-DO i &nbsp;. LOOP ;
foo1
</pre></div>

<p>これは <code>7 3 1</code> を出力します。<code>ARRAY&gt;MEM</code> は <i>addr uelems uelemsize</i> を
<code>MEM-DO</code> が期待する <i>addr ubytes uelemsize</i> に変換します(ubytes は uelems *
uelmsize です)。  このループは <code>MEM-DO</code> 通過後に<i>uelemsize</i> ずつ減算される、 <code>LOOP</code>
と対になるループとなります。
</p>
<p>Gforth は、 完全を期すために <code>MEM+DO</code> も追加します。  <code>MEM-DO</code> と同一のパラメータを受け取りますが、
配列を順(forwards)に処理します:
</p>
<div class="example">
<pre class="example">create v 1 , 3 , 7 ,
: foo2 v 3 cell array&gt;mem MEM+DO i &nbsp;. LOOP ;
foo2
</pre></div>

<p>出力: <code>1 3 7</code>
</p>
</li><li> <span id="index-FOR-loops"></span>
別のカウント・ループ:
<div class="example">
<pre class="example"><i>n</i>
FOR
  <i>body</i>
NEXT
</pre></div>
<p>これは、 <code>?DO</code> ループを適切に最適化するのが面倒な、 ネイティブ・コード・コンパイラー作成者達が好むループです。 このループ構造は標準
Forth では定義されていません。  Gforth では、 このループは <i>n+1</i> 回繰り返します。 <code>i</code> は、 <i>n</i>
で始まり 0 で終わる値を生成します。 他の Forth システムは、<code>FOR</code> ループをサポートしている場合でも、
振る舞いが異なる場合があります。 この問題を回避するには、 <code>FOR</code> ループを使用しないようにしてください。
</p>
</li></ul>

<p>カウント・ループ・ワード群:
</p>
<span id="index-_003fDO-_0028--compilation-_002d_002d-do_002dsys-_003b-run_002dtime-w1-w2-_002d_002d-_007c-loop_002dsys--_0029-core_002dext"></span>
<span id="index-_003fDO"></span>
<span id="index-_003fDO-1"></span>
<div class="format">
<pre class="format"><code>?DO</code> ( <i>compilation &ndash; do-sys ; run-time w1 w2 &ndash; | loop-sys  </i>) core-ext &ldquo;question-do&rdquo;
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-_002bDO-_0028--compilation-_002d_002d-do_002dsys-_003b-run_002dtime-n1-n2-_002d_002d-_007c-loop_002dsys--_0029-gforth_002d0_002e2"></span>
<span id="index-_002bDO"></span>
<span id="index-_002bDO-1"></span>
<div class="format">
<pre class="format"><code>+DO</code> ( <i>compilation &ndash; do-sys ; run-time n1 n2 &ndash; | loop-sys  </i>) gforth-0.2 &ldquo;plus-do&rdquo;
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-U_002bDO-_0028--compilation-_002d_002d-do_002dsys-_003b-run_002dtime-u1-u2-_002d_002d-_007c-loop_002dsys--_0029-gforth_002d0_002e2"></span>
<span id="index-U_002bDO"></span>
<span id="index-U_002bDO-1"></span>
<div class="format">
<pre class="format"><code>U+DO</code> ( <i>compilation &ndash; do-sys ; run-time u1 u2 &ndash; | loop-sys  </i>) gforth-0.2 &ldquo;u-plus-do&rdquo;
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-bounds-_0028--addr-u-_002d_002d-addr_002bu-addr--_0029-gforth_002d0_002e2"></span>
<span id="index-bounds"></span>
<span id="index-bounds-1"></span>
<div class="format">
<pre class="format"><code>bounds</code> ( <i>addr u &ndash; addr+u addr </i>) gforth-0.2 &ldquo;bounds&rdquo;
</pre></div>
<p>開始アドレス <i>addr</i> と長さ <i>u</i> で表されるメモリー・ブロックを指定すると、 <code>u+do</code> または <code>?do</code>
の終了アドレス <i>addr+u</i> と開始アドレス <i>addr</i> を正しい順序で生成します。
</p>
<span id="index-_002d_005bdo-_0028--compilation-_002d_002d-do_002dsys-_003b-run_002dtime-n1-n2-_002d_002d-_007c-loop_002dsys--_0029-gforth_002dexperimental"></span>
<span id="index-_002d_005bdo"></span>
<span id="index-_002d_005bdo-1"></span>
<div class="format">
<pre class="format"><code>-[do</code> ( <i>compilation &ndash; do-sys ; run-time n1 n2 &ndash; | loop-sys  </i>) gforth-experimental &ldquo;minus-bracket-do&rdquo;
</pre></div>
<p>負の方向へカウントされるループを開始します。 <i>n2</i>&lt;<i>n1</i> の場合、 ループをスキップします。 このようなカウント・ループは、
増分が負である <code>+loop</code> と対になります。 <code>I</code>&gt;=<i>n1</i> である限り実行されます。
</p>

<span id="index-u_002d_005bdo-_0028--compilation-_002d_002d-do_002dsys-_003b-run_002dtime-u1-u2-_002d_002d-_007c-loop_002dsys--_0029-gforth_002dexperimental"></span>
<span id="index-u_002d_005bdo"></span>
<span id="index-u_002d_005bdo-1"></span>
<div class="format">
<pre class="format"><code>u-[do</code> ( <i>compilation &ndash; do-sys ; run-time u1 u2 &ndash; | loop-sys  </i>) gforth-experimental &ldquo;u-minus-bracket-do&rdquo;
</pre></div>
<p>負の方向へカウントするループを開始します。 <i>u2</i>&lt;<i>u1</i> の場合、ループをスキップします。 このようなカウント・ループは、 増分が負の
<code>+loop</code> と対になります。  <code>I</code>&gt;=<i>u1</i> である限り実行されます。
</p>

<span id="index-_002dDO-_0028--compilation-_002d_002d-do_002dsys-_003b-run_002dtime-n1-n2-_002d_002d-_007c-loop_002dsys--_0029-gforth_002d0_002e2"></span>
<span id="index-_002dDO"></span>
<span id="index-_002dDO-1"></span>
<div class="format">
<pre class="format"><code>-DO</code> ( <i>compilation &ndash; do-sys ; run-time n1 n2 &ndash; | loop-sys  </i>) gforth-0.2 &ldquo;minus-do&rdquo;
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-U_002dDO-_0028--compilation-_002d_002d-do_002dsys-_003b-run_002dtime-u1-u2-_002d_002d-_007c-loop_002dsys--_0029-gforth_002d0_002e2"></span>
<span id="index-U_002dDO"></span>
<span id="index-U_002dDO-1"></span>
<div class="format">
<pre class="format"><code>U-DO</code> ( <i>compilation &ndash; do-sys ; run-time u1 u2 &ndash; | loop-sys  </i>) gforth-0.2 &ldquo;u-minus-do&rdquo;
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<p><code>array&gt;mem</code> ( <i>uelements uelemsize &ndash; ubytes uelemsize</i>) \ ubytes は
uelements * uelementsize です
<span id="index-mem_002bdo-_0028--compilation-_002d_002d-w-xt-do_002dsys_003b-run_002dtime-addr-ubytes-_002bnstride-_002d_002d--_0029-gforth_002dexperimental"></span>
<span id="index-mem_002bdo"></span>
<span id="index-mem_002bdo-1"></span>
</p><div class="format">
<pre class="format"><code>mem+do</code> ( <i>compilation &ndash; w xt do-sys; run-time addr ubytes +nstride &ndash;  </i>) gforth-experimental &ldquo;mem-plus-do&rdquo;
</pre></div>
<p><code>I</code> を <i>addr</i> から開始し、 <code>I</code>&lt;<i>addr</i>+<i>ubytes</i> である限り、 <i>nstride</i>
幅のステップでメモリー内をアドレスが増える方向にカウント・アップするカウント・ループを開始します。 <i>loop</i> と対にする必要があります。
</p>

<span id="index-mem_002ddo-_0028--compilation-_002d_002d-w-xt-do_002dsys_003b-run_002dtime-addr-ubytes-_002bnstride-_002d_002d--_0029-gforth_002dexperimental"></span>
<span id="index-mem_002ddo"></span>
<span id="index-mem_002ddo-1"></span>
<div class="format">
<pre class="format"><code>mem-do</code> ( <i>compilation &ndash; w xt do-sys; run-time addr ubytes +nstride &ndash;  </i>) gforth-experimental &ldquo;mem-minus-do&rdquo;
</pre></div>
<p><code>I</code> を <i>addr</i>+<i>ubytes</i>-<i>ustride</i> として開始し、 <code>I</code>&gt;=<i>addr</i> である間
-<i>nstride</i> 幅のステップでメモリーをアドレス下位方向(backward)にステップするカウント・ループを開始します。 <i>loop</i>
と対にしなければなりません。
</p>

<span id="index-DO-_0028--compilation-_002d_002d-do_002dsys-_003b-run_002dtime-w1-w2-_002d_002d-loop_002dsys--_0029-core"></span>
<span id="index-DO"></span>
<span id="index-DO-1"></span>
<div class="format">
<pre class="format"><code>DO</code> ( <i>compilation &ndash; do-sys ; run-time w1 w2 &ndash; loop-sys  </i>) core &ldquo;DO&rdquo;
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-FOR-_0028--compilation-_002d_002d-do_002dsys-_003b-run_002dtime-u-_002d_002d-loop_002dsys--_0029-gforth_002d0_002e2"></span>
<span id="index-FOR"></span>
<span id="index-FOR-1"></span>
<div class="format">
<pre class="format"><code>FOR</code> ( <i>compilation &ndash; do-sys ; run-time u &ndash; loop-sys  </i>) gforth-0.2 &ldquo;FOR&rdquo;
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-LOOP-_0028--compilation-do_002dsys-_002d_002d-_003b-run_002dtime-loop_002dsys1-_002d_002d-_007c-loop_002dsys2--_0029-core"></span>
<span id="index-LOOP"></span>
<span id="index-LOOP-1"></span>
<div class="format">
<pre class="format"><code>LOOP</code> ( <i>compilation do-sys &ndash; ; run-time loop-sys1 &ndash; | loop-sys2  </i>) core &ldquo;LOOP&rdquo;
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-_002bLOOP-_0028--compilation-do_002dsys-_002d_002d-_003b-run_002dtime-loop_002dsys1-n-_002d_002d-_007c-loop_002dsys2--_0029-core"></span>
<span id="index-_002bLOOP"></span>
<span id="index-_002bLOOP-1"></span>
<div class="format">
<pre class="format"><code>+LOOP</code> ( <i>compilation do-sys &ndash; ; run-time loop-sys1 n &ndash; | loop-sys2  </i>) core &ldquo;plus-loop&rdquo;
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-_002dLOOP-_0028--compilation-do_002dsys-_002d_002d-_003b-run_002dtime-loop_002dsys1-u-_002d_002d-_007c-loop_002dsys2--_0029-gforth_002d0_002e2"></span>
<span id="index-_002dLOOP"></span>
<span id="index-_002dLOOP-1"></span>
<div class="format">
<pre class="format"><code>-LOOP</code> ( <i>compilation do-sys &ndash; ; run-time loop-sys1 u &ndash; | loop-sys2  </i>) gforth-0.2 &ldquo;minus-loop&rdquo;
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-NEXT-_0028--compilation-do_002dsys-_002d_002d-_003b-run_002dtime-loop_002dsys1-_002d_002d-_007c-loop_002dsys2--_0029-gforth_002d0_002e2"></span>
<span id="index-NEXT"></span>
<span id="index-NEXT-1"></span>
<div class="format">
<pre class="format"><code>NEXT</code> ( <i>compilation do-sys &ndash; ; run-time loop-sys1 &ndash; | loop-sys2  </i>) gforth-0.2 &ldquo;NEXT&rdquo;
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-i-_0028--R_003an-_002d_002d-R_003an-n--_0029-core"></span>
<span id="index-i"></span>
<span id="index-i-1"></span>
<div class="format">
<pre class="format"><code>i</code> ( <i>R:n &ndash; R:n n </i>) core &ldquo;i&rdquo;
</pre></div>
<p><i>n</i> は、最も内側のカウント・ループのインデックスです。
</p>
<span id="index-j-_0028--R_003an-R_003aw1-R_003aw2-_002d_002d-n-R_003an-R_003aw1-R_003aw2--_0029-core"></span>
<span id="index-j"></span>
<span id="index-j-1"></span>
<div class="format">
<pre class="format"><code>j</code> ( <i>R:n R:w1 R:w2 &ndash; n R:n R:w1 R:w2 </i>) core &ldquo;j&rdquo;
</pre></div>
<p><i>n</i> は、 最も内側から数えて 2 番目のカウント・ループのインデックスです。
</p>
<span id="index-k-_0028--R_003an-R_003aw1-R_003aw2-R_003aw3-R_003aw4-_002d_002d-n-R_003an-R_003aw1-R_003aw2-R_003aw3-R_003aw4--_0029-gforth_002d0_002e3"></span>
<span id="index-k"></span>
<span id="index-k-1"></span>
<div class="format">
<pre class="format"><code>k</code> ( <i>R:n R:w1 R:w2 R:w3 R:w4 &ndash; n R:n R:w1 R:w2 R:w3 R:w4 </i>) gforth-0.3 &ldquo;k&rdquo;
</pre></div>
<p><i>n</i> は、 最も内側から数えて3番目のカウント・ループのインデックスです。
</p>
<span id="index-i_0027-_0028--R_003aw-R_003aw2-_002d_002d-R_003aw-R_003aw2-w--_0029-gforth_002d0_002e2"></span>
<span id="index-i_0027"></span>
<span id="index-i_0027-1"></span>
<div class="format">
<pre class="format"><code>i'</code> ( <i>R:w R:w2 &ndash; R:w R:w2 w </i>) gforth-0.2 &ldquo;i-tick&rdquo;
</pre></div>
<p>最も内側のカウント・ループの limit
</p>
<span id="index-delta_002di-_0028--r_003aulimit-r_003au-_002d_002d-r_003aulimit-r_003au-u2--_0029-gforth_002d1_002e0"></span>
<span id="index-delta_002di"></span>
<span id="index-delta_002di-1"></span>
<div class="format">
<pre class="format"><code>delta-i</code> ( <i>r:ulimit r:u &ndash; r:ulimit r:u u2 </i>) gforth-1.0 &ldquo;delta-i&rdquo;
</pre></div>
<p><i>u2</i>=<code>I'</code>-<code>I</code> (limit とインデックスの差)
</p>
<span id="index-LEAVE-_0028--compilation-_002d_002d-_003b-run_002dtime-loop_002dsys-_002d_002d--_0029-core"></span>
<span id="index-LEAVE"></span>
<span id="index-LEAVE-1"></span>
<div class="format">
<pre class="format"><code>LEAVE</code> ( <i>compilation &ndash; ; run-time loop-sys &ndash;  </i>) core &ldquo;LEAVE&rdquo; 
\ 訳注: <code>LEAVE</code> は、 最も内側のカウンタ付きループを抜け出します。
\       それが関係する <code>LOOP</code> または <code>NEXT</code> の直後から実行を続行します。
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-_003fLEAVE-_0028--compilation-_002d_002d-_003b-run_002dtime-f-_007c-f-loop_002dsys-_002d_002d--_0029-gforth_002d0_002e2"></span>
<span id="index-_003fLEAVE"></span>
<span id="index-_003fLEAVE-1"></span>
<div class="format">
<pre class="format"><code>?LEAVE</code> ( <i>compilation &ndash; ; run-time f | f loop-sys &ndash;  </i>) gforth-0.2 &ldquo;question-leave&rdquo; 
\訳注: <i>f</i> が true なら <var>leave</var> します。
</pre></div>
<p>See <a href="#Counted-Loops">Counted Loops</a>.
</p>

<span id="index-unloop-_0028--R_003aw1-R_003aw2-_002d_002d--_0029-core"></span>
<span id="index-unloop"></span>
<span id="index-unloop-1"></span>
<div class="format">
<pre class="format"><code>unloop</code> ( <i>R:w1 R:w2 &ndash; </i>) core &ldquo;unloop&rdquo;
</pre></div>

<span id="index-DONE-_0028--compilation-do_002dsys-_002d_002d-_003b-run_002dtime-_002d_002d--_0029-gforth_002d0_002e2"></span>
<span id="index-DONE"></span>
<span id="index-DONE-1"></span>
<div class="format">
<pre class="format"><code>DONE</code> ( <i>compilation do-sys &ndash; ; run-time &ndash;  </i>) gforth-0.2 &ldquo;DONE&rdquo;
</pre></div>
<p>do-sys までのすべての LEAVE を解決します(訳注: loop, +loop , next 等の中で内部的に呼び出されます)。
</p>



<p>標準では、 <i>do-sys</i> で <code>CS-PICK</code> や <code>CS-ROLL</code> を使用することは許可されていません。
<code>MEM+DO</code> と <code>MEM-DO</code> によって生成される do-sys を除いて、 Gforth では
<code>CS-PICK</code> や <code>CS-ROLL</code> の使用を許可しますが、 すべての <code>?DO</code> などに対して、
定義を介した任意の経路上に <code>UNLOOP</code> が正確に 1 つだけ存在すること(<code>LOOP</code> などの失敗経路上で
<code>UNLOOP</code> コンパイルするなど)を確認するのはあなたの仕事です。 また、 すべての <code>LEAVE</code> が（ループ終了ワードの 1
つまたは <code>DONE</code> を使用して)解決されていることを確認する必要があります。
</p>
</div>
<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5><a id="FOOT12" href="#DOCF12">(12)</a></h5>
<p>ええ、まぁ、
移植可能な方法ではできません、 ぐらいな</p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="BEGIN-loops-with-multiple-exits.html"><code>Begin</code> loops with multiple exits</a>, Previous: <a href="Simple-Loops.html">Simple Loops</a>, Up: <a href="Control-Structures.html">Control Structures</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
