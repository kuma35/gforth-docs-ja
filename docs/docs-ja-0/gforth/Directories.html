<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright © 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Directories (Gforth マニュアル)</title>

<meta name="description" content="Directories (Gforth マニュアル)">
<meta name="keywords" content="Directories (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Files.html" rel="up" title="Files">
<link href="Search-Paths.html" rel="next" title="Search Paths">
<link href="Redirection.html" rel="prev" title="Redirection">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
pre.format-preformatted {font-family: inherit}
span:hover a.copiable-link {visibility: visible}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Directories">
<div class="nav-panel">
<p>
Next: <a href="Search-Paths.html" accesskey="n" rel="next">Search Paths</a>, Previous: <a href="Redirection.html" accesskey="p" rel="prev">Redirection</a>, Up: <a href="Files.html" accesskey="u" rel="up">Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Directories-1"><span>6.18.4 Directories<a class="copiable-link" href="#Directories-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-Directories"></a>

<p>あなたは、 ファイル名をディレクトリとベース・コンポーネントに分割できます:
</p>
<a class="index-entry-id" id="index-basename-_0028-c_002daddr1-u1-_002d_002d-c_002daddr2-u2-_0029-gforth_002d0_002e7"></a>
<a class="index-entry-id" id="index-basename"></a>
<a class="index-entry-id" id="index-basename-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">basename</code> ( <i class="i">c-addr1 u1 &ndash; c-addr2 u2  </i>) gforth-0.7 &ldquo;basename&rdquo;
</pre></div>
<p>ファイル名が <i class="i">c-addr1 u1</i> の場合、 <i class="i">c-addr2 u2</i> は、 先頭のディレクトリ・コンポーネントが削除された部分です(訳注:
&quot;os-class&quot; environment? type unix ok な環境では動いたが、 Windows系では不明(&rsquo;/&rsquo;
を区切り文字としてハードコーディングしてあるっぽい)。
</p>

<a class="index-entry-id" id="index-dirname-_0028-c_002daddr1-u1-_002d_002d-c_002daddr1-u2-_0029-gforth_002d0_002e7"></a>
<a class="index-entry-id" id="index-dirname"></a>
<a class="index-entry-id" id="index-dirname-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">dirname</code> ( <i class="i">c-addr1 u1 &ndash; c-addr1 u2  </i>) gforth-0.7 &ldquo;dirname&rdquo;
</pre></div>
<p><i class="i">C-addr1 u2</i> は、 ファイル名 <i class="i">c-addr1 u1</i> のディレクトリ名部分で、 末尾の <code class="code">/</code> も含まれます。
<i class="i">caddr1 u1</i> に <code class="code">/</code> が含まれていない場合、 <i class="i">u2</i>=0 です(訳注: pathの区切り文字として <code class="code">/</code>
をハードコーディングしているので、 Windows系で動くかどうか不明)。
</p>


<p>ファイルと同様に、 ディレクトリを開いて読み取ることができます。  読むと、 一度に 1 つのディレクトリ・エントリが得られます。 これを、
(ワイルドカードを使用して)ファイル名とマッチングさせることができます。
</p>
<a class="index-entry-id" id="index-open_002ddir-_0028-c_002daddr-u-_002d_002d-wdirid-wior-_0029-gforth_002d0_002e5"></a>
<a class="index-entry-id" id="index-open_002ddir"></a>
<a class="index-entry-id" id="index-open_002ddir-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">open-dir</code> ( <i class="i">c-addr u &ndash; wdirid wior </i>) gforth-0.5 &ldquo;open-dir&rdquo;
</pre></div>
<p><i class="i">c-addr, u</i> で指定されたディレクトリを開き、 さらにそこにアクセスするために <i class="i">dir-id</i> を返します。
</p>
<a class="index-entry-id" id="index-read_002ddir-_0028-c_002daddr-u1-wdirid-_002d_002d-u2-flag-wior-_0029-gforth_002d0_002e5"></a>
<a class="index-entry-id" id="index-read_002ddir"></a>
<a class="index-entry-id" id="index-read_002ddir-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">read-dir</code> ( <i class="i">c-addr u1 wdirid &ndash; u2 flag wior </i>) gforth-0.5 &ldquo;read-dir&rdquo;
</pre></div>
<p><i class="i">dir-id</i> で指定されたディレクトリから、 アドレス <i class="i">c-addr</i> にある長さ <i class="i">u1</i> のバッファーへ、
次のエントリの読み取りを試みます。 これ以上エントリがないために試行が失敗した場合は、 <i class="i">ior</i>=0 かつ <i class="i">flag</i>=0 かつ
<i class="i">u2</i>=0 となり、 バッファーは変更されません。  他の理由で次のエントリの読み取りに失敗した場合は、 <i class="i">ior</i>&lt;&gt;0 を返します。
試行が成功した場合、 ファイル名を <i class="i">c-addr</i> からのバッファーに保存し、 <i class="i">ior</i>=0 かつ <i class="i">flag</i>=true かつ
ファイル名のサイズに等しい <i class="i">u2</i> を返します。  ファイル名の長さが <i class="i">u1</i> より長い場合は、 ファイル名の最初の <i class="i">u1</i>
文字をバッファーに格納し、 <i class="i">ior</i> はエラー &quot;name too long&quot; を示し(訳注: <i class="i">ior</i>= -548 日本語環境では
&quot;ファイル名が長すぎます&quot;)、 かつ <i class="i">flag</i>=true かつ <i class="i">u2</i>=<i class="i">u1</i> です。
</p>
<a class="index-entry-id" id="index-close_002ddir-_0028-wdirid-_002d_002d-wior-_0029-gforth_002d0_002e5"></a>
<a class="index-entry-id" id="index-close_002ddir"></a>
<a class="index-entry-id" id="index-close_002ddir-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">close-dir</code> ( <i class="i">wdirid &ndash; wior </i>) gforth-0.5 &ldquo;close-dir&rdquo;
</pre></div>
<p><i class="i">dir-id</i> で指定されたディレクトリを閉じます。
</p>
<a class="index-entry-id" id="index-filename_002dmatch-_0028-c_002daddr1-u1-c_002daddr2-u2-_002d_002d-flag-_0029-gforth_002d0_002e5"></a>
<a class="index-entry-id" id="index-filename_002dmatch"></a>
<a class="index-entry-id" id="index-filename_002dmatch-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">filename-match</code> ( <i class="i">c-addr1 u1 c-addr2 u2 &ndash; flag </i>) gforth-0.5 &ldquo;match-file&rdquo;
</pre></div>
<p>ファイル名 <var class="var">c_addr1 u1</var> とパターン <var class="var">c_addr2 u2</var> のマッチングを行います。  パターンは、複数の文字
(&rsquo;*&rsquo;) または 1 つの文字 (&rsquo;?&rsquo;) のワイルドカードである特殊文字 &rsquo;*&rsquo; と &rsquo;?&rsquo; を除き、 文字ごとにマッチします。
マッチングできた場合は true
</p>
<a class="index-entry-id" id="index-get_002ddir-_0028-c_002daddr1-u1-_002d_002d-c_002daddr2-u2-_0029-gforth_002d0_002e7"></a>
<a class="index-entry-id" id="index-get_002ddir"></a>
<a class="index-entry-id" id="index-get_002ddir-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">get-dir</code> ( <i class="i">c-addr1 u1 &ndash; c-addr2 u2 </i>) gforth-0.7 &ldquo;get-dir&rdquo;
</pre></div>
<p><i class="i">c-addr1, u1</i>で指定されたバッファーにカレント・ディレクトリのパス(path)を格納します。  バッファーサイズが十分でない場合は、 0
0 を返します。
</p>
<a class="index-entry-id" id="index-set_002ddir-_0028-c_002daddr-u-_002d_002d-wior-_0029-gforth_002d0_002e7"></a>
<a class="index-entry-id" id="index-set_002ddir"></a>
<a class="index-entry-id" id="index-set_002ddir-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">set-dir</code> ( <i class="i">c-addr u &ndash; wior </i>) gforth-0.7 &ldquo;set-dir&rdquo;
</pre></div>
<p>現在のディレクトリを <i class="i">c-addr, u</i> に変更します。  これが不可能な場合はエラーを返します(訳注: 例えば <i class="i">ior</i> = -514
; &quot;そのようなファイルやディレクトリはありません&quot;)
</p>
<a class="index-entry-id" id="index-_003dmkdir-_0028-c_002daddr-u-wmode-_002d_002d-wior-_0029-gforth_002d0_002e7"></a>
<a class="index-entry-id" id="index-_003dmkdir"></a>
<a class="index-entry-id" id="index-_003dmkdir-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">=mkdir</code> ( <i class="i">c-addr u wmode &ndash; wior </i>) gforth-0.7 &ldquo;equals-mkdir&rdquo;
</pre></div>
<p>モード <i class="i">wmode</i> でディレクトリ <i class="i">c-addr u</i> を作成します。
</p>
<a class="index-entry-id" id="index-mkdir_002dparents-_0028-c_002daddr-u-mode-_002d_002d-ior-_0029-gforth_002d0_002e7"></a>
<a class="index-entry-id" id="index-mkdir_002dparents"></a>
<a class="index-entry-id" id="index-mkdir_002dparents-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">mkdir-parents</code> ( <i class="i">c-addr u mode &ndash; ior  </i>) gforth-0.7 &ldquo;mkdir-parents&rdquo;
</pre></div>
<p>ディレクトリ <i class="i">c-addr u</i> とそのすべての親をモード <i class="i">mode</i> (umask が掛けられます)で作成します(訳注:
フルパスで指定したディレクトリを作成する。 <code class="code">aaa/bbb/ccc</code> というディレクトリを指定すればそれを一気に作る。 ここで、
<i class="i">ccc</i> というファイルが既にある場合は何もせず <i class="i">ior</i>=-529 「ファイルが存在します」エラーとなる。 注意: <i class="i">aaa</i> または
<i class="i">bbb</i> がファイルの場合は「削除」してからディレクトリを作成するので注意。  <i class="i">ior</i>=-525 なら「許可がありません」(aaa ,
aaa/bbb , aaa/bbb/ccc のいずれで許可が無かったのかは不明)。 注意: gforth には8進数リテラルが無いので注意。
2進数(%0111111101 ; -rwxrwxr-x )がおすすめ。 ディレクトリの作成であるので実行権限(x)の付与を行うこと)
</p>


</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Search-Paths.html">Search Paths</a>, Previous: <a href="Redirection.html">Redirection</a>, Up: <a href="Files.html">Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
