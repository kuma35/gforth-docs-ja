<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright © 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Line input and conversion (Gforth マニュアル)</title>

<meta name="description" content="Line input and conversion (Gforth マニュアル)">
<meta name="keywords" content="Line input and conversion (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Other-I_002fO.html" rel="up" title="Other I/O">
<link href="Pipes.html" rel="next" title="Pipes">
<link href="Single_002dkey-input.html" rel="prev" title="Single-key input">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.key {font-style: normal}
pre.format-preformatted {font-family: inherit}
span:hover a.copiable-link {visibility: visible}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Line-input-and-conversion">
<div class="nav-panel">
<p>
Next: <a href="Pipes.html" accesskey="n" rel="next">Pipes</a>, Previous: <a href="Single_002dkey-input.html" accesskey="p" rel="prev">Single-key input</a>, Up: <a href="Other-I_002fO.html" accesskey="u" rel="up">Other I/O</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Line-input-and-conversion-1"><span>6.20.8 Line input and conversion<a class="copiable-link" href="#Line-input-and-conversion-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-line-input-from-terminal"></a>
<a class="index-entry-id" id="index-input_002c-linewise-from-terminal"></a>
<a class="index-entry-id" id="index-convertin-strings-to-numbers"></a>
<a class="index-entry-id" id="index-I_002fO-_002d-see-input"></a>

<p>文字列をメモリーに保存する方法については、 <a class="ref" href="String-representations.html">String representations</a> を参照してください。
</p>

<p>キーボードから一行入力するためのワード群:
</p>
<a class="index-entry-id" id="index-accept-_0028-c_002daddr-_002bn1-_002d_002d-_002bn2-_0029-core"></a>
<a class="index-entry-id" id="index-accept"></a>
<a class="index-entry-id" id="index-accept-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">accept</code> ( <i class="i">c-addr +n1 &ndash; +n2  </i>) core &ldquo;accept&rdquo;
</pre></div>
<p>ユーザー入力デバイスから最大 <var class="var">n1</var> 文字の文字列を取得し、 <var class="var">c-addr</var> に保存します。  <var class="var">n2</var>
は受け取った文字列の長さです。 ユーザーは <kbd class="key">RET</kbd> を押して終了を指示します。  Gforth は、 <code class="code">accept</code> で、
Forth コマンド・ラインで利用できるすべての編集機能(履歴やワード補完を含む)をサポートしています。
</p>

<a class="index-entry-id" id="index-edit_002dline-_0028-c_002daddr-n1-n2-_002d_002d-n3-_0029-gforth_002d0_002e6"></a>
<a class="index-entry-id" id="index-edit_002dline"></a>
<a class="index-entry-id" id="index-edit_002dline-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">edit-line</code> ( <i class="i">c-addr n1 n2 &ndash; n3  </i>) gforth-0.6 &ldquo;edit-line&rdquo;
</pre></div>
<p><code class="code">accept</code> のように振る舞いますが、バッファ <var class="var">c-addr n1</var> の内容を先頭から長さ <i class="i">n2</i> まで引用します(
<i class="i">n2</i>=0 の場合、 全く引用せず、 空の状態から入力編集開始になります)。 受け取った文字列の長さを <i class="i">n3</i> に返します。
</p>


<p>変換ワード群:
</p>
<a class="index-entry-id" id="index-s_003enumber_003f-_0028-addr-u-_002d_002d-d-f-_0029-gforth_002d0_002e5"></a>
<a class="index-entry-id" id="index-s_003enumber_003f"></a>
<a class="index-entry-id" id="index-s_003enumber_003f-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">s&gt;number?</code> ( <i class="i">addr u &ndash; d f  </i>) gforth-0.5 &ldquo;s&gt;number?&rdquo;
</pre></div>
<p>文字列 <i class="i">addr u</i> を 符号付き2倍長整数 <i class="i">d</i> に変換し、 フラグ <i class="i">f</i> が true ならば成功、 false
ならば変換失敗です( <i class="i">d</i> の値は保証されません) (訳注: フラグが true の場合でも <code class="code">-15.</code>
基数プレフィックスを付けずに記述した場合、 警告が出力されます。 警告が出ないようにするには基数プレフィックスを付けて下さい <code class="code">#-15.</code>)
</p>

<a class="index-entry-id" id="index-s_003eunumber_003f-_0028-c_002daddr-u-_002d_002d-ud-flag-_0029-gforth_002d0_002e5"></a>
<a class="index-entry-id" id="index-s_003eunumber_003f"></a>
<a class="index-entry-id" id="index-s_003eunumber_003f-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">s&gt;unumber?</code> ( <i class="i">c-addr u &ndash; ud flag  </i>) gforth-0.5 &ldquo;s&gt;unumber?&rdquo;
</pre></div>
<p>文字列 <i class="i">c-addr u</i> を 符号なし2倍長整数 <i class="i">ud</i> に変換します。 フラグ <i class="i">f</i> が true ならば成功、 false
ならば変換失敗です( <i class="i">d</i> の値は保証されません)。 (訳注: フラグが true の場合でも <code class="code">15.</code>
基数プレフィックスを付けずに記述した場合、 警告が出力されます。 警告が出ないようにするには基数プレフィックスを付けて下さい <code class="code">#15.</code> 、
注意: 負数も受け付けます; &quot;#-15.&quot; s&gt;unumber? .s &lt;3&gt; -15 -1 -1  ok  drop -15 -1
ud. 340282366920938463463374607431768211441  ok
&quot;#340282366920938463463374607431768211441.&quot; s&gt;unumber? .s &lt;3&gt; -15 -1 -1 ok 3
)
</p>

<a class="index-entry-id" id="index-_003enumber-_0028-ud1-c_002daddr1-u1-_002d_002d-ud2-c_002daddr2-u2-_0029-core"></a>
<a class="index-entry-id" id="index-_003enumber"></a>
<a class="index-entry-id" id="index-_003enumber-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">&gt;number</code> ( <i class="i">ud1 c-addr1 u1 &ndash; ud2 c-addr2 u2  </i>) core &ldquo;to-number&rdquo;
</pre></div>
<p>文字列 <var class="var">c-addr1 u1</var> を現在の基数で符号なし2倍長整数に変換しようと試みます。 符号なし2倍長整数 <var class="var">ud1</var>
に変換結果を積算して <var class="var">ud2</var> にします。 変換は、 文字列全体が変換されるか、 現在の基数で変換できない文字( &lsquo;+&lsquo; または &lsquo;-&lsquo;
を含む)が検出されるまで、 左から右に続行されます。 変換可能な各文字ごとに、 <var class="var">ud1</var> * <code class="code">base</code> してから、
次にその文字によって表される値を足しこみます( new ud1 = ud1 * base + digit )。  <var class="var">c-addr2</var> は、
最初の未変換文字の位置です(文字列全体が変換された場合は文字列の末尾以降)。  <var class="var">u2</var> は、 文字列内の未変換の文字の数です。
最後まで変換出来たときは 0 です。 オーバーフローは検出されません。
</p>

<a class="index-entry-id" id="index-_003efloat-_0028-c_002daddr-u-_002d_002d-f_003a_002e_002e_002e-flag-_0029-floating"></a>
<a class="index-entry-id" id="index-_003efloat"></a>
<a class="index-entry-id" id="index-_003efloat-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">&gt;float</code> ( <i class="i">c-addr u &ndash; f:... flag </i>) floating &ldquo;to-float&rdquo;
</pre></div>
<p>実際のスタック効果: ( c_addr u &ndash; r t | f )。  文字列 <i class="i">c-addr u</i> を内部浮動小数点表現に変換しようとします。
文字列が有効な浮動小数点数を表す場合、 <i class="i">r</i> が浮動小数点スタックに配置され、 <i class="i">flag</i> が true になります。
それ以外の場合、<i class="i">flag</i> は false になります(訳注: この場合、 浮動小数点数スタックには何も積まれない)。
空白の文字列は特殊なケースであり、 浮動小数点数 0 を表します。
</p>
<a class="index-entry-id" id="index-_003efloat1-_0028-c_002daddr-u-c-_002d_002d-f_003a_002e_002e_002e-flag-_0029-gforth_002d1_002e0"></a>
<a class="index-entry-id" id="index-_003efloat1"></a>
<a class="index-entry-id" id="index-_003efloat1-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">&gt;float1</code> ( <i class="i">c-addr u c &ndash; f:... flag </i>) gforth-1.0 &ldquo;to-float1&rdquo;
</pre></div>
<p>実際のスタック効果: ( c_addr u c &ndash; r t | f )  <i class="i">c</i> を小数点として使用して(訳注: &rsquo;.&rsquo;
が小数点とは限らない。ロケールにより異なるため、指定できるようになっている)、 文字列 <i class="i">c-addr u</i>
を内部浮動小数点表現に変換しようと試みます。  文字列が有効な浮動小数点数を表す場合、 <i class="i">r</i> が浮動小数点スタックに配置され、 <i class="i">flag</i>
が true になります。 それ以外の場合、<i class="i">flag</i> は false になります(この場合、浮動小数点数スタックには何も積まれません)。
空白の文字列は特殊なケースであり、浮動小数点数 0 を表します。
</p>

<p>時代遅れ(OBSOLESCENT)の入力ワード群と変換ワード群:
</p>
<a class="index-entry-id" id="index-convert-_0028-ud1-c_002daddr1-_002d_002d-ud2-c_002daddr2-_0029-core_002dext_002dobsolescent"></a>
<a class="index-entry-id" id="index-convert"></a>
<a class="index-entry-id" id="index-convert-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">convert</code> ( <i class="i">ud1 c-addr1 &ndash; ud2 c-addr2  </i>) core-ext-obsolescent &ldquo;convert&rdquo;
</pre></div>
<p>時代遅れ(OBSOLESCENT): <code class="code">&gt;number</code> に置き換えられました。
</p>

<a class="index-entry-id" id="index-expect-_0028-c_002daddr-_002bn-_002d_002d-_0029-core_002dext_002dobsolescent"></a>
<a class="index-entry-id" id="index-expect"></a>
<a class="index-entry-id" id="index-expect-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">expect</code> ( <i class="i">c-addr +n &ndash;  </i>) core-ext-obsolescent &ldquo;expect&rdquo;
</pre></div>
<p>最大 <i class="i">+n</i> 文字の文字列を受け取り、<i class="i">c-addr</i> から始まるメモリーに保存します。 文字列は表示されます。
&lt;return&gt;キーを押すか、 <i class="i">+n</i> 文字を受け取ると入力が終了します。 通常の Gforth 行編集機能が利用可能です。 文字列の長さは
<code class="code">span</code> に保存されますが、 &lt;return&gt; 文字は含まれません。 時代遅れ(OBSOLESCENT): <code class="code">accept</code>
に置き換えられました。
</p>

<a class="index-entry-id" id="index-span-_0028-_002d_002d-c_002daddr-_0029-core_002dext_002dobsolescent"></a>
<a class="index-entry-id" id="index-span"></a>
<a class="index-entry-id" id="index-span-1"></a>
<div class="format">
<pre class="format-preformatted"><code class="code">span</code> ( <i class="i">&ndash; c-addr  </i>) core-ext-obsolescent &ldquo;span&rdquo;
</pre></div>
<p>変数(variable) &ndash; <i class="i">c-addr</i> は、 <code class="code">expect</code>
によって最後に受け取った文字列の長さを格納するセルのアドレスです。 時代遅れ(OBSOLESCENT)。
</p>



</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Pipes.html">Pipes</a>, Previous: <a href="Single_002dkey-input.html">Single-key input</a>, Up: <a href="Other-I_002fO.html">Other I/O</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
