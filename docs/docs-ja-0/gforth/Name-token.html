<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Name token (Gforth マニュアル)</title>

<meta name="description" content="Name token (Gforth マニュアル)">
<meta name="keywords" content="Name token (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Tokens-for-Words.html" rel="up" title="Tokens for Words">
<link href="Compilation-token.html" rel="next" title="Compilation token">
<link href="Execution-token.html" rel="prev" title="Execution token">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="Name-token">
<div class="header">
<p>
Next: <a href="Compilation-token.html" accesskey="n" rel="next">Compilation token</a>, Previous: <a href="Execution-token.html" accesskey="p" rel="prev">Execution token</a>, Up: <a href="Tokens-for-Words.html" accesskey="u" rel="up">Tokens for Words</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Name-token-1"></span><h4 class="subsection">6.12.2 Name token</h4>

<span id="index-name-token"></span>
<span id="index-nt-_0028name-token_0029"></span>
<p>Gforth は、名前付きワードを「名前トークン」<em>name token</em>(<i>nt</i>)で表します。 名前トークンは、 引数または、
以下のワードの結果として発生するセル・サイズの抽象データ型です。
</p>
<p>Gforth 1.0 以降、 ほとんどのワードの nt の具体的な実装は、 xt と同一アドレスです(これは xt のための基本 nt (primary
nt)です)。  ただし、 synonym と、 aliase と、 <code>interpret/compile:</code> で定義されたワードは、
別のワードから xt を取得しますが、 (xt とは異なり)依然として自分独自の nt を持ちます。  したがって、 Gforth 1.0
固有のコードを作成する準備ができている場合でも、 xt と nt を同一の意味で使用することはできません。 <code>&gt;name</code>
を使用してこれら自分独自の nt を持つワードの xt から代替 nt を取得することはできません。
</p>
<p><code>``<i>x</i></code> (Gforth 1.0 以降) または、 以下を使用して、 ワード <i>x</i> の nt を取得します
</p>
<span id="index-find_002dname-_0028--c_002daddr-u-_002d_002d-nt-_007c-0--_0029-gforth_002d0_002e2"></span>
<span id="index-find_002dname"></span>
<span id="index-find_002dname-1"></span>
<div class="format">
<pre class="format"><code>find-name</code> ( <i>c-addr u &ndash; nt | 0  </i>) gforth-0.2 &ldquo;find-name&rdquo;
</pre></div>
<p>現在の検索順序スタック(the search order)で名前 <i>c-addr u</i> を見つけます。 <i>nt</i> が見つかった場合はそれを返し、
それ以外の場合は 0 を返します。
</p>

<span id="index-find_002dname_002din-_0028--c_002daddr-u-wid-_002d_002d-nt-_007c-0--_0029-gforth_002d1_002e0"></span>
<span id="index-find_002dname_002din"></span>
<span id="index-find_002dname_002din-1"></span>
<div class="format">
<pre class="format"><code>find-name-in</code> ( <i>c-addr u wid &ndash; nt | 0  </i>) gforth-1.0 &ldquo;find-name-in&rdquo;
</pre></div>
<p><i>wid</i> で識別されるワードリストで、 <i>c-addr u</i> の文字列で指定された定義を検索します。  <i>nt</i>
が見つかった場合はそれを返し、 それ以外の場合は 0 を返します。
</p>

<span id="index-latest-_0028--_002d_002d-nt--_0029-gforth_002d0_002e6"></span>
<span id="index-latest"></span>
<span id="index-latest-1"></span>
<div class="format">
<pre class="format"><code>latest</code> ( <i>&ndash; nt  </i>) gforth-0.6 &ldquo;latest&rdquo;
</pre></div>
<p><var>nt</var> は、 最後に定義されたワードの名前トークンです。 最後のワードに名前がない場合は 0 です。
</p>

<span id="index-latestnt-_0028--_002d_002d-nt--_0029-gforth_002d1_002e0"></span>
<span id="index-latestnt"></span>
<span id="index-latestnt-1"></span>
<div class="format">
<pre class="format"><code>latestnt</code> ( <i>&ndash; nt  </i>) gforth-1.0 &ldquo;latestnt&rdquo;
</pre></div>
<p><i>nt</i> は、 最後に定義されたワードの名前トークンです(訳注: 名前が無い場合でも nt を返す。 その nt を name&gt;string
すると、 長さ 0 の文字列(addr u) を返す)
</p>

<span id="index-_003ename-_0028--xt-_002d_002d-nt_007c0--_0029-gforth_002d0_002e2"></span>
<span id="index-_003ename"></span>
<span id="index-_003ename-1"></span>
<div class="format">
<pre class="format"><code>&gt;name</code> ( <i>xt &ndash; nt|0  </i>) gforth-0.2 &ldquo;to-name&rdquo;
</pre></div>
<p><i>xt</i> で表されるワードの基本名前トークン(primary name token) <i>nt</i> を取得します。  <i>xt</i> が ぢつは xt
でない場合(非 xt を xt と誤認する可能性が低いヒューリスティック・チェックを使用)、 または基本 nt (primary
nt)が名前無しワードである場合は 0 を返します。  Gforth 1.0 の時点では、 すべての xt に基本 nt がありますが、
他の名前付きワードも同一のインタープリター機能(interpretation sematics) xt を持つ可能性があります。
</p>

<span id="index-xt_003ename-_0028--xt-_002d_002d-nt--_0029-gforth_002d1_002e0"></span>
<span id="index-xt_003ename"></span>
<span id="index-xt_003ename-1"></span>
<div class="format">
<pre class="format"><code>xt&gt;name</code> ( <i>xt &ndash; nt  </i>) gforth-1.0 &ldquo;xt-to-name&rdquo;
</pre></div>
<p>xt の基本 nt (primary nt)を生成します。  <i>xt</i> が、 ぢつは xt でない場合、 <i>nt</i> は nt
であるとは保証されません。
</p>


<p>以下を使用すると、 ワードリスト内のすべての nt を取得できます
</p>
<span id="index-traverse_002dwordlist-_0028--_002e_002e_002e-xt-wid-_002d_002d-_002e_002e_002e--_0029-tools_002dext"></span>
<span id="index-traverse_002dwordlist"></span>
<span id="index-traverse_002dwordlist-1"></span>
<div class="format">
<pre class="format"><code>traverse-wordlist</code> ( <i>... xt wid &ndash; ...  </i>) tools-ext &ldquo;traverse-wordlist&rdquo;
</pre></div>
<p><i>f</i> が false になるかワードリストがなくなるまで、 ワードリスト <i>wid</i> 内のワード <i>nt</i> ごとに <i>xt</i> (
... nt &ndash; f ... ) を 1 回実行します。  <i>xt</i> はスタックその下側を自由に使用できます(訳注: つまり TOS に f
さえ返せばスタックに何が積まれても(積まれなくても)気にしない)
</p>


<p>nt を使用すると、 ワードのインタープリター機能(interpretation semantics)とコンパイル機能(compilation
semantics)や、 その名前や、 ワードリスト内の次のワードのワード、 にアクセスできます:
</p>
<span id="index-name_003einterpret-_0028--nt-_002d_002d-xt--_0029-tools_002dext"></span>
<span id="index-name_003einterpret"></span>
<span id="index-name_003einterpret-1"></span>
<div class="format">
<pre class="format"><code>name&gt;interpret</code> ( <i>nt &ndash; xt  </i>) tools-ext &ldquo;name-to-interpret&rdquo;
</pre></div>
<p><i>xt</i> はワード <i>nt</i> のインタープリター機能(interpretation semantics)を表します。
</p>

<span id="index-name_003ecompile-_0028--nt-_002d_002d-w-xt--_0029-tools_002dext"></span>
<span id="index-name_003ecompile"></span>
<span id="index-name_003ecompile-1"></span>
<div class="format">
<pre class="format"><code>name&gt;compile</code> ( <i>nt &ndash; w xt  </i>) tools-ext &ldquo;name-to-compile&rdquo;
</pre></div>
<p><i>w xt</i> はワード <i>nt</i> のコンパイル・トークン(compilation token)です(訳注: コンパイル・トークン CT は
2セル構成)。
</p>

<span id="index-name_003estring-_0028--nt-_002d_002d-addr-u--_0029-tools_002dext"></span>
<span id="index-name_003estring"></span>
<span id="index-name_003estring-1"></span>
<div class="format">
<pre class="format"><code>name&gt;string</code> ( <i>nt &ndash; addr u  </i>) tools-ext &ldquo;name-to-string&rdquo;
</pre></div>
<p><i>addr count</i> は、 <i>nt</i> で表されるワードの名前です。
</p>

<span id="index-id_002e-_0028--nt-_002d_002d--_0029-gforth_002d0_002e6"></span>
<span id="index-id_002e"></span>
<span id="index-id_002e-1"></span>
<div class="format">
<pre class="format"><code>id.</code> ( <i>nt &ndash;  </i>) gforth-0.6 &ldquo;i-d-dot&rdquo;
</pre></div>
<p><var>nt</var> で表されるワードの名前を出力します。
</p>

<span id="index-_002eid-_0028--nt-_002d_002d--_0029-gforth_002d0_002e6"></span>
<span id="index-_002eid"></span>
<span id="index-_002eid-1"></span>
<div class="format">
<pre class="format"><code>.id</code> ( <i>nt &ndash;  </i>) gforth-0.6 &ldquo;dot-i-d&rdquo;
</pre></div>
<p><code>id.</code> の F83 での名前です。
</p>

<span id="index-name_003elink-_0028--nt1-_002d_002d-nt2-_002f-0--_0029-gforth_002d1_002e0"></span>
<span id="index-name_003elink"></span>
<span id="index-name_003elink-1"></span>
<div class="format">
<pre class="format"><code>name&gt;link</code> ( <i>nt1 &ndash; nt2 / 0  </i>) gforth-1.0 &ldquo;name-to-link&rdquo;
</pre></div>
<p>ワード <i>nt1</i> の場合、 同じワードリスト内の1つ前のワード <i>nt2</i> を返します。 前のワードがない場合は 0 を返します。
</p>


<p>名前なしワードは通常、 インタープリター機能(interpretation compilation)も無く、 コンパイル機能(compilation
semantics)も無く、 名前も無く、 単語リストにもありません。  しかし、Gforth (1.0 以降) ではすべてのワードは等しいため、
名前無しのワードにも nt があります(ただし、 ワードリストには含まれません)。  その nt は <code>latestnt</code> で取得でき、 nt
を消費する上記のワード群はこれらの nt に対して適切な処理を行います。
</p>
<p>使用例として、 以下のコードは、デフォルト以外のコンパイル機能(compilation semantics)を持つ
<code>forth-wordlist</code> 内のすべてのワードをリストします:
</p>
<div class="example">
<pre class="example">: ndcs-words ( wid -- )
  [: dup name&gt;compile ['] compile, &lt;&gt; if over id. then 2drop true ;]
  swap traverse-wordlist ;

forth-wordlist ndcs-words
</pre></div>

<p>このコードは、 コンパイル・トークンの xt 部分が <code>compile,</code> の xt である場合、
ワードがデフォルトのコンパイル機能(compilation semantics)を持っていると仮定しています。
</p>

<span id="index-name-field-address"></span>
<span id="index-NFA"></span>
<p>いにしえの Forth システムの nt に最も近いのはネーム・フィールド・アドレス(NFA)ですが、 Gforth とは顕著な違いがあります。
いにしえの Forth システムでは、 各ワードに一意の NFAとLFAとCFAとPFA(または、LFAとNFAとCFAとPFAの順)があり、
あるワードから次のワードへと進むためのワードがありました。 これとは対照的に、 Gforth では、 いくつかの nt が
<code>name&gt;interpret</code> xt からは同一の xt を取得できます。
名前トークンによって識別される構造体にリンク・フィールドがありますが、 通常、 検索にはこれらの構造体の外部にあるハッシュ・テーブルが使用されます。
Gforth の名前はセル幅のカウントおよびフラグ・フィールド(cell-wide count-and-flags field)がありますが、 nt
はそのカウント・フィールドへのアドレスとしては実装されていません。
</p>

</div>
<hr>
<div class="header">
<p>
Next: <a href="Compilation-token.html">Compilation token</a>, Previous: <a href="Execution-token.html">Execution token</a>, Up: <a href="Tokens-for-Words.html">Tokens for Words</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
