<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Basic Objects Usage (Gforth マニュアル)</title>

<meta name="description" content="Basic Objects Usage (Gforth マニュアル)">
<meta name="keywords" content="Basic Objects Usage (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Objects.html" rel="up" title="Objects">
<link href="The-Objects-base-class.html" rel="next" title="The Objects base class">
<link href="Properties-of-the-Objects-model.html" rel="prev" title="Properties of the Objects model">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsubsection" id="Basic-Objects-Usage">
<div class="header">
<p>
Next: <a href="The-Objects-base-class.html" accesskey="n" rel="next">The <samp>object.fs</samp> base class</a>, Previous: <a href="Properties-of-the-Objects-model.html" accesskey="p" rel="prev">Properties of the <samp>objects.fs</samp> model</a>, Up: <a href="Objects.html" accesskey="u" rel="up">The <samp>objects.fs</samp> model</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Basic-objects_002efs-Usage"></span><h4 class="subsubsection">6.24.3.2 Basic <samp>objects.fs</samp> Usage</h4>
<span id="index-basic-objects-usage"></span>
<span id="index-objects_002c-basic-usage"></span>

<p>以下のようにして graphical オブジェクト(図形オブジェクト)のクラスを定義できます:
</p>
<span id="index-class-usage"></span>
<span id="index-end_002dclass-usage"></span>
<span id="index-selector-usage"></span>
<div class="example">
<pre class="example">object class \ クラス名 &quot;object&quot; は親クラスです
  selector draw ( x y graphical -- )
end-class graphical
</pre></div>

<p>このコードは、 <code>draw</code> 操作を持つクラス <code>graphical</code> を定義します。 任意の <code>graphical</code>
オブジェクトに対して <code>draw</code> 操作を実行できます。例:
</p>
<div class="example">
<pre class="example">100 100 t-rex draw
</pre></div>

<p>ここで、 <code>t-rex</code> は、 graphical オブジェクトを生成するワード(定数(constant)など)です。
</p>

<span id="index-abstract-class"></span>
<p>graphical オブジェクトを作成するにはどうすればよいでしょうか？ 現在の定義では、 有用な graphical オブジェクトを作成できません。
クラス <code>graphical</code> は graphical オブジェクト一般を記述しますが、 具体的な graphical
オブジェクト・タイプを記述しません(C++ ユーザーはこれを「抽象クラス」(abstract class)と呼びます)。 たとえば、 クラス
<code>graphical</code> にはセレクター <code>draw</code> のメソッドがありません。
</p>
<p>具体的な graphical オブジェクトのために、 クラス <code>graphical</code> の子クラスを定義します。 例:
</p>
<span id="index-overrides-usage"></span>
<span id="index-field-usage-in-class-definition"></span>
<div class="example">
<pre class="example">graphical class \ 親クラスは graphical
  cell% field circle-radius

:noname ( x y circle -- )
  circle-radius @ draw-circle ;
overrides draw

:noname ( n-radius circle -- )
  circle-radius ! ;
overrides construct

end-class circle
</pre></div>

<p>ここでは、 フィールド <code>circle-radius</code> を持つクラス <code>circle</code> を <code>graphical</code>
の子として定義しています(フィールド <code>circle-radius</code>
は構造体のフィールドと同じように動作します(see <a href="Structures.html">Structures</a>)。 セレクター <code>draw</code> と
<code>construct</code> 用の新しいメソッドを定義します(<code>construct</code> は <code>graphical</code> の親クラスの
<code>object</code> クラスで定義されています))。
</p>
<p>以下のようにして、 ヒープ上(つまり、 <code>allocate</code> されたメモリー)に circle を作成できます:
</p>
<span id="index-heap_002dnew-usage"></span>
<div class="example">
<pre class="example">50 circle heap-new constant my-circle
</pre></div>

<p><code>heap-new</code> は <code>construct</code> を呼び出し、 フィールド <code>circle-radius</code> を 50
で初期化します。 以下のようにして、 この新しい円を (100,100) の位置に描画(draw)できます:
</p>
<div class="example">
<pre class="example">100 100 my-circle draw
</pre></div>

<span id="index-selector-invocation_002c-restrictions"></span>
<span id="index-class-definition_002c-restrictions"></span>
<p>注意: セレクターを呼び出すことができるのは、 TOS 上のオブジェクト(受信オブジェクト) が、 セレクターが定義されたクラス、 またはその子孫の 1
つに属している場合のみです。 たとえば、 <code>draw</code> は、 <code>graphical</code> またはその子孫(例:
<code>circle</code>)に属するオブジェクトに対してのみ呼び出すことができます。  <code>end-class</code>
の直前の検索順序スタック(the search order)は、 <code>class</code> の直後と同じである必要があります。
</p>
</div>



</body>
</html>
