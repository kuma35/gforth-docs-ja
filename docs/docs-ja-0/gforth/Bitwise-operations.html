<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Bitwise operations (Gforth マニュアル)</title>

<meta name="description" content="Bitwise operations (Gforth マニュアル)">
<meta name="keywords" content="Bitwise operations (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Arithmetic.html" rel="up" title="Arithmetic">
<link href="Numeric-comparison.html" rel="next" title="Numeric comparison">
<link href="Two_002dstage-integer-division.html" rel="prev" title="Two-stage integer division">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="Bitwise-operations">
<div class="header">
<p>
Next: <a href="Numeric-comparison.html" accesskey="n" rel="next">Numeric comparison</a>, Previous: <a href="Two_002dstage-integer-division.html" accesskey="p" rel="prev">Two-stage integer division</a>, Up: <a href="Arithmetic.html" accesskey="u" rel="up">Arithmetic</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Bitwise-operations-1"></span><h4 class="subsection">6.5.6 Bitwise operations</h4>
<span id="index-bitwise-operation-words"></span>


<span id="index-and-_0028--w1-w2-_002d_002d-w--_0029-core"></span>
<span id="index-and"></span>
<span id="index-and-1"></span>
<div class="format">
<pre class="format"><code>and</code> ( <i>w1 w2 &ndash; w </i>) core &ldquo;and&rdquo;
</pre></div>

<span id="index-or-_0028--w1-w2-_002d_002d-w--_0029-core"></span>
<span id="index-or"></span>
<span id="index-or-1"></span>
<div class="format">
<pre class="format"><code>or</code> ( <i>w1 w2 &ndash; w </i>) core &ldquo;or&rdquo;
</pre></div>

<span id="index-xor-_0028--w1-w2-_002d_002d-w--_0029-core"></span>
<span id="index-xor"></span>
<span id="index-xor-1"></span>
<div class="format">
<pre class="format"><code>xor</code> ( <i>w1 w2 &ndash; w </i>) core &ldquo;x-or&rdquo;
</pre></div>

<span id="index-invert-_0028--w1-_002d_002d-w2--_0029-core"></span>
<span id="index-invert"></span>
<span id="index-invert-1"></span>
<div class="format">
<pre class="format"><code>invert</code> ( <i>w1 &ndash; w2 </i>) core &ldquo;invert&rdquo;
</pre></div>

<span id="index-mux-_0028--u1-u2-u3-_002d_002d-u--_0029-gforth_002d1_002e0"></span>
<span id="index-mux"></span>
<span id="index-mux-1"></span>
<div class="format">
<pre class="format"><code>mux</code> ( <i>u1 u2 u3 &ndash; u </i>) gforth-1.0 &ldquo;mux&rdquo;
</pre></div>
<p>Multiplex: For every bit in <i>u3</i>: for a 1 bit, select the corresponding
bit from <i>u1</i>, otherwise the corresponding bit from <i>u2</i>.  E.g.,
<code>%0011 %1100 %1010 mux</code> gives <code>%0110</code>
</p>
<span id="index-lshift-_0028--u1-u-_002d_002d-u2--_0029-core"></span>
<span id="index-lshift"></span>
<span id="index-lshift-1"></span>
<div class="format">
<pre class="format"><code>lshift</code> ( <i>u1 u &ndash; u2 </i>) core &ldquo;l-shift&rdquo;
</pre></div>
<p>Shift <i>u1</i> left by <i>u</i> bits.
</p>
<span id="index-rshift-_0028--u1-u-_002d_002d-u2--_0029-core"></span>
<span id="index-rshift"></span>
<span id="index-rshift-1"></span>
<div class="format">
<pre class="format"><code>rshift</code> ( <i>u1 u &ndash; u2 </i>) core &ldquo;r-shift&rdquo;
</pre></div>
<p>Shift <i>u1</i> (cell) right by <i>u</i> bits, filling the shifted-in bits with
zero (logical/unsigned shift).
</p>
<span id="index-arshift-_0028--n1-u-_002d_002d-n2--_0029-gforth_002d1_002e0"></span>
<span id="index-arshift"></span>
<span id="index-arshift-1"></span>
<div class="format">
<pre class="format"><code>arshift</code> ( <i>n1 u &ndash; n2 </i>) gforth-1.0 &ldquo;ar-shift&rdquo;
</pre></div>
<p>Shift <i>n1</i> (cell) right by <i>u</i> bits, filling the shifted-in bits from
the sign bit of <i>n1</i> (arithmetic shift).
</p>
<span id="index-dlshift-_0028--ud1-u-_002d_002d-ud2--_0029-gforth_002d1_002e0"></span>
<span id="index-dlshift"></span>
<span id="index-dlshift-1"></span>
<div class="format">
<pre class="format"><code>dlshift</code> ( <i>ud1 u &ndash; ud2 </i>) gforth-1.0 &ldquo;dlshift&rdquo;
</pre></div>
<p>Shift <i>ud1</i> (double-cell) left by <i>u</i> bits.
</p>
<span id="index-drshift-_0028--ud1-u-_002d_002d-ud2--_0029-gforth_002d1_002e0"></span>
<span id="index-drshift"></span>
<span id="index-drshift-1"></span>
<div class="format">
<pre class="format"><code>drshift</code> ( <i>ud1 u &ndash; ud2 </i>) gforth-1.0 &ldquo;drshift&rdquo;
</pre></div>
<p>Shift <i>ud1</i> (double-cell) right by <i>u</i> bits, filling the shifted-in bits
with zero (logical/unsigned shift).
</p>
<span id="index-darshift-_0028--d1-u-_002d_002d-d2--_0029-gforth_002d1_002e0"></span>
<span id="index-darshift"></span>
<span id="index-darshift-1"></span>
<div class="format">
<pre class="format"><code>darshift</code> ( <i>d1 u &ndash; d2 </i>) gforth-1.0 &ldquo;darshift&rdquo;
</pre></div>
<p>Shift <i>d1</i> (double-cell) right by <i>u</i> bits, filling the shifted-in bits
from the sign bit of <i>d1</i> (arithmetic shift).
</p>
<span id="index-2_002a-_0028--n1-_002d_002d-n2--_0029-core"></span>
<span id="index-2_002a"></span>
<span id="index-2_002a-1"></span>
<div class="format">
<pre class="format"><code>2*</code> ( <i>n1 &ndash; n2 </i>) core &ldquo;two-star&rdquo;
</pre></div>
<p>Shift left by 1; also works on unsigned numbers
</p>
<span id="index-2_002f-_0028--n1-_002d_002d-n2--_0029-core"></span>
<span id="index-2_002f"></span>
<span id="index-2_002f-1"></span>
<div class="format">
<pre class="format"><code>2/</code> ( <i>n1 &ndash; n2 </i>) core &ldquo;two-slash&rdquo;
</pre></div>
<p>Arithmetic shift right by 1.  For signed numbers this is a floored division
by 2 (note that <code>/</code> not necessarily floors).
</p>
<span id="index-d2_002a-_0028--d1-_002d_002d-d2--_0029-double"></span>
<span id="index-d2_002a"></span>
<span id="index-d2_002a-1"></span>
<div class="format">
<pre class="format"><code>d2*</code> ( <i>d1 &ndash; d2 </i>) double &ldquo;d-two-star&rdquo;
</pre></div>
<p>Shift double-cell left by 1; also works on unsigned numbers
</p>
<span id="index-d2_002f-_0028--d1-_002d_002d-d2--_0029-double"></span>
<span id="index-d2_002f"></span>
<span id="index-d2_002f-1"></span>
<div class="format">
<pre class="format"><code>d2/</code> ( <i>d1 &ndash; d2 </i>) double &ldquo;d-two-slash&rdquo;
</pre></div>
<p>Arithmetic shift right by 1.  For signed numbers this is a floored division
by 2.
</p>
<span id="index-_003epow2-_0028--u1-_002d_002d-u2--_0029-gforth_002d1_002e0"></span>
<span id="index-_003epow2"></span>
<span id="index-_003epow2-1"></span>
<div class="format">
<pre class="format"><code>&gt;pow2</code> ( <i>u1 &ndash; u2 </i>) gforth-1.0 &ldquo;to-pow2&rdquo;
</pre></div>
<p><i>u2</i> is the lowest power-of-2 number with <i>u2&gt;=u1</i>.
</p>
<span id="index-log2-_0028--u-_002d_002d-n--_0029-gforth_002d1_002e0"></span>
<span id="index-log2"></span>
<span id="index-log2-1"></span>
<div class="format">
<pre class="format"><code>log2</code> ( <i>u &ndash; n </i>) gforth-1.0 &ldquo;log2&rdquo;
</pre></div>
<p><i>N</i> is the rounded-down binary logarithm of <i>u</i>, i.e., the index of the
first set bit; if <i>u</i>=0, <i>n</i>=-1.
</p>
<span id="index-pow2_003f-_0028--u-_002d_002d-f--_0029-gforth_002d1_002e0"></span>
<span id="index-pow2_003f"></span>
<span id="index-pow2_003f-1"></span>
<div class="format">
<pre class="format"><code>pow2?</code> ( <i>u &ndash; f  </i>) gforth-1.0 &ldquo;pow-two-query&rdquo;
</pre></div>
<p><i>f</i> is true iff <i>u</i> is a power of two, i.e., there is exactly one bit
set in <i>u</i>.
</p>

<span id="index-ctz-_0028--x-_002d_002d-u--_0029-gforth_002d1_002e0"></span>
<span id="index-ctz"></span>
<span id="index-ctz-1"></span>
<div class="format">
<pre class="format"><code>ctz</code> ( <i>x &ndash; u  </i>) gforth-1.0 &ldquo;c-t-z&rdquo;
</pre></div>
<p>count trailing zeros in binary representation of x
</p>


<p>Unlike most other operations, rotation of narrower units cannot easily be
synthesized from rotation of wider units, so using cell-wide and double-wide
rotation operations means that the results depend on the cell width.  For
published algorithms or cell-width-independent results, you usually need to
use a fixed-width rotation operation.
</p>
<span id="index-wrol-_0028--u1-u-_002d_002d-u2--_0029-gforth_002d1_002e0"></span>
<span id="index-wrol"></span>
<span id="index-wrol-1"></span>
<div class="format">
<pre class="format"><code>wrol</code> ( <i>u1 u &ndash; u2 </i>) gforth-1.0 &ldquo;wrol&rdquo;
</pre></div>
<p>Rotate the least significant 16 bits of <i>u1</i> left by <i>u</i> bits, set the
other bits to 0.
</p>
<span id="index-wror-_0028--u1-u-_002d_002d-u2--_0029-gforth_002d1_002e0"></span>
<span id="index-wror"></span>
<span id="index-wror-1"></span>
<div class="format">
<pre class="format"><code>wror</code> ( <i>u1 u &ndash; u2 </i>) gforth-1.0 &ldquo;wror&rdquo;
</pre></div>
<p>Rotate the least significant 16 bits of <i>u1</i> right by <i>u</i> bits, set the
other bits to 0.
</p>
<span id="index-lrol-_0028--u1-u-_002d_002d-u2--_0029-gforth_002d1_002e0"></span>
<span id="index-lrol"></span>
<span id="index-lrol-1"></span>
<div class="format">
<pre class="format"><code>lrol</code> ( <i>u1 u &ndash; u2 </i>) gforth-1.0 &ldquo;lrol&rdquo;
</pre></div>
<p>Rotate the least significant 32 bits of <i>u1</i> left by <i>u</i> bits, set the
other bits to 0.
</p>
<span id="index-lror-_0028--u1-u-_002d_002d-u2--_0029-gforth_002d1_002e0"></span>
<span id="index-lror"></span>
<span id="index-lror-1"></span>
<div class="format">
<pre class="format"><code>lror</code> ( <i>u1 u &ndash; u2 </i>) gforth-1.0 &ldquo;lror&rdquo;
</pre></div>
<p>Rotate the least significant 32 bits of <i>u1</i> right by <i>u</i> bits, set the
other bits to 0.
</p>
<span id="index-rol-_0028--u1-u-_002d_002d-u2--_0029-gforth_002d1_002e0"></span>
<span id="index-rol"></span>
<span id="index-rol-1"></span>
<div class="format">
<pre class="format"><code>rol</code> ( <i>u1 u &ndash; u2 </i>) gforth-1.0 &ldquo;rol&rdquo;
</pre></div>
<p>Rotate all bits of <i>u1</i> left by <i>u</i> bits.
</p>
<span id="index-ror-_0028--u1-u-_002d_002d-u2--_0029-gforth_002d1_002e0"></span>
<span id="index-ror"></span>
<span id="index-ror-1"></span>
<div class="format">
<pre class="format"><code>ror</code> ( <i>u1 u &ndash; u2 </i>) gforth-1.0 &ldquo;ror&rdquo;
</pre></div>
<p>Rotate all bits of <i>u1</i> right by <i>u</i> bits.
</p>
<span id="index-drol-_0028--ud1-u-_002d_002d-ud2--_0029-gforth_002d1_002e0"></span>
<span id="index-drol"></span>
<span id="index-drol-1"></span>
<div class="format">
<pre class="format"><code>drol</code> ( <i>ud1 u &ndash; ud2 </i>) gforth-1.0 &ldquo;drol&rdquo;
</pre></div>
<p>Rotate all bits of <i>ud1</i> (double-cell) left by <i>u</i> bits.
</p>
<span id="index-dror-_0028--ud1-u-_002d_002d-ud2--_0029-gforth_002d1_002e0"></span>
<span id="index-dror"></span>
<span id="index-dror-1"></span>
<div class="format">
<pre class="format"><code>dror</code> ( <i>ud1 u &ndash; ud2 </i>) gforth-1.0 &ldquo;dror&rdquo;
</pre></div>
<p>Rotate all bits of <i>ud1</i> (double-cell) right by <i>u</i> bits.
</p>

</div>
<hr>
<div class="header">
<p>
Next: <a href="Numeric-comparison.html">Numeric comparison</a>, Previous: <a href="Two_002dstage-integer-division.html">Two-stage integer division</a>, Up: <a href="Arithmetic.html">Arithmetic</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
