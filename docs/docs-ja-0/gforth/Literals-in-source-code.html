<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright © 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Literals in source code (Gforth マニュアル)</title>

<meta name="description" content="Literals in source code (Gforth マニュアル)">
<meta name="keywords" content="Literals in source code (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html" rel="up" title="Top">
<link href="Words.html" rel="next" title="Words">
<link href="Introduction.html" rel="prev" title="Introduction">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
ul.mark-bullet {list-style-type: disc}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="chapter-level-extent" id="Literals-in-source-code">
<div class="nav-panel">
<p>
Next: <a href="Words.html" accesskey="n" rel="next">Forth Words</a>, Previous: <a href="Introduction.html" accesskey="p" rel="prev">An Introduction to Standard Forth</a>, Up: <a href="index.html" accesskey="u" rel="up">Gforth</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h2 class="chapter" id="Literals-in-source-code-1"><span>5 Literals in source code<a class="copiable-link" href="#Literals-in-source-code-1"> &para;</a></span></h2>
<a class="index-entry-id" id="index-Literals-_0028in-source-code_0029"></a>

<a class="index-entry-id" id="index-single_002dcell-numbers_002c-input-format"></a>
<a class="index-entry-id" id="index-input-format-for-single_002dcell-numbers"></a>
<p>整数値をデータ・スタックにプッシュするために、 あなたはソース・コードに数値を書きます。 たとえば <code class="code">123</code> です。 数字の連なりの前に
<code class="code">-</code> を付けると、 負の数値を示すことができます。 たとえば <code class="code">-123</code> です。
これはコロン定義の内部と外部の両方で機能します。  数値は <code class="code">base</code> (基数)
の値に従って通訳(interpret)されます(see <a class="pxref" href="Number-Conversion.html">Number Conversion</a>)。  「数字」は <code class="code">0</code> ～
<code class="code">9</code> 、<code class="code">a</code> (10進数の10) ～ <code class="code">z</code> (10進数の35) です。 ただし、
基数(base)より小さい「数字」のみが認識されます。  変換では大文字と小文字が区別されないため、<code class="code">A</code> と <code class="code">a</code>
は同じ「数字」になります。
</p>
<a class="index-entry-id" id="index-_0026_002dprefix-10Xin-Shu-Zhi-Yong-_0028Fei-Biao-Zhun-_0029"></a>
<a class="index-entry-id" id="index-_0023_002dprefix-10Jin-Shu-Zhi-Yong-"></a>
<a class="index-entry-id" id="index-_0025_002dprefix-2Jin-Shu-Zhi-Yong-"></a>
<a class="index-entry-id" id="index-_0024_002dprefix-16Jin-Shu-Zhi-Yong-"></a>
<a class="index-entry-id" id="index-0x_002dprefix-16Jin-Shu-Zhi-Yong-_0028Fei-Biao-Zhun-_0029"></a>
<p>以下のプレフィックスを使用すると、 数値の基数(base)を明示的に指定できます:
</p>
<ul class="itemize mark-bullet">
<li><code class="code">#</code> &ndash; 10進数(decimal)
</li><li><code class="code">%</code> &ndash; 2進数(binary)
</li><li><code class="code">$</code> &ndash; 16進数(hexadecimal)
</li><li><code class="code">&amp;</code> &ndash; 10進数(decimal)(非標準)
</li><li><code class="code">0x</code> &ndash; 16進数(hexadecimal), if base&lt;33 (非標準)
</li></ul>

<p>基数プレフィックスと符号を含む組み合わせの場合、 標準的な順序では基数プレフィックスを最初に配置します(例: <code class="code">#-123</code>)。 Gforth
は両方の順番をサポートします。
</p>
<a class="index-entry-id" id="index-double_002dcell-numbers_002c-input-format"></a>
<a class="index-entry-id" id="index-input-format-for-double_002dcell-numbers"></a>
<p>小数点 <code class="code">.</code> を数値の末尾(または非標準的に、 プレフィックスの前を除く他の場所)に置くと、 2倍長整数double-cell
integer)として扱われます(例: <code class="code">#-123.</code> または <code class="code">#-.123</code> (この2つは同一の数値です))。
別のプログラミング言語の経験があるユーザーは、 基数プレフィックスのない、 このような数値(例: <code class="code">-123.</code>) を見たり書いたりする場合、
その数値が浮動小数点値を表すものと期待する可能性があります。 混乱を早期に解決するために、 Gforth はそのような使用法について警告しています。
警告を回避するには、 常に基数プレフィックスを付けて 2倍長整数(double-cell integer)を記述することをお勧めします(例:
<code class="code">#-123.</code>)
</p>
<p>以下にいくつかの例を示します。 なお、 同値の 10 進数が括弧内に示されています:
</p>
<p><code class="code">$-41</code> (-65), <code class="code">%1001101</code> (205), <code class="code">%1001.0001</code> (145 ; 2倍長整数),
<code class="code">#905</code> (905), <code class="code">$abc</code> (2478), <code class="code">$ABC</code> (2478).
</p>
<a class="index-entry-id" id="index-_0027_002dprefix-for-characters_002fcode-points"></a>
<a class="index-entry-id" id="index-input-format-for-characters_002fcode-points"></a>
<p>(文字)コード・ポイントの数値を取得するには、 文字を <code class="code">'</code> で囲みます (例: <code class="code">'a'</code>)。  末尾の <code class="code">'</code>
は標準では必須ですが、Gforth では省略できます。  注意: これは非 ASCII 文字でも機能することに注意してください。  多くの用途では、
文字をセルとしてではなく文字列として持つ方が便利です。 文字列の構文については、 以下を参照してください。
</p>
<a class="index-entry-id" id="index-floating_002dpoint-numbers_002c-input-format"></a>
<a class="index-entry-id" id="index-input-format-for-floating_002dpoint-numbers"></a>
<p>Forth の浮動小数点数は、 その指数によって認識されます。  つまり、 <code class="code">1.</code> は 2倍長整数(double-cell
integer)で、 そして <code class="code">1e0</code> は浮動小数点数です。 後者は <code class="code">1e</code> に短縮できます(通常は短縮します)。
仮数部(<code class="code">e</code> や <code class="code">E</code> より前の部分)と指数の部分の両方に符号(<code class="code">+</code> を含む)を含めることができます。
仮数部には少なくとも 1 つの数字が含まれている必要があり、 小数点を含めることができます。 指数は空であってもかまいません。
浮動小数点数は仮数と指数の両方に常に 10 進数の基数を使用し、 基数が 10 進数の場合にのみ認識されます。  例: <code class="code">1e 1e0 1.e
1.e0 +1e+0</code> (これらは全て同一の数値です)、 <code class="code">+12.E-4</code>
</p>
<p>Gforth 拡張機能 (1.0 以降)では、 浮動小数点数をスケーリングされた表記で書くことができます。 オプションで符号、 その次に 1
つ以上の数字を指定し、その後ろに、 主に SI で定義されたスケーリング記号(別名 メトリック・プレフィックス)または <code class="code">%</code> のうちの 1
つを使用でき、 その後に、 オプションで更に多くの桁を指定できます。 Gforth が受け入れるスケーリング記号の完全なリストは以下のとおりです:
</p>
<ul class="itemize mark-bullet">
<li><code class="code">Q</code> <code class="code">e30</code> quetta(クエタ) 
</li><li><code class="code">R</code> <code class="code">e27</code> ronna(ロナ)  
</li><li><code class="code">Y</code> <code class="code">e24</code> yotta(ヨタ)  
</li><li><code class="code">Z</code> <code class="code">e21</code> zetta(ゼタ)  
</li><li><code class="code">X</code> <code class="code">e18</code> exa(エクサ)(<code class="code">E</code> じゃ無いので注意) 
</li><li><code class="code">P</code> <code class="code">e15</code> peta(ペタ)   
</li><li><code class="code">T</code> <code class="code">e12</code> tera(テラ)   
</li><li><code class="code">G</code> <code class="code">e9</code> giga(ギガ)   
</li><li><code class="code">M</code> <code class="code">e6</code> mega(メガ)   
</li><li><code class="code">k</code> <code class="code">e3</code> kilo(キロ)   
</li><li><code class="code">h</code> <code class="code">e2</code> hecto(ヘクト)  
</li><li><code class="code">d</code> <code class="code">e-1</code> deci(デシ)   
</li><li><code class="code">%</code> <code class="code">e-2</code> percent(パーセント)(<code class="code">c</code> じゃ無いので注意)(訳注: 一般の centi(センチ)
と違うので注意)
</li><li><code class="code">m</code> <code class="code">e-3</code> milli(ミリ)  
</li><li><code class="code">u</code> <code class="code">e-6</code> micro(マイクロ)(<code class="code">μ</code> じゃ無いので注意)
</li><li><code class="code">n</code> <code class="code">e-9</code> nano(ナノ)   
</li><li><code class="code">p</code> <code class="code">e-12</code> pico(ピコ)   
</li><li><code class="code">f</code> <code class="code">e-15</code> femto(フェムト)  
</li><li><code class="code">a</code> <code class="code">e-18</code> atto(アト)   
</li><li><code class="code">z</code> <code class="code">e-21</code> zepto(ゼプト)  
</li><li><code class="code">y</code> <code class="code">e-24</code> yocto(ヨクト)  
</li><li><code class="code">r</code> <code class="code">e-27</code> ronto(ロント)  
</li><li><code class="code">q</code> <code class="code">e-30</code> quecto(クエント) 
</li></ul>

<p>Gforth の残りのほとんどとは異なり、 スケーリング・シンボルは大文字と小文字が区別されて扱われます。 スケール表記を使用するということは、
スケール記号の代わりに小数点を使用し、 末尾に指数表記を追加することと同じです。  スケール表記の例: <code class="code">6k5</code> (6500e),
<code class="code">23%</code> (0.23e)
</p>
<a class="index-entry-id" id="index-String-input-format"></a>
<a class="index-entry-id" id="index-input-format-for-strings"></a>
<p>文字列を <code class="code">&quot;</code> で囲んで入力できます(例: <code class="code">&quot;abc&quot;</code>、<code class="code">&quot;a b&quot;</code>)。 その結果は、データスタック上の、
文字列の開始アドレスと、 バイト(=char)のカウントです。
</p>
<p>文字列内の <code class="code">&quot;</code> は <code class="code">\</code> でエスケープする必要があります(例: <code class="code">&quot;double-quote-&gt;\&quot;&lt;-&quot;</code>)。
さらに、 この文字列構文は、 <code class="code">s\&quot;</code> でサポートされている制御文字を記述するすべての方法をサポートしています(see <a class="pxref" href="String-and-character-literals.html">String and Character literals</a>)。 この文字列構文の欠点は、 標準ではないことです。 標準プログラムの場合は、 <code class="code">&quot;…&quot;</code>
の代わりに <code class="code">s\&quot;</code> を使用してください。
</p>
<a class="index-entry-id" id="index-environment-variable-input-format"></a>
<a class="index-entry-id" id="index-input-format-for-environment-variables"></a>
<p>環境変数を取得するには、 最初に <samp class="file">rec-env.fs</samp> をロードし、 次に環境変数の前に <code class="code">$</code> を付けます (例:
<code class="code">$HOME</code>)。 結果は、 上で説明した形式のデータ・スタック上の文字列記述子(string descriptor)になります。  これは
<code class="code">&quot;HOME&quot; getenv</code> と同等です。つまり、 環境変数は実行時(run-time)に解決されます。
</p>
<a class="index-entry-id" id="index-xt-input-format"></a>
<a class="index-entry-id" id="index-execution-token-input-format"></a>
<a class="index-entry-id" id="index-input-format-for-execution-tokens"></a>
<a class="index-entry-id" id="index-_0060-prefix-of-word"></a>
<p>ワード名の前に <code class="code">`</code> を付けることで、 ワードの実行トークン (xt) を取得できます (例: <code class="code">`dup</code>)。
<code class="code">'</code> または <code class="code">[']</code> を使うよりも有利な点は、 コロン定義の内側から外側へ、
またはその逆にコードをコピーして貼り付けるときに、 これらを切り替える必要がないことです。  欠点は、 この構文が標準ではないことです。
</p>
<a class="index-entry-id" id="index-nt-input-format"></a>
<a class="index-entry-id" id="index-nt-token-input-format"></a>
<a class="index-entry-id" id="index-input-format-for-name-tokens"></a>
<a class="index-entry-id" id="index-_0060_0060-prefix-of-word"></a>
<p>ワード名の前に <code class="code">``</code> を付けることで、 ワードのの名前トークン (nt) を取得できます (例: <code class="code">``dup</code>)。
この構文も非標準です。
</p>
<a class="index-entry-id" id="index-body_002drelative-address-input-format"></a>
<a class="index-entry-id" id="index-input-format-for-body_002drelative-addresses"></a>
<p>ワードの本体アドレスを <code class="code">&lt;</code> と <code class="code">&gt;</code> で囲むことで取得できます (例: <code class="code">&lt;spaces&gt;</code>)。 ワード名と末尾の
<code class="code">&gt;</code> の間に <code class="code">+</code> と数値を入れることで、
その本体アドレスから正のオフセットのアドレス(通常はそのワードの本体内のアドレス)を取得することもできます(例:
<code class="code">&lt;spaces+$15&gt;</code>, <code class="code">spaces+-3</code>)。  例えば <code class="code">&lt;spaces+$15&gt;</code> とか
<code class="code">&lt;spaces+-3&gt;</code>) とすると、 その本体アドレスに数値を足したのを得るでしょう。 この非標準機能は、 <code class="code">...</code>
の出力をコピーして貼り付けることを可能にするために存在します(see <a class="pxref" href="Examining-data.html">Examining data and code</a>)。
</p>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Words.html">Forth Words</a>, Previous: <a href="Introduction.html">An Introduction to Standard Forth</a>, Up: <a href="index.html">Gforth</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
