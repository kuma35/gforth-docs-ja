<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Floating-point output (Gforth マニュアル)</title>

<meta name="description" content="Floating-point output (Gforth マニュアル)">
<meta name="keywords" content="Floating-point output (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Other-I_002fO.html" rel="up" title="Other I/O">
<link href="Miscellaneous-output.html" rel="next" title="Miscellaneous output">
<link href="Formatted-numeric-output.html" rel="prev" title="Formatted numeric output">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="Floating_002dpoint-output">
<div class="header">
<p>
Next: <a href="Miscellaneous-output.html" accesskey="n" rel="next">Miscellaneous output</a>, Previous: <a href="Formatted-numeric-output.html" accesskey="p" rel="prev">Formatted numeric output</a>, Up: <a href="Other-I_002fO.html" accesskey="u" rel="up">Other I/O</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Floating_002dpoint-output-1"></span><h4 class="subsection">6.20.3 Floating-point output</h4>
<span id="index-numeric-output_002c-FP"></span>
<span id="index-FP-output"></span>
<span id="index-floating_002dpoint-output"></span>

<p>Floating-point output is always displayed using base 10.
</p>
<span id="index-f_002e-_0028--r-_002d_002d--_0029-floating_002dext"></span>
<span id="index-f_002e"></span>
<span id="index-f_002e-1"></span>
<div class="format">
<pre class="format"><code>f.</code> ( <i>r &ndash;  </i>) floating-ext &ldquo;f-dot&rdquo;
</pre></div>
<p>Display (the floating-point number) <i>r</i> without exponent, followed by a
space.
</p>

<span id="index-fe_002e-_0028--r-_002d_002d--_0029-floating_002dext"></span>
<span id="index-fe_002e"></span>
<span id="index-fe_002e-1"></span>
<div class="format">
<pre class="format"><code>fe.</code> ( <i>r &ndash;  </i>) floating-ext &ldquo;f-e-dot&rdquo;
</pre></div>
<p>Display <i>r</i> using engineering notation (with exponent dividable by 3),
followed by a space.
</p>

<span id="index-fs_002e-_0028--r-_002d_002d--_0029-floating_002dext"></span>
<span id="index-fs_002e"></span>
<span id="index-fs_002e-1"></span>
<div class="format">
<pre class="format"><code>fs.</code> ( <i>r &ndash;  </i>) floating-ext &ldquo;f-s-dot&rdquo;
</pre></div>
<p>Display <i>r</i> using scientific notation (with exponent), followed by a
space.
</p>

<span id="index-fp_002e-_0028--r-_002d_002d--_0029-floating_002dext"></span>
<span id="index-fp_002e"></span>
<span id="index-fp_002e-1"></span>
<div class="format">
<pre class="format"><code>fp.</code> ( <i>r &ndash;  </i>) floating-ext &ldquo;f-e-dot&rdquo;
</pre></div>
<p>Display <i>r</i> using SI prefix notation (with exponent dividable by 3,
converted into SI prefixes if available), followed by a space.
</p>


<p>Examples of printing the number 1234.5678E23 in the different floating-point
output formats are shown below.
</p>
<div class="example">
<pre class="example">f. 123456780000000000000000000.
fe. 123.456780000000E24
fs. 1.23456780000000E26
fp. 123.456780000000Y
</pre></div>

<p>The length of the output is influenced by:
</p>
<span id="index-precision-_0028--_002d_002d-u--_0029-floating_002dext"></span>
<span id="index-precision"></span>
<span id="index-precision-1"></span>
<div class="format">
<pre class="format"><code>precision</code> ( <i>&ndash; u  </i>) floating-ext &ldquo;precision&rdquo;
</pre></div>
<p><i>u</i> is the number of significant digits currently used by <code>F.</code>
<code>FE.</code> and <code>FS.</code> 
</p>

<span id="index-set_002dprecision-_0028--u-_002d_002d--_0029-floating_002dext"></span>
<span id="index-set_002dprecision"></span>
<span id="index-set_002dprecision-1"></span>
<div class="format">
<pre class="format"><code>set-precision</code> ( <i>u &ndash;  </i>) floating-ext &ldquo;set-precision&rdquo;
</pre></div>
<p>Set the number of significant digits currently used by <code>F.</code> <code>FE.</code>
and <code>FS.</code> to <i>u</i>.
</p>


<p>You can control the output in more detail with:
</p>
<span id="index-f_002erdp-_0028--rf-_002bnr-_002bnd-_002bnp-_002d_002d--_0029-gforth_002d0_002e6"></span>
<span id="index-f_002erdp"></span>
<span id="index-f_002erdp-1"></span>
<div class="format">
<pre class="format"><code>f.rdp</code> ( <i>rf +nr +nd +np &ndash;  </i>) gforth-0.6 &ldquo;f.rdp&rdquo;
</pre></div>
<p>Print float <i>rf</i> formatted.  The total width of the output is <i>nr</i>.  For
fixed-point notation, the number of digits after the decimal point is
<i>+nd</i> and the minimum number of significant digits is <i>np</i>.
<code>Set-precision</code> has no effect on <code>f.rdp</code>.  Fixed-point notation is
used if the number of siginicant digits would be at least <i>np</i> and if the
number of digits before the decimal point would fit.  If fixed-point
notation is not used, exponential notation is used, and if that does not
fit, asterisks are printed.  We recommend using <i>nr</i>&gt;=7 to avoid the risk
of numbers not fitting at all.  We recommend <i>nr</i>&gt;=<i>np</i>+5 to avoid cases
where <code>f.rdp</code> switches to exponential notation because fixed-point
notation would have too few significant digits, yet exponential notation
offers fewer significant digits.  We recommend <i>nr</i>&gt;=<i>nd</i>+2, if you want
to have fixed-point notation for some numbers; the smaller the value of
<i>np</i>, the more cases are shown in fixed-point notation (cases where few or
no significant digits remain in fixed-point notation).  We recommend
<i>np</i>&gt;<i>nr</i>, if you want to have exponential notation for all numbers.
</p>


<p>To give you a better intuition of how they influence the output, here are
some examples of parameter combinations; in each line the same number is
printed, in each column the same parameter combination is used for printing:
</p>
<div class="example">
<pre class="example">    12 13 0    7 3 4   7 3 0   7 3 1   7 5 1   7 7 1   7 0 2  4 2 1
|-1.234568E-6|-1.2E-6| -0.000|-1.2E-6|-1.2E-6|-1.2E-6|-1.2E-6|****|
|-1.234568E-5|-1.2E-5| -0.000|-1.2E-5|-.00001|-1.2E-5|-1.2E-5|****|
|-1.234568E-4|-1.2E-4| -0.000|-1.2E-4|-.00012|-1.2E-4|-1.2E-4|****|
|-1.234568E-3|-1.2E-3| -0.001| -0.001|-.00123|-1.2E-3|-1.2E-3|****|
|-1.234568E-2|-1.2E-2| -0.012| -0.012|-.01235|-1.2E-2|-1.2E-2|-.01|
|-1.234568E-1|-1.2E-1| -0.123| -0.123|-.12346|-1.2E-1|-1.2E-1|-.12|
|-1.2345679E0| -1.235| -1.235| -1.235|-1.23E0|-1.23E0|-1.23E0|-1E0|
|-1.2345679E1|-12.346|-12.346|-12.346|-1.23E1|-1.23E1|   -12.|-1E1|
|-1.2345679E2|-1.23E2|-1.23E2|-1.23E2|-1.23E2|-1.23E2|  -123.|-1E2|
|-1.2345679E3|-1.23E3|-1.23E3|-1.23E3|-1.23E3|-1.23E3| -1235.|-1E3|
|-1.2345679E4|-1.23E4|-1.23E4|-1.23E4|-1.23E4|-1.23E4|-12346.|-1E4|
|-1.2345679E5|-1.23E5|-1.23E5|-1.23E5|-1.23E5|-1.23E5|-1.23E5|-1E5|
</pre></div>

<p>You can generate a string instead of displaying the number with:
</p>
<span id="index-f_003estr_002drdp-_0028--rf-_002bnr-_002bnd-_002bnp-_002d_002d-c_002daddr-nr--_0029-gforth_002d0_002e6"></span>
<span id="index-f_003estr_002drdp"></span>
<span id="index-f_003estr_002drdp-1"></span>
<div class="format">
<pre class="format"><code>f&gt;str-rdp</code> ( <i>rf +nr +nd +np &ndash; c-addr nr  </i>) gforth-0.6 &ldquo;f&gt;str-rdp&rdquo;
</pre></div>
<p>Convert <i>rf</i> into a string at <i>c-addr nr</i>.  The conversion rules and the
meanings of <i>nr +nd np</i> are the same as for <code>f.rdp</code>.  The result in
in the pictured numeric output buffer and will be destroyed by anything
destroying that buffer.
</p>

<span id="index-f_003ebuf_002drdp-_0028--rf-c_002daddr-_002bnr-_002bnd-_002bnp-_002d_002d--_0029-gforth_002d0_002e6"></span>
<span id="index-f_003ebuf_002drdp"></span>
<span id="index-f_003ebuf_002drdp-1"></span>
<div class="format">
<pre class="format"><code>f&gt;buf-rdp</code> ( <i>rf c-addr +nr +nd +np &ndash;  </i>) gforth-0.6 &ldquo;f&gt;buf-rdp&rdquo;
</pre></div>
<p>Convert <i>rf</i> into a string at <i>c-addr nr</i>.  The conversion rules and the
meanings of <i>nr nd np</i> are the same as for <code>f.rdp</code>.
</p>


<p>There is also a primitive used for implementing higher-level FP-to-string
words:
</p>
<span id="index-represent-_0028--r-c_002daddr-u-_002d_002d-n-f1-f2--_0029-floating"></span>
<span id="index-represent"></span>
<span id="index-represent-1"></span>
<div class="format">
<pre class="format"><code>represent</code> ( <i>r c-addr u &ndash; n f1 f2 </i>) floating &ldquo;represent&rdquo;
</pre></div>
<p>Convert the decimal significand (aka mantissa) of <i>r</i> into a string in
buffer <i>c-addr u</i>; <i>n</i> is the exponent, <i>f1</i> is true if <i>r</i> is
negative, and <i>f2</i> is true if <i>r</i> is valid (a finite number in Gforth).
</p>

</div>
<hr>
<div class="header">
<p>
Next: <a href="Miscellaneous-output.html">Miscellaneous output</a>, Previous: <a href="Formatted-numeric-output.html">Formatted numeric output</a>, Up: <a href="Other-I_002fO.html">Other I/O</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
