<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Method conveniences (Gforth マニュアル)</title>

<meta name="description" content="Method conveniences (Gforth マニュアル)">
<meta name="keywords" content="Method conveniences (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Objects.html" rel="up" title="Objects">
<link href="Classes-and-Scoping.html" rel="next" title="Classes and Scoping">
<link href="Class-Binding.html" rel="prev" title="Class Binding">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsubsection" id="Method-conveniences">
<div class="header">
<p>
Next: <a href="Classes-and-Scoping.html" accesskey="n" rel="next">Classes and Scoping</a>, Previous: <a href="Class-Binding.html" accesskey="p" rel="prev">Class Binding</a>, Up: <a href="Objects.html" accesskey="u" rel="up">The <samp>objects.fs</samp> model</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Method-conveniences-1"></span><h4 class="subsubsection">6.24.3.7 Method conveniences</h4>
<span id="index-method-conveniences"></span>

<p>【メソッドをより便利に】通常、 メソッドでは受信オブジェクト(receiving object)に頻繁にアクセスします。
メソッドをプレーンなコロン定義(<code>:noname</code> など)として定義する場合、 多くのスタック体操が必要になる場合があります。
これを回避するには、 <code>m: ... ;m</code> を使用してメソッドを定義します。たとえば、 以下を使用して <code>circle</code> を
<code>draw</code> するメソッドを定義できます
</p>
<span id="index-this-usage"></span>
<span id="index-m_003a-usage"></span>
<span id="index-_003bm-usage"></span>
<div class="example">
<pre class="example">m: ( x y circle -- )
  ( x y ) this circle-radius @ draw-circle ;m
</pre></div>

<span id="index-exit-in-m_003a-_002e_002e_002e-_003bm"></span>
<span id="index-exitm-discussion"></span>
<span id="index-catch-in-m_003a-_002e_002e_002e-_003bm"></span>
<p>このメソッドが実行されると、 受信オブジェクト(receiver object)がスタックから削除されます。 あなたは <code>this</code>
を使用してアクセスできます(ええ、 確かに、この例では <code>m: ... ;m</code> を使用する利点はないですけども)。 <code>m:</code> と
<code>;m</code> の間のコードだけでなく、 メソッド全体(つまり、
受信オブジェクトを含むメソッド全体)のスタック効果を指定していることに注意してください。 <code>m:...;m</code> では <code>exit</code>
を使用できません。 代わりに、<code>exitm</code> を使用してください。<a id="DOCF32" href="#FOOT32"><sup>32</sup></a>
</p>
<span id="index-inst_002dvar-usage"></span>
<p>あなたは <code>this &quot;field&quot;</code> という形式のシーケンスを頻繁に使用するハメになります(上記例では: <code>this
circle-radius</code>)。 なので、 この方法でのみフィールドを使用する場合は、 <code>inst-var</code> を使用してフィールドを定義し、
フィールド名の前の <code>this</code> を削れます。 たとえば、 上記例の <code>circle</code> クラスは以下のように定義することもできます:
</p>
<div class="example">
<pre class="example">graphical class
  cell% inst-var radius

m: ( x y circle -- )
  radius @ draw-circle ;m
overrides draw

m: ( n-radius circle -- )
  radius ! ;m
overrides construct

end-class circle
</pre></div>

<p><code>radius</code> は、 <code>circle</code> や、 その子孫クラスと、 それらの <code>m:...;m</code> 内でのみ使用できます。
</p>
<span id="index-inst_002dvalue-usage"></span>
<p><code>inst-value</code> を使用してフィールドを定義することもできます。 これは、 <code>variable</code> に対して
<code>value</code> があるのと同様に、 <code>inst-var</code> に対して <code>inst-value</code> があるのです。
このようなフィールドの値は <code>[to-inst]</code> を使用して変更できます。  たとえば、 クラス <code>circle</code>
を以下のように定義することもできます:
</p>
<div class="example">
<pre class="example">graphical class
  inst-value radius

m: ( x y circle -- )
  radius draw-circle ;m
overrides draw

m: ( n-radius circle -- )
  [to-inst] radius ;m
overrides construct

end-class circle
</pre></div>




</div>
<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5><a id="FOOT32" href="#DOCF32">(32)</a></h5>
<p>さらに、 <code>catch</code> を呼び出すワードや、
<code>objects.fs</code> をロードする前に定義されているワードについては、 <code>catch</code> を再定義したように、
これらも再定義する必要があります: <code>: catch this &gt;r catch r&gt; to-this ;</code></p>
</div>



</body>
</html>
