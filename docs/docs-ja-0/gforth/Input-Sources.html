<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Input Sources (Gforth マニュアル)</title>

<meta name="description" content="Input Sources (Gforth マニュアル)">
<meta name="keywords" content="Input Sources (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="The-Text-Interpreter.html" rel="up" title="The Text Interpreter">
<link href="Number-Conversion.html" rel="next" title="Number Conversion">
<link href="The-Text-Interpreter.html" rel="prev" title="The Text Interpreter">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="Input-Sources">
<div class="header">
<p>
Next: <a href="Number-Conversion.html" accesskey="n" rel="next">Number Conversion</a>, Previous: <a href="The-Text-Interpreter.html" accesskey="p" rel="prev">The Text Interpreter</a>, Up: <a href="The-Text-Interpreter.html" accesskey="u" rel="up">The Text Interpreter</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Input-Sources-1"></span><h4 class="subsection">6.14.1 Input Sources</h4>
<span id="index-input-sources"></span>
<span id="index-text-interpreter-_002d-input-sources-1"></span>

<p>デフォルトでは、 テキスト・インタプリタは、 Forth の起動時にユーザー入力デバイス(キーボード)からの入力を処理します。
テキスト・インタプリタは、 以下のいずれかの入力ソースからの入力を処理できます:
</p>
<ul>
<li> ユーザー入力デバイス &ndash; つまり、キーボード。
</li><li> ファイル。 <a href="Forth-source-files.html">Forth source files</a> で説明されているワードを使用。
</li><li> ブロック。 <a href="Blocks.html">Blocks</a> で説明されているワードを使用。
</li><li> テキスト文字列。 <code>evaluate</code> 使用。
</li></ul>

<p>プログラムは、 <code>source-id</code> と <code>blk</code> の値から現在の入力デバイスを識別できます。
</p>

<span id="index-source_002did-_0028--_002d_002d-0-_007c-_002d1-_007c-fileid--_0029-core_002dext_002cfile"></span>
<span id="index-source_002did"></span>
<span id="index-source_002did-1"></span>
<div class="format">
<pre class="format"><code>source-id</code> ( <i>&ndash; 0 | -1 | fileid  </i>) core-ext,file &ldquo;source-i-d&rdquo;
</pre></div>
<p>戻り値: 0 (入力ソースはユーザー入力デバイス)または、 -1 (入力ソースは <code>evaluate</code> によって処理されている文字列)または、
<i>fileid</i> (入力ソースは <i>fileid</i> で指定されたファイル)です。
</p>

<span id="index-blk-_0028--_002d_002d-addr--_0029-block"></span>
<span id="index-blk"></span>
<span id="index-blk-1"></span>
<div class="format">
<pre class="format"><code>blk</code> ( <i>&ndash; addr  </i>) block &ldquo;b-l-k&rdquo;
</pre></div>
<p><code>uvar</code> 変数 &ndash; このセルには現在のブロック番号(現在の入力ソースがブロックでない場合は 0)が格納されています。
</p>


<span id="index-save_002dinput-_0028--_002d_002d-x1-_002e_002e-xn-n--_0029-core_002dext"></span>
<span id="index-save_002dinput"></span>
<span id="index-save_002dinput-1"></span>
<div class="format">
<pre class="format"><code>save-input</code> ( <i>&ndash; x1 .. xn n  </i>) core-ext &ldquo;save-input&rdquo;
</pre></div>
<p><i>n</i> 個のエントリ <i>xn 〜 x1</i> は、 <code>restore-input</code> で使用できるプラットフォーム依存の方法で、
入力ソース仕様(input source specification)の現在の状態を記述します。
</p>

<span id="index-restore_002dinput-_0028--x1-_002e_002e-xn-n-_002d_002d-flag--_0029-core_002dext"></span>
<span id="index-restore_002dinput"></span>
<span id="index-restore_002dinput-1"></span>
<div class="format">
<pre class="format"><code>restore-input</code> ( <i>x1 .. xn n &ndash; flag  </i>) core-ext &ldquo;restore-input&rdquo;
</pre></div>
<p>入力ソース仕様(input source specification)を <i>n</i> 個のエントリ <i>xn 〜 x1</i>
で記述された状態に復元しようとします。 復元が失敗した場合は <i>flag</i> が true になります。 新しい入力プログラムを使用した Gforth
では、 再度 throw するために使用できるフラグがある場合にのみ失敗します。 異なるアクティブな入力ストリーム間で保存および復元することも可能です。
注意: 入力ストリームを閉じる場合は、 開いたときとは逆の順序で行う必要がありますが、 その間はすべて許可されます。
</p>


<span id="index-evaluate-_0028--_002e_002e_002e-addr-u-_002d_002d-_002e_002e_002e--_0029-core_002cblock"></span>
<span id="index-evaluate"></span>
<span id="index-evaluate-1"></span>
<div class="format">
<pre class="format"><code>evaluate</code> ( <i>... addr u &ndash; ...  </i>) core,block &ldquo;evaluate&rdquo;
</pre></div>
<p>現在の入力ソース仕様(input source specification)を保存します。 そして、 <code>-1</code> を
<code>source-id</code> に保存し、 かつ、 <code>0</code> を <code>blk</code> に保存します。 それから、 <code>&gt;IN</code> を
<code>0</code> に設定し、 文字列 <i>c-addr u</i> を入力ソースおよび入力バッファーにし、 通訳(interpret)します。
そしてパース領域が空になったら、 入力ソース仕様を復元します。
</p>

<span id="index-query-_0028--_002d_002d--_0029-core_002dext_002dobsolescent"></span>
<span id="index-query"></span>
<span id="index-query-1"></span>
<div class="format">
<pre class="format"><code>query</code> ( <i>&ndash;  </i>) core-ext-obsolescent &ldquo;query&rdquo;
</pre></div>
<p>ユーザー入力デバイスを入力ソースにします。 入力を端末入力バッファー(Terminal Input Buffer)で受け取ります。 <code>&gt;IN</code>
をゼロに設定します。 時代遅れ(OBSOLESCENT): <code>accept</code> で置き換えられました。
</p>




</div>



</body>
</html>
