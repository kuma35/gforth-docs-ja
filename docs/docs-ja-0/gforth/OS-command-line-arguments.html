<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>OS command line arguments (Gforth マニュアル)</title>

<meta name="description" content="OS command line arguments (Gforth マニュアル)">
<meta name="keywords" content="OS command line arguments (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Words.html" rel="up" title="Words">
<link href="Locals.html" rel="next" title="Locals">
<link href="Other-I_002fO.html" rel="prev" title="Other I/O">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="section" id="OS-command-line-arguments">
<div class="header">
<p>
Next: <a href="Locals.html" accesskey="n" rel="next">Locals</a>, Previous: <a href="Other-I_002fO.html" accesskey="p" rel="prev">Other I/O</a>, Up: <a href="Words.html" accesskey="u" rel="up">Forth Words</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="OS-command-line-arguments-1"></span><h3 class="section">6.21 OS command line arguments</h3>
<span id="index-OS-command-line-arguments"></span>
<span id="index-command-line-arguments_002c-OS"></span>
<span id="index-arguments_002c-OS-command-line"></span>

<p>コマンドラインで Gforth プログラムに引数を渡す通常の方法は、 <samp>-e</samp> オプションを使用することです。 たとえば、
</p>
<div class="example">
<pre class="example">gforth -e &quot;123 456&quot; foo.fs -e bye
</pre></div>

<p>ただし、 コマンドライン引数を直接パースしたい場合もあります。  その場合、 <code>next-arg</code>
を通じて(イメージ固有の)コマンドライン引数にアクセスできます:
</p>
<span id="index-next_002darg-_0028--_002d_002d-addr-u--_0029-gforth_002d0_002e7"></span>
<span id="index-next_002darg"></span>
<span id="index-next_002darg-1"></span>
<div class="format">
<pre class="format"><code>next-arg</code> ( <i>&ndash; addr u  </i>) gforth-0.7 &ldquo;next-arg&rdquo;
</pre></div>
<p>OS コマンドラインから次の引数を取得し、 それを消費し <i>addr u</i> に返します。 引数が残っていない場合は、 <code>0 0</code>
を返します。
</p>


<p><code>next-arg</code> のプログラム例 <samp>echo.fs</samp> を以下に示します:
</p>
<div class="example">
<pre class="example">: echo ( -- )
    begin
	next-arg 2dup 0 0 d&lt;&gt; while
	    type space
    repeat
    2drop ;

echo cr bye
</pre></div>

<p>これは以下のようにして起動します
</p>
<div class="example">
<pre class="example">gforth echo.fs hello world
</pre></div>

<p>そうすると以下のように出力されます
</p>
<div class="example">
<pre class="example">hello world
</pre></div>

<p>以下は、 OS コマンドラインを処理する下位レベルのワード群です:
</p>
<span id="index-arg-_0028--u-_002d_002d-addr-count--_0029-gforth_002d0_002e2"></span>
<span id="index-arg"></span>
<span id="index-arg-1"></span>
<div class="format">
<pre class="format"><code>arg</code> ( <i>u &ndash; addr count  </i>) gforth-0.2 &ldquo;arg&rdquo;
</pre></div>
<p><i>u</i> 番目のコマンドライン引数の文字列を返します。 <i>u</i> が最後の引数を超えている場合は <code>0 0</code> を返します。
<code>0 arg</code> は、 Gforth を起動したプログラム名です。  次の未処理の引数は常に <code>1 arg</code> で、 その後の引数は
<code>2 arg</code> などです。 システムによってすでに処理された引数はすべて削除されます。  引数を処理した後、
<code>shift-args</code> を使用して引数を削除できます。
</p>

<span id="index-shift_002dargs-_0028--_002d_002d--_0029-gforth_002d0_002e7"></span>
<span id="index-shift_002dargs"></span>
<span id="index-shift_002dargs-1"></span>
<div class="format">
<pre class="format"><code>shift-args</code> ( <i>&ndash;  </i>) gforth-0.7 &ldquo;shift-args&rdquo;
</pre></div>
<p><code>1 arg</code> が削除され、 後続のすべての OS コマンドライン・パラメータが 1 だけ左にシフトされ、<code>argc @</code>
が減ります。  このワードは <code>argv @</code> を変更できます。
</p>


<p>最後に、 Gforth は最下位レベルで以下のワード群を提供します:
</p>
<span id="index-argc-_0028--_002d_002d-addr--_0029-gforth_002d0_002e2"></span>
<span id="index-argc"></span>
<span id="index-argc-1"></span>
<div class="format">
<pre class="format"><code>argc</code> ( <i>&ndash; addr  </i>) gforth-0.2 &ldquo;argc&rdquo;
</pre></div>
<p>変数(<code>Variable</code>) &ndash; コマンドライン引数の数(コマンド名を含む)。  <code>next-arg</code> と
<code>shift-args</code> によって変更されます。
</p>

<span id="index-argv-_0028--_002d_002d-addr--_0029-gforth_002d0_002e2"></span>
<span id="index-argv"></span>
<span id="index-argv-1"></span>
<div class="format">
<pre class="format"><code>argv</code> ( <i>&ndash; addr  </i>) gforth-0.2 &ldquo;argv&rdquo;
</pre></div>
<p>変数(<code>Variable</code>) &ndash; コマンドライン引数 (コマンド名を含む) へのポインターのベクトル(vector)へのポインター。
各引数は、 C言語スタイルのゼロで終わる文字列として表されます。  <code>next-arg</code> と <code>shift-args</code>
によって変更されます。
</p>


</div>



</body>
</html>
