<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Selection (Gforth マニュアル)</title>

<meta name="description" content="Selection (Gforth マニュアル)">
<meta name="keywords" content="Selection (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Control-Structures.html" rel="up" title="Control Structures">
<link href="Simple-Loops.html" rel="next" title="Simple Loops">
<link href="Control-Structures.html" rel="prev" title="Control Structures">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="Selection">
<div class="header">
<p>
Next: <a href="Simple-Loops.html" accesskey="n" rel="next">Simple Loops</a>, Previous: <a href="Control-Structures.html" accesskey="p" rel="prev">Control Structures</a>, Up: <a href="Control-Structures.html" accesskey="u" rel="up">Control Structures</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Selection-1"></span><h4 class="subsection">6.9.1 Selection</h4>
<span id="index-selection-control-structures"></span>
<span id="index-control-structures-for-selection"></span>

<span id="index-IF-control-structure"></span>
<div class="example">
<pre class="example"><i>flag</i>
IF
  <i>code</i>
ENDIF
</pre></div>

<p><i>flag</i> がゼロ以外の場合(<code>IF</code> などに関する限り、 任意のビットが設定されたセルは true 扱いです)、 <i>code</i>
が実行されます。
</p>
<div class="example">
<pre class="example"><i>flag</i>
IF
  <i>code1</i>
ELSE
  <i>code2</i>
ENDIF
</pre></div>

<p><var>flag</var> が true の場合は <i>code1</i> が実行され、 それ以外の場合は <i>code2</i> が実行されます。
</p>
<p><code>ENDIF</code> の代わりに <code>THEN</code> を使用できます。 実際 <code>THEN</code> は標準です、 がしかし、
<code>ENDIF</code> は非常に人気があるものの、 標準ではありません。 私達は <code>ENDIF</code> の使用をお勧めします。 なぜなら、
他の言語を知っている人にとっても混乱が少ないためです(また、 <code>ENDIF</code> に対しては、 これらの人々の Forth
に対する否定的な偏見が強化される傾向が見られません)。 なお、 <code>THEN</code> のみを提供するシステムに <code>ENDIF</code>
を追加するのは以下のように簡単です:
</p><div class="example">
<pre class="example">: ENDIF   POSTPONE then ; immediate
</pre></div>

<p>[<cite>Webster&rsquo;s New Encyclopedic Dictionary</cite> によると、<em>then (副詞)</em>
には以下の意味があります:
</p><blockquote>
<p>... 2b: 順番に次の後に続く ... 3d: 必然的な結果として (if you were there, then you saw them)
</p></blockquote>
<p>Forth の <code>THEN</code> は 2b の意味を持ちますが、 Pascal や他の多くのプログラミング言語の <code>THEN</code> は 3d
の意味を持ちます。]
</p>
<p>Gforth には <code>?DUP-IF</code> および <code>?DUP-0=-IF</code> というワードも用意されているため、 <code>?dup</code>
の使用を避けることができます。これらの代替手段を使用することは、 <code>?dup</code> を使用するよりも効率的です。 <code>ENDIF</code> や
<code>?DUP-IF</code> や <code>?DUP-0=-IF</code> の標準 Forth での定義は、<samp>compat/control.fs</samp>
で提供されます。
</p>
<span id="index-CASE-control-structure"></span>
<div class="example">
<pre class="example"><i>x</i>
CASE
  <i>x1</i> OF <i>code1</i> ENDOF
  <i>x2</i> OF <i>code2</i> ENDOF
  &hellip;
  ( x ) <i>default-code</i> ( x )
ENDCASE ( )
</pre></div>

<p><i>xi</i> が <i>x</i> に等しいなら、 最初の <i>codei</i> を実行します。 <i>x1</i> 〜 <i>xn</i> のいずれも一致しない場合は、
オプションの <i>default-code</i> が実行されます。 オプションのデフォルト・ケースは、 最後の <code>ENDOF</code>
の後にコードを記述するだけで追加できます。 スタック頂上にある <i>x</i> を使用することはできますが、 それを消費してはなりません。  値 <i>x</i>
は、 この構造によって(一致する <code>OF</code> によって、 または一致する OF がない場合は <code>ENDCASE</code> によって)
消費されます。  例:
</p>
<div class="example">
<pre class="example">: num-name ( n -- c-addr u )
 case
   0 of s&quot; zero &quot; endof
   1 of s&quot; one &quot;  endof
   2 of s&quot; two &quot;  endof
   \ default case:
   s&quot; other number&quot; 
   rot \ get n on top so ENDCASE can drop it
 endcase ;
</pre></div>

<p>(非標準の) <code>?of</code> を使用して、 <code>case</code> を 3 つ以上の選択肢の一般的な選択構造として使用することもできます。
<code>?Of</code> はフラグを受け取ります。  例:
</p>
<div class="example">
<pre class="example">: sgn ( n1 -- n2 )
    \ sign function
    case
	dup 0&lt; ?of drop -1 endof
	dup 0&gt; ?of drop 1 endof
	dup \ n1=0 -&gt; n2=0; dup an item, to be consumed by ENDCASE
    endcase ;
</pre></div>

<p>プログラミング・スタイル・メモ:
 コードを理解しやすくするには、
選択構造を介したすべての経路で同一の方法でスタックを変更(消費およびプッシュされるスタック項目の数と型)するようにする必要があります。
</p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="Simple-Loops.html">Simple Loops</a>, Previous: <a href="Control-Structures.html">Control Structures</a>, Up: <a href="Control-Structures.html">Control Structures</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
