<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>String and character literals (Gforth マニュアル)</title>

<meta name="description" content="String and character literals (Gforth マニュアル)">
<meta name="keywords" content="String and character literals (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Strings-and-Characters.html" rel="up" title="Strings and Characters">
<link href="String-words.html" rel="next" title="String words">
<link href="String-representations.html" rel="prev" title="String representations">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="String-and-character-literals">
<div class="header">
<p>
Next: <a href="String-words.html" accesskey="n" rel="next">String words</a>, Previous: <a href="String-representations.html" accesskey="p" rel="prev">String representations</a>, Up: <a href="Strings-and-Characters.html" accesskey="u" rel="up">Strings and Characters</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="String-and-Character-literals"></span><h4 class="subsection">6.8.3 String and Character literals</h4>
<span id="index-character-literals"></span>
<span id="index-string-literals"></span>
<span id="index-literals-for-characters-and-strings"></span>

<p>文字列リテラル(string literal)を記述する至高の方法は、 <code>&quot;<i>STRING</i>&quot;</code> と記述することです。
<code>s\&quot;</code> の場合と同じく、 バックスラッシュによるエスケープ(\-escapes)を使用できます。 ただし、
この方法は標準ではないため(non-standard)、 移植性を高めるためには以下のいずれかのワードを使用することをお勧めします:
</p>
<span id="index-s_005c_0022-_0028--compilation-_0027ccc_0022_0027-_002d_002d-_003b-run_002dtime-_002d_002d-c_002daddr-u--_0029-core_002dext_002cfile_002dext"></span>
<span id="index-s_005c_0022"></span>
<span id="index-s_005c_0022-1"></span>
<div class="format">
<pre class="format"><code>s\&quot;</code> ( <i>compilation &rsquo;ccc&quot;&rsquo; &ndash; ; run-time &ndash; c-addr u  </i>) core-ext,file-ext &ldquo;s-backslash-quote&rdquo;
</pre></div>
<p>これは <code>s&quot;</code> と似ていますが、
C言語のようなバックスラッシュ・エスケープ・シーケンス(\-escape-sequences)を次のように変換します: <code>\a</code> BEL
(ビープ音)、 <code>\b</code> BS 、 <code>\e</code> ESC (not in C99)、 <code>\f</code> FF 、 <code>\n</code>
改行(newline)、 <code>\r</code> CR 、 <code>\t</code> HT 、<code>\v</code> VT 、<code>\&quot;</code> &quot; 、
<code>\\</code> \ 、 <code>\</code>[0-7]{1,3} 8進数(非標準)、 <code>\x</code>[0-9a-f]{0,2}
16進指定char値(標準は2桁のみ)、 <code>\u</code>[0-9a-f]{4}
ユニコード・コードポイント(サロゲート・ペア自動マージ;auto-merges surrogate pairs)、
<code>\U</code>[0-9a-f]{8} 拡張ユニコード・コード・ポイント。 <code>\</code> は他の文字よりも前に予約されています。 <br> 注意:
<code>\x</code>XX は生のバイトを生成することに注意してください。 一方、 <code>\u</code>XXXX と <code>\U</code>XXXXXXXX は、
現在のエンコーディングのコード・ポイントを生成します。 たとえば、 UTF-8 エンコーディングを使用し、 &auml; (コード・ポイント
U+00E4)をエンコードしたい場合は、 次のように指定できます: 文字 &auml; 自体を記述するか、 <code>\xc3\xa4</code>
(このコード・ポイントの UTF-8 バイト) または <code>\u00e4</code> または <code>\U000000e4</code> を記述します。 <br>
注意: C言語とは異なり、 <code>\n</code> はホストOS に適した改行シーケンスを生成します。 これは複数の文字で構成される場合があります。
つまり、 <code>&quot;\n&quot;</code> は <code>newline</code> と同等です。
</p>

<span id="index-S_0022-_0028--compilation-_0027ccc_0022_0027-_002d_002d-_003b-run_002dtime-_002d_002d-c_002daddr-u--_0029-core_002cfile"></span>
<span id="index-S_0022"></span>
<span id="index-S_0022-1"></span>
<div class="format">
<pre class="format"><code>S&quot;</code> ( <i>compilation &rsquo;ccc&quot;&rsquo; &ndash; ; run-time &ndash; c-addr u  </i>) core,file &ldquo;s-quote&rdquo;
</pre></div>
<p>コンパイル・モードコードは  <code>&quot;</code> (二重引用符) を区切り文字として文字列 <i>ccc</i> をパースします。 その実行時コードは、 長さ
<i>u</i> と 文字列の開始アドレス <i>c-addr</i> を返します。 インタプリタ時: 同様に文字列をパースし、 <i>c-addr</i> と
<i>u</i> 返します。 Gforth では文字列(string)を <code>allocate</code> します。
結果として生じるメモリ・リークは通常は問題ではありません。 例外は、 <code>S&quot;</code> を含む文字列を作成し、 その文字列を
<code>evaluate</code> する場合です。 その場合、 リークはインタプリトされたファイルのサイズに制限されないため、 文字列を
<code>free</code> することもできます。 Forth-2012 では、それぞれ 80 文字のバッファが 2 つしか保証されないため、
標準プログラムでは、 文字列は 2 つ前の <code>s&quot;</code> までしか存続していない想定する必要があります。
</p>


<p>同様に、 <code>'<i>C</i>'</code> を使用すると、 文字 <i>C</i> のコード <i>xc</i> を取得できます。 この方法は Forth-2012
から標準化されています。 これを取得する古い方法は、 以下のいずれかのワードを使用することです:
</p>
<span id="index-char-_0028--_0027_003cspaces_003eccc_0027-_002d_002d-c--_0029-core_002cxchar_002dext"></span>
<span id="index-char"></span>
<span id="index-char-1"></span>
<div class="format">
<pre class="format"><code>char</code> ( <i>&rsquo;&lt;spaces&gt;ccc&rsquo; &ndash; c  </i>) core,xchar-ext &ldquo;char&rdquo;
</pre></div>
<p>先頭のスペース達をスキップします。 文字列 <i>ccc</i> をパースし、 <i>ccc</i> の最初の文字の文字コード <i>c</i>
を返します(訳注:ASCII以外の文字コードもいけるっぽい(LANG=ja_JP.UTF-8) char あ hex . decimal 3042
ok)
</p>

<span id="index-_005bchar_005d-_0028--compilation-_0027_003cspaces_003eccc_0027-_002d_002d-_003b-run_002dtime-_002d_002d-c--_0029-core_002cxchar_002dext"></span>
<span id="index-_005bchar_005d"></span>
<span id="index-_005bchar_005d-1"></span>
<div class="format">
<pre class="format"><code>[char]</code> ( <i>compilation &rsquo;&lt;spaces&gt;ccc&rsquo; &ndash; ; run-time &ndash; c  </i>) core,xchar-ext &ldquo;bracket-char&rdquo;
</pre></div>
<p>コンパイル状態: 先頭のスペース達をスキップします。 文字列 <i>ccc</i> をパースします。 その実行時コード: <i>ccc</i>
の最初の文字の文字コード <i>c</i> を返します。 このワードのインタプリタ機能(interpretation semantics)は未定義です。
</p>


<p>通常は、 コロン定義の外側で <code>char</code> 使用するか、 コロン定義の内側で <code>[char]</code> を使用するか、 単にその両方で
<code>'<i>C</i>'</code> を使用するかです。
</p>
<p>注意: 例えば、
</p>
<div class="example">
<pre class="example">&quot;C&quot; type
</pre></div>

<p>の方が下記よりも(わずかに)効率的です
</p>
<div class="example">
<pre class="example">'C' xemit
</pre></div>

<p>なぜなら、 後者はコード・ポイントをバイトのシーケンスに変換し、 それらを個別に <code>emit</code> するからです。 同様に、
一般的な文字達を扱う場合は、 通常、 コード・ポイントではなく文字列として表す方が効率的です。
</p>
<p><code>S&quot;</code> または <code>'<i>C</i>'</code> では生成できない、 一般的に使用される文字や文字列を生成するために以下のワード群があります:
</p>
<span id="index-newline-_0028--_002d_002d-c_002daddr-u--_0029-gforth_002d0_002e5"></span>
<span id="index-newline"></span>
<span id="index-newline-1"></span>
<div class="format">
<pre class="format"><code>newline</code> ( <i>&ndash; c-addr u </i>) gforth-0.5 &ldquo;newline&rdquo;
</pre></div>
<p>ホストOSの改行シーケンスを含む文字列(訳注: 文字コードを返す訳では無いことに注意。 文字列の内容は LF だったり CRLF だったりする)
</p>
<span id="index-bl-_0028--_002d_002d-c_002dchar--_0029-core"></span>
<span id="index-bl"></span>
<span id="index-bl-1"></span>
<div class="format">
<pre class="format"><code>bl</code> ( <i>&ndash; c-char  </i>) core &ldquo;b-l&rdquo;
</pre></div>
<p><i>c-char</i> は空白(space)の文字コード値です。
</p>

<span id="index-_0023tab-_0028--_002d_002d-c--_0029-gforth_002d0_002e2"></span>
<span id="index-_0023tab"></span>
<span id="index-_0023tab-1"></span>
<div class="format">
<pre class="format"><code>#tab</code> ( <i>&ndash; c  </i>) gforth-0.2 &ldquo;number-tab&rdquo;
</pre></div>

<span id="index-_0023lf-_0028--_002d_002d-c--_0029-gforth_002d0_002e2"></span>
<span id="index-_0023lf"></span>
<span id="index-_0023lf-1"></span>
<div class="format">
<pre class="format"><code>#lf</code> ( <i>&ndash; c  </i>) gforth-0.2 &ldquo;number-l-f&rdquo;
</pre></div>

<span id="index-_0023cr-_0028--_002d_002d-c--_0029-gforth_002d0_002e2"></span>
<span id="index-_0023cr"></span>
<span id="index-_0023cr-1"></span>
<div class="format">
<pre class="format"><code>#cr</code> ( <i>&ndash; c  </i>) gforth-0.2 &ldquo;number-c-r&rdquo;
</pre></div>

<span id="index-_0023ff-_0028--_002d_002d-c--_0029-gforth_002d0_002e2"></span>
<span id="index-_0023ff"></span>
<span id="index-_0023ff-1"></span>
<div class="format">
<pre class="format"><code>#ff</code> ( <i>&ndash; c  </i>) gforth-0.2 &ldquo;number-f-f&rdquo;
</pre></div>

<span id="index-_0023bs-_0028--_002d_002d-c--_0029-gforth_002d0_002e2"></span>
<span id="index-_0023bs"></span>
<span id="index-_0023bs-1"></span>
<div class="format">
<pre class="format"><code>#bs</code> ( <i>&ndash; c  </i>) gforth-0.2 &ldquo;number-b-s&rdquo;
</pre></div>

<span id="index-_0023del-_0028--_002d_002d-c--_0029-gforth_002d0_002e2"></span>
<span id="index-_0023del"></span>
<span id="index-_0023del-1"></span>
<div class="format">
<pre class="format"><code>#del</code> ( <i>&ndash; c  </i>) gforth-0.2 &ldquo;number-del&rdquo;
</pre></div>

<span id="index-_0023bell-_0028--_002d_002d-c--_0029-gforth_002d0_002e2"></span>
<span id="index-_0023bell"></span>
<span id="index-_0023bell-1"></span>
<div class="format">
<pre class="format"><code>#bell</code> ( <i>&ndash; c  </i>) gforth-0.2 &ldquo;number-bell&rdquo;
</pre></div>

<span id="index-_0023esc-_0028--_002d_002d-c--_0029-gforth_002d0_002e5"></span>
<span id="index-_0023esc"></span>
<span id="index-_0023esc-1"></span>
<div class="format">
<pre class="format"><code>#esc</code> ( <i>&ndash; c  </i>) gforth-0.5 &ldquo;number-esc&rdquo;
</pre></div>

<span id="index-_0023eof-_0028--_002d_002d-c--_0029-gforth_002d0_002e7"></span>
<span id="index-_0023eof"></span>
<span id="index-_0023eof-1"></span>
<div class="format">
<pre class="format"><code>#eof</code> ( <i>&ndash; c  </i>) gforth-0.7 &ldquo;number-e-o-f&rdquo;
</pre></div>
<p>実際には EOT (ASCII コード 4 別名 <code>^D</code>)
</p>


</div>
<hr>
<div class="header">
<p>
Next: <a href="String-words.html">String words</a>, Previous: <a href="String-representations.html">String representations</a>, Up: <a href="Strings-and-Characters.html">Strings and Characters</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
