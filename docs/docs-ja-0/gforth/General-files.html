<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>General files (Gforth マニュアル)</title>

<meta name="description" content="General files (Gforth マニュアル)">
<meta name="keywords" content="General files (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Files.html" rel="up" title="Files">
<link href="Redirection.html" rel="next" title="Redirection">
<link href="Forth-source-files.html" rel="prev" title="Forth source files">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="General-files">
<div class="header">
<p>
Next: <a href="Redirection.html" accesskey="n" rel="next">Redirection</a>, Previous: <a href="Forth-source-files.html" accesskey="p" rel="prev">Forth source files</a>, Up: <a href="Files.html" accesskey="u" rel="up">Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="General-files-1"></span><h4 class="subsection">6.18.2 General files</h4>
<span id="index-general-files"></span>
<span id="index-file_002dhandling"></span>

<p>ファイルは名前と種類によって開かれたり作成されたりします。 以下のファイル・アクセス・メソッド(FAM)が認識されます:
</p>
<span id="index-fam-_0028file-access-method_0029"></span>
<span id="index-r_002fo-_0028--_002d_002d-fam--_0029-file"></span>
<span id="index-r_002fo"></span>
<span id="index-r_002fo-1"></span>
<div class="format">
<pre class="format"><code>r/o</code> ( <i>&ndash; fam  </i>) file &ldquo;r-o&rdquo;
</pre></div>

<span id="index-r_002fw-_0028--_002d_002d-fam--_0029-file"></span>
<span id="index-r_002fw"></span>
<span id="index-r_002fw-1"></span>
<div class="format">
<pre class="format"><code>r/w</code> ( <i>&ndash; fam  </i>) file &ldquo;r-w&rdquo;
</pre></div>

<span id="index-w_002fo-_0028--_002d_002d-fam--_0029-file"></span>
<span id="index-w_002fo"></span>
<span id="index-w_002fo-1"></span>
<div class="format">
<pre class="format"><code>w/o</code> ( <i>&ndash; fam  </i>) file &ldquo;w-o&rdquo;
</pre></div>

<span id="index-bin-_0028--fam1-_002d_002d-fam2--_0029-file"></span>
<span id="index-bin"></span>
<span id="index-bin-1"></span>
<div class="format">
<pre class="format"><code>bin</code> ( <i>fam1 &ndash; fam2  </i>) file &ldquo;bin&rdquo;
</pre></div>

<span id="index-_002bfmode-_0028--fam1-rwxrwxrwx-_002d_002d-fam2--_0029-gforth_002d1_002e0"></span>
<span id="index-_002bfmode"></span>
<span id="index-_002bfmode-1"></span>
<div class="format">
<pre class="format"><code>+fmode</code> ( <i>fam1 rwxrwxrwx &ndash; fam2  </i>) gforth-1.0 &ldquo;plus-f-mode&rdquo;
</pre></div>
<p>ファイル・アクセス・モードを fam に追加 - create-file のみ(訳注: <i>rwxrwxrwx</i> は chmod と同様 777 とか
666 。 ただし gforth には直接 8進数記述する方法が無い)
</p>



<p>ファイルを開いたり作成したりすると、 他のすべてのファイル・コマンドに使用されるファイル識別子 <i>wfileid</i> が返されます。
すべてのファイル・コマンドは、 ステータス値 <i>wior</i> も返します。 これは、 操作が成功した場合は 0 を返し、
エラーの場合は実装で定義されたゼロ以外の値を返します。
</p>

<span id="index-open_002dfile-_0028--c_002daddr-u-wfam-_002d_002d-wfileid-wior--_0029-file"></span>
<span id="index-open_002dfile"></span>
<span id="index-open_002dfile-1"></span>
<div class="format">
<pre class="format"><code>open-file</code> ( <i>c-addr u wfam &ndash; wfileid wior </i>) file &ldquo;open-file&rdquo;
</pre></div>

<span id="index-create_002dfile-_0028--c_002daddr-u-wfam-_002d_002d-wfileid-wior--_0029-file"></span>
<span id="index-create_002dfile"></span>
<span id="index-create_002dfile-1"></span>
<div class="format">
<pre class="format"><code>create-file</code> ( <i>c-addr u wfam &ndash; wfileid wior </i>) file &ldquo;create-file&rdquo;
</pre></div>


<span id="index-close_002dfile-_0028--wfileid-_002d_002d-wior--_0029-file"></span>
<span id="index-close_002dfile"></span>
<span id="index-close_002dfile-1"></span>
<div class="format">
<pre class="format"><code>close-file</code> ( <i>wfileid &ndash; wior </i>) file &ldquo;close-file&rdquo;
</pre></div>

<span id="index-delete_002dfile-_0028--c_002daddr-u-_002d_002d-wior--_0029-file"></span>
<span id="index-delete_002dfile"></span>
<span id="index-delete_002dfile-1"></span>
<div class="format">
<pre class="format"><code>delete-file</code> ( <i>c-addr u &ndash; wior </i>) file &ldquo;delete-file&rdquo;
</pre></div>

<span id="index-rename_002dfile-_0028--c_002daddr1-u1-c_002daddr2-u2-_002d_002d-wior--_0029-file_002dext"></span>
<span id="index-rename_002dfile"></span>
<span id="index-rename_002dfile-1"></span>
<div class="format">
<pre class="format"><code>rename-file</code> ( <i>c-addr1 u1 c-addr2 u2 &ndash; wior </i>) file-ext &ldquo;rename-file&rdquo;
</pre></div>
<p>ファイル <i>c_addr1 u1</i> のファイル名を新しい名前 <i>c_addr2 u2</i> に変更します(rename)
</p>
<span id="index-read_002dfile-_0028--c_002daddr-u1-wfileid-_002d_002d-u2-wior--_0029-file"></span>
<span id="index-read_002dfile"></span>
<span id="index-read_002dfile-1"></span>
<div class="format">
<pre class="format"><code>read-file</code> ( <i>c-addr u1 wfileid &ndash; u2 wior </i>) file &ldquo;read-file&rdquo;
</pre></div>
<p>ファイル <i>wfileid</i> から <i>u1</i> 文字を <i>c_addr</i> からのバッファーに読み取ります。  ゼロ以外の <i>wior</i>
はエラーを示します。  <i>U2</i>は読み出したデータの長さを示します。  ファイルの終わりはエラーではなく、 <i>u2</i>$&lt;$<i>u1</i> かつ
<i>wior</i>=0 によって示されます。
</p>
<span id="index-read_002dline-_0028--c_005faddr-u1-wfileid-_002d_002d-u2-flag-wior--_0029-file"></span>
<span id="index-read_002dline"></span>
<span id="index-read_002dline-1"></span>
<div class="format">
<pre class="format"><code>read-line</code> ( <i>c_addr u1 wfileid &ndash; u2 flag wior  </i>) file &ldquo;read-line&rdquo;
</pre></div>
<p><i>wfileid</i> から <i>c_addr u1</i> のバッファーに行を読み取ります。  Gforth は、 LF と CR と CRLFの 3
つの一般的な行終端文字をすべてサポートします。  ゼロ以外の <i>wior</i> はエラーを示します。  false の <i>flag</i>
は、ファイルの最後(end of the file)で <code>read-line</code> が呼び出されたことを示します。 <i>u2</i>
は行の長さ(ターミネータなし)を示します。 <i>u2</i>$&lt;$<i>u1</i> は行の長さが <i>u2</i> 文字であることを示します。
<i>u2</i>=<i>u1</i> は、 行が少なくとも <i>u1</i> 文字長であり、 バッファーの <i>u1</i> 文字がその行の文字で埋められており、
そして、  その行の次のスライスは次の <code>read-line</code> で読み取られます。 行の長さが <i>u1</i> 文字の場合、最初の
<code>read-line</code> は <i>u2</i>=<i>u1</i> を返し、 次の read-line は <i>u2</i>=0 を返します。
</p>

<span id="index-key_002dfile-_0028--fd-_002d_002d-key--_0029-gforth_002d0_002e4"></span>
<span id="index-key_002dfile"></span>
<span id="index-key_002dfile-1"></span>
<div class="format">
<pre class="format"><code>key-file</code> ( <i>wfileid &ndash; n  </i>) gforth-0.4 &ldquo;key-file&rdquo;
</pre></div>
<p><i>wfileid</i> から 1 文字 <i>n</i> を読み取ります。  このワードは <i>wfileid</i> のバッファリングを無効にします。
あなたが端末から非標準モード(non-canonical
mode)(RAWモード)で文字を読み取りたい場合は、(C言語インターフェイスを使用して)自分で端末を非標準モード(non-canonical
mode)にする必要があります。 例外は <code>stdin</code> で、 この場合 Gforth は自動的に非正規モード(non-canonical
mode)に設定します。
</p>

<span id="index-key_003f_002dfile-_0028--wfileid-_002d_002d-f--_0029-gforth_002d0_002e4"></span>
<span id="index-key_003f_002dfile"></span>
<span id="index-key_003f_002dfile-1"></span>
<div class="format">
<pre class="format"><code>key?-file</code> ( <i>wfileid &ndash; f </i>) gforth-0.4 &ldquo;key-q-file&rdquo;
</pre></div>
<p><i>f</i> は、 ブロッキング無しに <i>wfileid</i> から少なくとも 1 文字を読み取ることができる場合に true になります。
ファイルに対して <code>read-file</code> または <code>read-line</code> も使用したい場合は、 最初に
<code>key?-file</code> または <code>key-file</code> を呼び出す必要があります(これら 2
つのワードはバッファリングを無効にします)。
</p>
<span id="index-file_002deof_003f-_0028--wfileid-_002d_002d-flag--_0029-gforth_002d0_002e6"></span>
<span id="index-file_002deof_003f"></span>
<span id="index-file_002deof_003f-1"></span>
<div class="format">
<pre class="format"><code>file-eof?</code> ( <i>wfileid &ndash; flag </i>) gforth-0.6 &ldquo;file-eof-query&rdquo;
</pre></div>
<p><var>wfileid</var> のファイル終了インジケーター(end-of-file indicator)がセットされている場合、 <var>Flag</var> は
true です。
</p>
<span id="index-write_002dfile-_0028--c_002daddr-u1-wfileid-_002d_002d-wior--_0029-file"></span>
<span id="index-write_002dfile"></span>
<span id="index-write_002dfile-1"></span>
<div class="format">
<pre class="format"><code>write-file</code> ( <i>c-addr u1 wfileid &ndash; wior </i>) file &ldquo;write-file&rdquo;
</pre></div>

<span id="index-write_002dline-_0028--c_002daddr-u-wfileid-_002d_002d-ior--_0029-file"></span>
<span id="index-write_002dline"></span>
<span id="index-write_002dline-1"></span>
<div class="format">
<pre class="format"><code>write-line</code> ( <i>c-addr u wfileid &ndash; ior  </i>) file &ldquo;write-line&rdquo;
</pre></div>

<span id="index-emit_002dfile-_0028--c-wfileid-_002d_002d-wior--_0029-gforth_002d0_002e2"></span>
<span id="index-emit_002dfile"></span>
<span id="index-emit_002dfile-1"></span>
<div class="format">
<pre class="format"><code>emit-file</code> ( <i>c wfileid &ndash; wior </i>) gforth-0.2 &ldquo;emit-file&rdquo;
</pre></div>

<span id="index-flush_002dfile-_0028--wfileid-_002d_002d-wior--_0029-file_002dext"></span>
<span id="index-flush_002dfile"></span>
<span id="index-flush_002dfile-1"></span>
<div class="format">
<pre class="format"><code>flush-file</code> ( <i>wfileid &ndash; wior </i>) file-ext &ldquo;flush-file&rdquo;
</pre></div>


<span id="index-file_002dstatus-_0028--c_002daddr-u-_002d_002d-wfam-wior--_0029-file_002dext"></span>
<span id="index-file_002dstatus"></span>
<span id="index-file_002dstatus-1"></span>
<div class="format">
<pre class="format"><code>file-status</code> ( <i>c-addr u &ndash; wfam wior </i>) file-ext &ldquo;file-status&rdquo; \ 訳注: <i>wior</i> &lt;&gt; 0 ;ファイルが存在しない(<i>wfam</i>は未定義の値)、 <i>wior</i>=0 かつ  ( <i>wfam</i>=2 r/w 、 <i>wfam</i>=0 r/o 、 <i>wfam</i>=4 w/o 、 <i>wfam</i>=1 r/o bin いずれのacessモードチェックもエラーになった時。便宜的に読み込み専用かつバイナリとして返す)
</pre></div>

<span id="index-file_002dposition-_0028--wfileid-_002d_002d-ud-wior--_0029-file"></span>
<span id="index-file_002dposition"></span>
<span id="index-file_002dposition-1"></span>
<div class="format">
<pre class="format"><code>file-position</code> ( <i>wfileid &ndash; ud wior </i>) file &ldquo;file-position&rdquo;
</pre></div>

<span id="index-reposition_002dfile-_0028--ud-wfileid-_002d_002d-wior--_0029-file"></span>
<span id="index-reposition_002dfile"></span>
<span id="index-reposition_002dfile-1"></span>
<div class="format">
<pre class="format"><code>reposition-file</code> ( <i>ud wfileid &ndash; wior </i>) file &ldquo;reposition-file&rdquo;
</pre></div>

<span id="index-file_002dsize-_0028--wfileid-_002d_002d-ud-wior--_0029-file"></span>
<span id="index-file_002dsize"></span>
<span id="index-file_002dsize-1"></span>
<div class="format">
<pre class="format"><code>file-size</code> ( <i>wfileid &ndash; ud wior </i>) file &ldquo;file-size&rdquo;
</pre></div>

<span id="index-resize_002dfile-_0028--ud-wfileid-_002d_002d-wior--_0029-file"></span>
<span id="index-resize_002dfile"></span>
<span id="index-resize_002dfile-1"></span>
<div class="format">
<pre class="format"><code>resize-file</code> ( <i>ud wfileid &ndash; wior </i>) file &ldquo;resize-file&rdquo;
</pre></div>


<span id="index-slurp_002dfile-_0028--c_002daddr1-u1-_002d_002d-c_002daddr2-u2--_0029-gforth_002d0_002e6"></span>
<span id="index-slurp_002dfile"></span>
<span id="index-slurp_002dfile-1"></span>
<div class="format">
<pre class="format"><code>slurp-file</code> ( <i>c-addr1 u1 &ndash; c-addr2 u2  </i>) gforth-0.6 &ldquo;slurp-file&rdquo;
</pre></div>
<p><var>c-addr1 u1</var> はファイル名、 <var>c-addr2 u2</var> はファイルの内容です(訳注: slurp;音を立ててすする の意味)
</p>

<span id="index-slurp_002dfid-_0028--fid-_002d_002d-addr-u--_0029-gforth_002d0_002e6"></span>
<span id="index-slurp_002dfid"></span>
<span id="index-slurp_002dfid-1"></span>
<div class="format">
<pre class="format"><code>slurp-fid</code> ( <i>fid &ndash; addr u  </i>) gforth-0.6 &ldquo;slurp-fid&rdquo;
</pre></div>
<p><var>addr u</var> はファイル <var>fid</var> の内容です(訳注: slurp;音を立ててすする の意味)
</p>

<span id="index-stdin-_0028--_002d_002d-wfileid--_0029-gforth_002d0_002e4"></span>
<span id="index-stdin"></span>
<span id="index-stdin-1"></span>
<div class="format">
<pre class="format"><code>stdin</code> ( <i>&ndash; wfileid </i>) gforth-0.4 &ldquo;stdin&rdquo;
</pre></div>
<p>Gforth プロセスの標準入力ファイル。
</p>
<span id="index-stdout-_0028--_002d_002d-wfileid--_0029-gforth_002d0_002e2"></span>
<span id="index-stdout"></span>
<span id="index-stdout-1"></span>
<div class="format">
<pre class="format"><code>stdout</code> ( <i>&ndash; wfileid </i>) gforth-0.2 &ldquo;stdout&rdquo;
</pre></div>
<p>Gforth プロセスの標準出力ファイル。
</p>
<span id="index-stderr-_0028--_002d_002d-wfileid--_0029-gforth_002d0_002e2"></span>
<span id="index-stderr"></span>
<span id="index-stderr-1"></span>
<div class="format">
<pre class="format"><code>stderr</code> ( <i>&ndash; wfileid </i>) gforth-0.2 &ldquo;stderr&rdquo;
</pre></div>
<p>Gforth プロセスの標準エラー出力ファイル。
</p>

</div>
<hr>
<div class="header">
<p>
Next: <a href="Redirection.html">Redirection</a>, Previous: <a href="Forth-source-files.html">Forth source files</a>, Up: <a href="Files.html">Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
