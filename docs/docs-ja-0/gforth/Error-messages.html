<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Error messages (Gforth マニュアル)</title>

<meta name="description" content="Error messages (Gforth マニュアル)">
<meta name="keywords" content="Error messages (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html" rel="up" title="Top">
<link href="Tools.html" rel="next" title="Tools">
<link href="Words.html" rel="prev" title="Words">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="chapter" id="Error-messages">
<div class="header">
<p>
Next: <a href="Tools.html" accesskey="n" rel="next">Tools</a>, Previous: <a href="Words.html" accesskey="p" rel="prev">Forth Words</a>, Up: <a href="index.html" accesskey="u" rel="up">Gforth</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Error-messages-1"></span><h2 class="chapter">7 Error messages</h2>
<span id="index-error-messages"></span>
<span id="index-backtrace"></span>

<p>Gforth の典型的なエラー・メッセージは以下のようになります:
</p>
<div class="example">
<pre class="example">in file included from \evaluated string/:-1
in file included from ./yyy.fs:1
./xxx.fs:4: Invalid memory address
&gt;&gt;&gt;bar&lt;&lt;&lt;
Backtrace:
$400E664C @
$400E6664 foo
</pre></div>

<p>エラーを特定するメッセージは <code>Invalid memory address</code> です。  そのエラーはファイル <samp>./xxx.fs</samp>
の 4 行目をテキスト解釈(text-interpreting)しているときに発生しました。 その行のエラーが発生したワードを(<code>&gt;&gt;&gt;</code> と
<code>&lt;&lt;&lt;</code> で囲んで)指摘します。
</p>
<p>エラーを含むファイルは <samp>./yyy.fs</samp> の 1 行目でインクルード(included)されており、 <samp>yyy.fs</samp>
はファイル以外からインクルードされています(この場合、 <samp>yyy.fs</samp> を Gforth へのコマンドライン
パラメータとして指定することにより)。
</p>
<p>エラー・メッセージの最後には、 バックトレースとして解釈できるリターン・スタック・ダンプが表示されます(空の可能性があります)。 その一番上の行には
<code>throw</code> が発生したときのリターン・スタックのTOSが表示され、
その一番下の行には最上位のテキスト・インタープリターのリターン・スタックのすぐ上にあるリターン・スタック・エントリが表示されます。
</p>
<p>ほとんどのリターン・スタック・エントリの右側には、 そのリターン・スタック・エントリをリターン・アドレスとしてプッシュしたワードを推測して表示します。
これによりバックトレースが得られます。 この例では、 <code>bar</code> が <code>foo</code> を呼び出し、 <code>foo</code> が
<code>@</code> を呼び出していることがわかります(そして、 この <code>@</code> には 「Invalid Memory
address」例外がありました)。
</p>
<p>注意: バックトレースは完璧では無いことに注意してください。 どのリターン・スタック・エントリがリターン・アドレスであるかは知りません(そのため、
誤検知が発生する可能性があります)。 また、 (<code>abort&quot;</code> など、)場合によっては、 リターン・アドレスからはリターン・
アドレスをプッシュしたワードを特定できないため、 リターン・アドレスによってはリターン・スタック・ダンプに名前が表示されません。
</p>
<span id="index-catch-and-backtraces"></span>
<p>リターン・スタック・ダンプは、 特定の <code>throw</code> が execute されたときのリターン・スタックを表します。
<code>catch</code> を使用するプログラムでは、 リターン・スタック・ダンプにどの <code>throw</code>
を使用する必要があるかが必ずしも明確ではありません(たとえば、 エラーを示すある <code>throw</code> がキャッチされ、
そのリカバリ中に別のエラーが発生したとすると、 スタック・ダンプにはどの <code>throw</code> のを使用するべきでしょうか？)。 Gforth は、
最後に execute された(そして、 その execute からまだ返ってきていない状態で、 ) <code>catch</code> または
<code>nothrow</code> の後の最初の <code>throw</code> のリターン・スタック・ダンプを表示します: 通常、 これはうまく機能します。
正しいバック・トレースを取得するためには、 通常、 エラーが再 throw されない場合は <code>catch</code> の後に
<code>nothrow</code> または <code>['] false catch 2drop</code> を挿入します。
</p>
<span id="index-gforth_002dfast-and-backtraces"></span>
<span id="index-gforth_002dfast_002c-difference-from-gforth"></span>
<span id="index-backtraces-with-gforth_002dfast"></span>
<span id="index-return-stack-dump-with-gforth_002dfast"></span>
<p><code>gforth</code> エンジン(訳注: OSコマンドラインから <i>gforth</i> で起動)は、 プリミティブが生成した throw
のリターン・スタック・ダンプを行えます(例: invalid memory address(不正なメモリーアクセス), stack
empty(スタックが空) 等)。 <code>gforth-fast</code> エンジン(訳注: OSコマンドラインから <i>gforth-fast</i>
で起動)は、 直接呼び出された <code>throw</code> (<code>abort</code> などを含む)
からのリターン・スタック・ダンプのみを行うことができます。 <code>gforth-fast</code> エンジンのプリミティブによって例外が発生した場合、
通常はリターン・スタック・ダンプは全く見れません。 しかしながら、 <code>catch</code> によって例外がキャッチされ(たとえば、
何らかの状態を復元するため)、 その後再び <code>throw</code> が返される場合、 最初の <code>throw</code>
に対するリターン・スタック・ダンプは見れます。
</p>
<p>また、 <code>gforth-fast</code> は、 ゼロ除算と除算オーバーフローを区別しようとしません。 これは、
どの除算も時間が掛かる処理だからです。
</p>
</div>



</body>
</html>
