<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Defining library interfaces (Gforth マニュアル)</title>

<meta name="description" content="Defining library interfaces (Gforth マニュアル)">
<meta name="keywords" content="Defining library interfaces (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="C-Interface.html" rel="up" title="C Interface">
<link href="Declaring-OS_002dlevel-libraries.html" rel="next" title="Declaring OS-level libraries">
<link href="Calling-C-function-pointers.html" rel="prev" title="Calling C function pointers">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="Defining-library-interfaces">
<div class="header">
<p>
Next: <a href="Declaring-OS_002dlevel-libraries.html" accesskey="n" rel="next">Declaring OS-level libraries</a>, Previous: <a href="Calling-C-function-pointers.html" accesskey="p" rel="prev">Calling C function pointers from Forth</a>, Up: <a href="C-Interface.html" accesskey="u" rel="up">C Interface</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Defining-library-interfaces-1"></span><h4 class="subsection">6.28.4 Defining library interfaces</h4>
<span id="index-giving-a-name-to-a-library-interface"></span>
<span id="index-library-interface-names"></span>

<p>以下のように、 一連の C 言語関数宣言(ライブラリ・インターフェイス)に名前を付けることができます:
</p>
<div class="example">
<pre class="example">c-library lseek-lib
\c #define _FILE_OFFSET_BITS 64
...
end-c-library
</pre></div>

<p>インターフェイスにこのような名前を付けると、 生成されるファイルの名前にその名前が含まれるようになり、 インターフェイスを 2 回目に使用するときに、
再度生成してコンパイルする代わりに既存のファイルが使用されるため、時間を節約できます。 生成されたファイルにはソース・コードの 128
ビット・ハッシュ(暗号的に安全ではありませんが、 この目的には十分である)が含まれているため、 宣言を変更すると新しいコンパイルが発生します。  通常、
これらのファイルは <samp>$HOME/.gforth/</samp><var>architecture</var><samp>/libcc-named</samp>
にキャッシュされるため、 問題が発生した場合、 または再コンパイルの強制が必要なその他の理由がある場合は、そこにあるファイルを削除してください。
</p>
<p>注意: <code>c-library</code> を使用すると、 一部の設定がリセットされるため、 そのライブラリに関連する他のすべての処理の前に
<code>c-library</code> を使用する必要があることに注意してください。 <code>c-library</code> の考え方は、 一般的な使用法としては、
各 <code>c-library</code>...<code>end-c-library</code> ユニットを独自のファイルに配置し、
これらのファイルを任意の順序でインクルードできるようにすることです。  C 言語インターフェースを扱う他のすべてのワードは、 ボキャブラリー
<code>c-lib</code> に隠されており、 <code>c-library</code> によって検索順序スタックの最上位に置かれ、
<code>end-c-library</code> によって検索順序スタックの最上位から削除されます。
</p>
<p>注意: ライブラリ名はディクショナリーに割り当てられないため、 ディクショナリー内の名前に影響を与えないことに注意してください。
ファイル・システムで使用されるため、 ファイル・システムに適した命名規則を使用する必要があります。
この名前はC言語のシンボルの一部としても使用されますが、 正当なC言語のシンボル名以外の文字はアンダースコアに置き換えられます。  また、
<code>c-library</code> の後で宣言した関数を <code>end-c-library</code> を実行する前に呼び出してはなりません。
</p>
<p>これらの名前付きライブラリ・インターフェイスの主な利点は、 それらが生成されると、 その生成に使用したツール(特に C 言語のコンパイラーと
libtool)が不要になるため、 ツールがインストールされていないマシンでもインターフェイスを使用できることです。 Gforth
のビルド・システムはこれらのライブラリをクロス・コンパイルすることもできるため、
ビルド・ツールがインストールされていないプラットフォームでもライブラリを利用できます。
</p>
<span id="index-c_002dlibrary_002dname-_0028--c_002daddr-u-_002d_002d--_0029-gforth_002d0_002e7"></span>
<span id="index-c_002dlibrary_002dname"></span>
<span id="index-c_002dlibrary_002dname-1"></span>
<div class="format">
<pre class="format"><code>c-library-name</code> ( <i>c-addr u &ndash;  </i>) gforth-0.7 &ldquo;c-library-name&rdquo;
</pre></div>
<p><i>c-addr u</i> という名前で C ライブラリ・インターフェイスを開始。
</p>

<span id="index-c_002dlibrary-_0028--_0022name_0022-_002d_002d--_0029-gforth_002d0_002e7"></span>
<span id="index-c_002dlibrary"></span>
<span id="index-c_002dlibrary-1"></span>
<div class="format">
<pre class="format"><code>c-library</code> ( <i>&quot;name&quot; &ndash;  </i>) gforth-0.7 &ldquo;c-library&rdquo;
</pre></div>
<p><code>c-library-name</code> のパース対応(parsing)バージョンです
</p>

<span id="index-end_002dc_002dlibrary-_0028--_002d_002d--_0029-gforth_002d0_002e7"></span>
<span id="index-end_002dc_002dlibrary"></span>
<span id="index-end_002dc_002dlibrary-1"></span>
<div class="format">
<pre class="format"><code>end-c-library</code> ( <i>&ndash;  </i>) gforth-0.7 &ldquo;end-c-library&rdquo;
</pre></div>
<p>直近の C ライブラリ・インターフェイスを終了し、 (必要に応じて)ビルドします。
</p>



</div>



</body>
</html>
