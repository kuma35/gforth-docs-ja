<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Address arithmetic (Gforth マニュアル)</title>

<meta name="description" content="Address arithmetic (Gforth マニュアル)">
<meta name="keywords" content="Address arithmetic (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Memory.html" rel="up" title="Memory">
<link href="Memory-Blocks.html" rel="next" title="Memory Blocks">
<link href="Special-Memory-Accesses.html" rel="prev" title="Special Memory Accesses">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="Address-arithmetic">
<div class="header">
<p>
Next: <a href="Memory-Blocks.html" accesskey="n" rel="next">Memory Blocks</a>, Previous: <a href="Special-Memory-Accesses.html" accesskey="p" rel="prev">Special Memory Accesses</a>, Up: <a href="Memory.html" accesskey="u" rel="up">Memory</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Address-arithmetic-1"></span><h4 class="subsection">6.7.6 Address arithmetic</h4>
<span id="index-address-arithmetic-words"></span>

<p>アドレス演算は、 配列やレコード(see <a href="Structures.html">Structures</a>)やオブジェクト(see <a href="Object_002doriented-Forth.html">Object-oriented Forth</a>)のようなデータ構造を構築可能な基礎基盤です。
</p>
<span id="index-address-unit"></span>
<span id="index-au-_0028address-unit_0029"></span>
<p>標準 Forth では、 データ型のサイズは規定されていません。 代わりに、 サイズを計算したりアドレス演算を行うための多数のワードが提供されます。
アドレス演算はアドレス単位(au;Address Unit, aus;Address UnitS)で実行されます。 ほとんどのシステムでは、
1アドレス単位は 1 バイトです。 注意: 1 つの文字に複数 au が含まれる可能性があるため、 <code>chars</code>
は何もしない(noop)訳ではないことに注意してください(noop であるプラットフォームでは、 <code>chars</code> は何もコンパイルしません)。
</p>
<p>基本的なアドレス算術ワードは <code>+</code> と <code>-</code> です。 たとえば、 セルのアドレスがわかっている場合、 <code>1 cells
+</code> を実行すると、 次のセルのアドレスがわかります。
</p>
<span id="index-alignment-of-addresses-for-types"></span>
<p>標準 Forth では、 特定の型のアドレスをアライメントするためのワードも定義されています。 多くのコンピュータでは、
特定のデータ型へのアクセスは特定のアドレスでのみ行われる必要があります。 たとえば、 セルは 4 で割り切れるアドレスでのみアクセスできます。
マシンが非アライメント・アクセスを許可する場合でも、 通常はアライメント・アクセスの方が高速に実行できます。 
</p>
<p>パフォーマンス重視で行く場合: 通常、 アライメント操作はデータ構造の定義中にのみ必要であり、
(より頻繁な)データ構造へのアクセス中には必要ありません。
</p>
<p>標準 Forth では、 文字のアドレス・アライメント用ワードは定義されていません。 Forth-2012
では、すべてのアドレスが文字単位でアライメントされています(all addresses are character-aligned)
</p>
<span id="index-CREATE-and-alignment"></span>
<p>標準 Forth は、 <code>CREATE</code> されたワードによって返されるアドレスがセル・アライメントされていることを保証します。
さらに、Gforth は、 こ​​れらのアドレスがあらゆる目的に合わせてアライメント済みであることを保証します(addresses are
aligned for all purposes)。
</p>
<p>注意: 標準の Forth ワード <code>char</code> はアドレス演算とは何の関係もないことに注意してください。
</p>

<span id="index-chars-_0028--n1-_002d_002d-n2--_0029-core"></span>
<span id="index-chars"></span>
<span id="index-chars-1"></span>
<div class="format">
<pre class="format"><code>chars</code> ( <i>n1 &ndash; n2  </i>) core &ldquo;chars&rdquo;
</pre></div>
<p><i>n1</i> 文字(char)が何アドレス単位になるかを <i>n2</i> に返します。
</p>

<span id="index-char_002b-_0028--c_002daddr1-_002d_002d-c_002daddr2--_0029-core"></span>
<span id="index-char_002b"></span>
<span id="index-char_002b-1"></span>
<div class="format">
<pre class="format"><code>char+</code> ( <i>c-addr1 &ndash; c-addr2 </i>) core &ldquo;char-plus&rdquo;
</pre></div>
<p><code>1 chars +</code>.
</p>
<span id="index-char_002d-_0028--c_002daddr1-_002d_002d-c_002daddr2--_0029-gforth_002d0_002e7"></span>
<span id="index-char_002d"></span>
<span id="index-char_002d-1"></span>
<div class="format">
<pre class="format"><code>char-</code> ( <i>c-addr1 &ndash; c-addr2  </i>) gforth-0.7 &ldquo;char-minus&rdquo;
</pre></div>

<span id="index-cells-_0028--n1-_002d_002d-n2--_0029-core"></span>
<span id="index-cells"></span>
<span id="index-cells-1"></span>
<div class="format">
<pre class="format"><code>cells</code> ( <i>n1 &ndash; n2 </i>) core &ldquo;cells&rdquo;
</pre></div>
<p><i>n1</i> 個のセルのアドレス単位の数を <i>n2</i> に取得します。
</p>
<span id="index-cell_002b-_0028--a_002daddr1-_002d_002d-a_002daddr2--_0029-core"></span>
<span id="index-cell_002b"></span>
<span id="index-cell_002b-1"></span>
<div class="format">
<pre class="format"><code>cell+</code> ( <i>a-addr1 &ndash; a-addr2 </i>) core &ldquo;cell-plus&rdquo;
</pre></div>
<p><code>1 cells +</code>
</p>
<span id="index-cell_002d-_0028--a_002daddr1-_002d_002d-a_002daddr2--_0029-core"></span>
<span id="index-cell_002d"></span>
<span id="index-cell_002d-1"></span>
<div class="format">
<pre class="format"><code>cell-</code> ( <i>a-addr1 &ndash; a-addr2 </i>) core &ldquo;cell-minus&rdquo;
</pre></div>
<p><code>1 cells -</code>
</p>
<span id="index-cell_002f-_0028--n1-_002d_002d-n2--_0029-gforth_002d1_002e0"></span>
<span id="index-cell_002f"></span>
<span id="index-cell_002f-1"></span>
<div class="format">
<pre class="format"><code>cell/</code> ( <i>n1 &ndash; n2 </i>) gforth-1.0 &ldquo;cell-divide&rdquo;
</pre></div>
<p><i>n1</i> 個のアドレス単位の幅の中に入れられるセルの数が <i>n2</i> です
</p>
<span id="index-cell-_0028--_002d_002d-u--_0029-gforth_002d0_002e2"></span>
<span id="index-cell"></span>
<span id="index-cell-1"></span>
<div class="format">
<pre class="format"><code>cell</code> ( <i>&ndash; u  </i>) gforth-0.2 &ldquo;cell&rdquo;
</pre></div>
<p>定数 &ndash; <code>1 cells</code>
</p>

<span id="index-aligned-_0028--c_002daddr-_002d_002d-a_002daddr--_0029-core"></span>
<span id="index-aligned"></span>
<span id="index-aligned-1"></span>
<div class="format">
<pre class="format"><code>aligned</code> ( <i>c-addr &ndash; a-addr </i>) core &ldquo;aligned&rdquo;
</pre></div>
<p><i>a-addr</i> は、 <i>c-addr</i> 以上の最初にアライメントされたアドレスです。
</p>
<span id="index-floats-_0028--n1-_002d_002d-n2--_0029-floating"></span>
<span id="index-floats"></span>
<span id="index-floats-1"></span>
<div class="format">
<pre class="format"><code>floats</code> ( <i>n1 &ndash; n2 </i>) floating &ldquo;floats&rdquo;
</pre></div>
<p><i>n2</i> は <i>n1</i> 個の浮動小数点数(float)のアドレスユニットの数です。
</p>
<span id="index-float_002b-_0028--f_002daddr1-_002d_002d-f_002daddr2--_0029-floating"></span>
<span id="index-float_002b"></span>
<span id="index-float_002b-1"></span>
<div class="format">
<pre class="format"><code>float+</code> ( <i>f-addr1 &ndash; f-addr2 </i>) floating &ldquo;float-plus&rdquo;
</pre></div>
<p><code>1 floats +</code>.
</p>
<span id="index-float-_0028--_002d_002d-u--_0029-gforth_002d0_002e3"></span>
<span id="index-float"></span>
<span id="index-float-1"></span>
<div class="format">
<pre class="format"><code>float</code> ( <i>&ndash; u  </i>) gforth-0.3 &ldquo;float&rdquo;
</pre></div>
<p>定数 &ndash; 浮動小数点数に対応するアドレスユニットの数。
</p>

<span id="index-float_002f-_0028--n1-_002d_002d-n2--_0029-gforth_002d1_002e0"></span>
<span id="index-float_002f"></span>
<span id="index-float_002f-1"></span>
<div class="format">
<pre class="format"><code>float/</code> ( <i>n1 &ndash; n2 </i>) gforth-1.0 &ldquo;float-divide&rdquo;
</pre></div>

<span id="index-faligned-_0028--c_002daddr-_002d_002d-f_002daddr--_0029-floating"></span>
<span id="index-faligned"></span>
<span id="index-faligned-1"></span>
<div class="format">
<pre class="format"><code>faligned</code> ( <i>c-addr &ndash; f-addr </i>) floating &ldquo;f-aligned&rdquo;
</pre></div>
<p><i>f-addr</i> は、<i>c-addr</i> 以上の、 浮動小数点数にアライメントされた最初のアドレスです。
</p>
<span id="index-sfloats-_0028--n1-_002d_002d-n2--_0029-floating_002dext"></span>
<span id="index-sfloats"></span>
<span id="index-sfloats-1"></span>
<div class="format">
<pre class="format"><code>sfloats</code> ( <i>n1 &ndash; n2 </i>) floating-ext &ldquo;s-floats&rdquo;
</pre></div>
<p><i>n2</i> は、 <i>n1</i> 個の単精度 IEEE 浮動小数点数のアドレス単位の数です。
</p>
<span id="index-sfloat_002b-_0028--sf_002daddr1-_002d_002d-sf_002daddr2--_0029-floating_002dext"></span>
<span id="index-sfloat_002b"></span>
<span id="index-sfloat_002b-1"></span>
<div class="format">
<pre class="format"><code>sfloat+</code> ( <i>sf-addr1 &ndash; sf-addr2  </i>) floating-ext &ldquo;s-float-plus&rdquo;
</pre></div>
<p><code>1 sfloats +</code>.
</p>

<span id="index-sfloat_002f-_0028--n1-_002d_002d-n2--_0029-gforth_002d1_002e0"></span>
<span id="index-sfloat_002f"></span>
<span id="index-sfloat_002f-1"></span>
<div class="format">
<pre class="format"><code>sfloat/</code> ( <i>n1 &ndash; n2 </i>) gforth-1.0 &ldquo;dfloat-divide&rdquo;
</pre></div>

<span id="index-sfaligned-_0028--c_002daddr-_002d_002d-sf_002daddr--_0029-floating_002dext"></span>
<span id="index-sfaligned"></span>
<span id="index-sfaligned-1"></span>
<div class="format">
<pre class="format"><code>sfaligned</code> ( <i>c-addr &ndash; sf-addr </i>) floating-ext &ldquo;s-f-aligned&rdquo;
</pre></div>
<p><i>sf-addr</i> は、 <i>c-addr</i> 以上の、 最初の単精度浮動小数点数アライメント・アドレスです。
</p>
<span id="index-dfloats-_0028--n1-_002d_002d-n2--_0029-floating_002dext"></span>
<span id="index-dfloats"></span>
<span id="index-dfloats-1"></span>
<div class="format">
<pre class="format"><code>dfloats</code> ( <i>n1 &ndash; n2 </i>) floating-ext &ldquo;d-floats&rdquo;
</pre></div>
<p><i>n2</i> は、 <i>n1</i> 個の倍精度 IEEE 浮動小数点数のアドレス単位の数です。
</p>
<span id="index-dfloat_002b-_0028--df_002daddr1-_002d_002d-df_002daddr2--_0029-floating_002dext"></span>
<span id="index-dfloat_002b"></span>
<span id="index-dfloat_002b-1"></span>
<div class="format">
<pre class="format"><code>dfloat+</code> ( <i>df-addr1 &ndash; df-addr2  </i>) floating-ext &ldquo;d-float-plus&rdquo;
</pre></div>
<p><code>1 dfloats +</code>.
</p>

<span id="index-dfloat_002f-_0028--n1-_002d_002d-n2--_0029-gforth_002d1_002e0"></span>
<span id="index-dfloat_002f"></span>
<span id="index-dfloat_002f-1"></span>
<div class="format">
<pre class="format"><code>dfloat/</code> ( <i>n1 &ndash; n2 </i>) gforth-1.0 &ldquo;sfloat-divide&rdquo;
</pre></div>

<span id="index-dfaligned-_0028--c_002daddr-_002d_002d-df_002daddr--_0029-floating_002dext"></span>
<span id="index-dfaligned"></span>
<span id="index-dfaligned-1"></span>
<div class="format">
<pre class="format"><code>dfaligned</code> ( <i>c-addr &ndash; df-addr </i>) floating-ext &ldquo;d-f-aligned&rdquo;
</pre></div>
<p><i>df-addr</i> は、 <i>c-addr</i> 以上の、 最初の倍精度浮動小数点数アライメント・アドレスです。
</p>
<span id="index-maxaligned-_0028--addr1-_002d_002d-addr2--_0029-gforth_002d0_002e2"></span>
<span id="index-maxaligned"></span>
<span id="index-maxaligned-1"></span>
<div class="format">
<pre class="format"><code>maxaligned</code> ( <i>addr1 &ndash; addr2  </i>) gforth-0.2 &ldquo;maxaligned&rdquo;
</pre></div>
<p><i>addr2</i> は、 すべてのアライメント制限を満たす <i>addr1</i> 以上の最初のアドレスです。
</p>

<span id="index-cfaligned-_0028--addr1-_002d_002d-addr2--_0029-gforth_002d0_002e2"></span>
<span id="index-cfaligned"></span>
<span id="index-cfaligned-1"></span>
<div class="format">
<pre class="format"><code>cfaligned</code> ( <i>addr1 &ndash; addr2  </i>) gforth-0.2 &ldquo;cfaligned&rdquo;
</pre></div>
<p><i>addr2</i> は、 <i>addr1</i> 以上の最初のアドレスで、 コード・フィールド用にアライメントされています(つまり、
対応する本体(body)が maxalign されるようにします)。
</p>

<span id="index-_002aaligned-_0028--addr1-n-_002d_002d-addr2--_0029-gforth_002d1_002e0"></span>
<span id="index-_002aaligned"></span>
<span id="index-_002aaligned-1"></span>
<div class="format">
<pre class="format"><code>*aligned</code> ( <i>addr1 n &ndash; addr2  </i>) gforth-1.0 &ldquo;*aligned&rdquo;
</pre></div>
<p><var>addr1</var> 以上で、 <var>n</var> でアライメントされた(<var>n</var> で割り切れる)アドレスを <var>addr2</var> に返します。
</p>

<span id="index-_002aalign-_0028--n-_002d_002d--_0029-gforth_002d1_002e0"></span>
<span id="index-_002aalign"></span>
<span id="index-_002aalign-1"></span>
<div class="format">
<pre class="format"><code>*align</code> ( <i>n &ndash;  </i>) gforth-1.0 &ldquo;*align&rdquo;
</pre></div>
<p><code>here</code> を <var>n</var> で割り切れるアドレスにアライメントします。
</p>

<span id="index-waligned-_0028--addr-_002d_002d-addr_0027--_0029-gforth_002d1_002e0"></span>
<span id="index-waligned"></span>
<span id="index-waligned-1"></span>
<div class="format">
<pre class="format"><code>waligned</code> ( <i>addr &ndash; addr&rsquo;  </i>) gforth-1.0 &ldquo;waligned&rdquo;
</pre></div>
<p><i>Addr&rsquo;</i> は、 <i>addr</i> 以上、かつ、次の偶数アドレスです。
</p>

<span id="index-walign-_0028--_002d_002d--_0029-gforth_002d1_002e0"></span>
<span id="index-walign"></span>
<span id="index-walign-1"></span>
<div class="format">
<pre class="format"><code>walign</code> ( <i>&ndash;  </i>) gforth-1.0 &ldquo;walign&rdquo;
</pre></div>
<p><code>here</code> を 偶数アドレスにアライメントします。
</p>

<span id="index-laligned-_0028--addr-_002d_002d-addr_0027--_0029-gforth_002d1_002e0"></span>
<span id="index-laligned"></span>
<span id="index-laligned-1"></span>
<div class="format">
<pre class="format"><code>laligned</code> ( <i>addr &ndash; addr&rsquo;  </i>) gforth-1.0 &ldquo;laligned&rdquo;
</pre></div>
<p><i>Addr&rsquo;</i> は、 <i>addr</i> 以上、 かつ、 4 で割り切れるアドレスです。
</p>

<span id="index-lalign-_0028--_002d_002d--_0029-gforth_002d1_002e0"></span>
<span id="index-lalign"></span>
<span id="index-lalign-1"></span>
<div class="format">
<pre class="format"><code>lalign</code> ( <i>&ndash;  </i>) gforth-1.0 &ldquo;lalign&rdquo;
</pre></div>
<p><code>here</code> を 4 で割り切れるアドレスにアライメントします。
</p>

<span id="index-xaligned-_0028--addr-_002d_002d-addr_0027--_0029-gforth_002d1_002e0"></span>
<span id="index-xaligned"></span>
<span id="index-xaligned-1"></span>
<div class="format">
<pre class="format"><code>xaligned</code> ( <i>addr &ndash; addr&rsquo;  </i>) gforth-1.0 &ldquo;xaligned&rdquo;
</pre></div>
<p><i>Addr&rsquo;</i> を <i>addr</i> 以上、 かつ、 8 で割り切れるアドレスにします。
</p>

<span id="index-xalign-_0028--_002d_002d--_0029-gforth_002d1_002e0"></span>
<span id="index-xalign"></span>
<span id="index-xalign-1"></span>
<div class="format">
<pre class="format"><code>xalign</code> ( <i>&ndash;  </i>) gforth-1.0 &ldquo;xalign&rdquo;
</pre></div>
<p><code>here</code> を 8 で割り切れるアドレスにアライメントします。
</p>


<p>環境クエリ <code>address-unit-bits</code> (see <a href="Environmental-Queries.html">Environmental Queries</a>) と、 以下のワード群は、
バイトアドレスを持たないマシン(non-byte-addressed machines)に移植可能なソフトウェアを作成したい人に役立つかもしれません。
</p>
<span id="index-_002fw-_0028--_002d_002d-u--_0029-gforth_002d0_002e7"></span>
<span id="index-_002fw"></span>
<span id="index-_002fw-1"></span>
<div class="format">
<pre class="format"><code>/w</code> ( <i>&ndash; u  </i>) gforth-0.7 &ldquo;slash-w&rdquo;
</pre></div>
<p>16ビット値に必要なアドレス単位
</p>

<span id="index-_002fl-_0028--_002d_002d-u--_0029-gforth_002d0_002e7"></span>
<span id="index-_002fl"></span>
<span id="index-_002fl-1"></span>
<div class="format">
<pre class="format"><code>/l</code> ( <i>&ndash; u  </i>) gforth-0.7 &ldquo;slash-l&rdquo;
</pre></div>
<p>32ビット値に必要なアドレス単位
</p>

<span id="index-_002fx-_0028--_002d_002d-u--_0029-gforth_002d1_002e0"></span>
<span id="index-_002fx"></span>
<span id="index-_002fx-1"></span>
<div class="format">
<pre class="format"><code>/x</code> ( <i>&ndash; u  </i>) gforth-1.0 &ldquo;slash-x&rdquo;
</pre></div>
<p>64ビット値に必要なアドレス単位
</p>


</div>
<hr>
<div class="header">
<p>
Next: <a href="Memory-Blocks.html">Memory Blocks</a>, Previous: <a href="Special-Memory-Accesses.html">Special Memory Accesses</a>, Up: <a href="Memory.html">Memory</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
