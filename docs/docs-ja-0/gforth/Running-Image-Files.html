<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Running Image Files (Gforth マニュアル)</title>

<meta name="description" content="Running Image Files (Gforth マニュアル)">
<meta name="keywords" content="Running Image Files (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Image-Files.html" rel="up" title="Image Files">
<link href="Modifying-the-Startup-Sequence.html" rel="next" title="Modifying the Startup Sequence">
<link href="Stack-and-Dictionary-Sizes.html" rel="prev" title="Stack and Dictionary Sizes">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="section" id="Running-Image-Files">
<div class="header">
<p>
Next: <a href="Modifying-the-Startup-Sequence.html" accesskey="n" rel="next">Modifying the Startup Sequence</a>, Previous: <a href="Stack-and-Dictionary-Sizes.html" accesskey="p" rel="prev">Stack and Dictionary Sizes</a>, Up: <a href="Image-Files.html" accesskey="u" rel="up">Image Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Running-Image-Files-1"></span><h3 class="section">14.7 Running Image Files</h3>
<span id="index-running-image-files"></span>
<span id="index-invoking-image-files"></span>
<span id="index-image-file-invocation"></span>

<span id="index-_002di_002c-invoke-image-file"></span>
<span id="index-_002d_002dimage-file_002c-invoke-image-file"></span>
<p><code>-i</code> フラグを使用したデフォルトの <samp>gforth.fi</samp> の代わりに、 イメージ・ファイル <i>image</i> を使用して
Gforth を呼び出すことができます(see <a href="Invoking-Gforth.html">Invoking Gforth</a>):
</p><div class="example">
<pre class="example">gforth -i <i>image</i>
</pre></div>

<span id="index-executable-image-file"></span>
<span id="index-image-file_002c-executable"></span>
<p>オペレーティング・システムが <code>#! ...</code> 形式の行によるスクリプトの開始をサポートしている場合は、
イメージ・ファイル名を入力するだけで、 そのイメージ・ファイルで Gforth を起動できます(ファイル拡張子 <code>.fi</code>
は単なる慣例であることに注意してください)。 つまり、 イメージ・ファイル <i>image</i> を使用して Gforth を実行するには、
<code>gforth -i <i>image</i></code> の代わりに <i>image</i> と入力するだけです。  これが機能するのは、すべての
<code>.fi</code> ファイルが以下の形式の行で始まるためです:
</p>
<div class="example">
<pre class="example">#! /usr/local/bin/gforth-0.4.0 -i
</pre></div>

<p>この行で指定された Gforth エンジンのファイルとパス名は、 そのエンジンがビルドされた特定の Gforth 実行可能ファイルです。 つまり、
<samp>gforthmi</samp> が実行されたときの環境変数 <code>GFORTH</code> の値です。
</p>
<p>同じシェル機能を利用して、 Forth ソース・ファイルを実行可能ファイルにできます。 たとえば、 以下のテキストをファイルに配置します:
</p>
<div class="example">
<pre class="example">#! /usr/local/bin/gforth

.&quot; Hello, world&quot; CR
bye
</pre></div>

<p>そして、 ファイルを実行可能にすると(Unix の場合は chmod +x)、 コマンド・ラインから直接実行できます。 シーケンス <code>#!</code>
は 2 つの側面から使用されます。 まず、 オペレーティング・システムによって「マジック・シーケンス」として認識され<a id="DOCF37" href="#FOOT37"><sup>37</sup></a>、 次に Gforth
によってコメント文字として扱われます。  2 番目の使用法のため、<code>#!</code> と実行可能ファイルへのパスの間に空白が必要です(さらに、 一部の
Unix ではシーケンス <code>#! /</code> が必要です)。
</p>
<p>ほとんどの Unix システム(Linux を含む)は、 バイナリ名の後​​に 1 つのオプションだけをサポートします。  それでも十分でない場合は、
以下のトリックを使用できます:
</p>
<div class="example">
<pre class="example">#! /bin/sh
: ## ; 0 [if]
exec gforth -m 10M -d 1M $0 &quot;$@&quot;
[then]
.&quot; Hello, world&quot; cr
bye \ caution: this prevents (further) processing of &quot;$@&quot;
</pre></div>

<p>最初に、 このスクリプトはシェル・スクリプトとして解釈され、 最初の 2 行が(ほとんど)コメントとして扱われ、 次に 3 行目が実行されると、
このスクリプト (<code>$0</code>) をパラメータとして、 そのパラメータを追加パラメータ (<code>&quot;$@&quot;</code>) として gforth
を呼び出します。 さらに次に、 このスクリプトは Forth スクリプトとして解釈され、 最初にコロン定義 <code>##</code> が定義され、 次に
<code>[then]</code> までのすべてが無視され、 最後にそれに続く Forth コードが処理されます。 あなたは以下を使用することもできます
</p>
<div class="example">
<pre class="example">#0 [if]
</pre></div>

<p>2 行目ですが、 これは Gforth-0.7.0 以降でのみ機能します。
</p>
<p><samp>gforthmi</samp> のアプローチは最も高速で、 シェル・ベースのアプローチは最も遅くなります(追加のシェルを起動する必要があるため)。
シェル・アプローチの追加の利点は、 Gforth バイナリ が <code>$PATH</code> 内にある限り、 Gforth
バイナリがどこにあるかを知る必要がないことです。
</p>
<span id="index-_0023_0021-_0028--_002d_002d--_0029-gforth_002d0_002e2"></span>
<span id="index-_0023_0021"></span>
<span id="index-_0023_0021-1"></span>
<div class="format">
<pre class="format"><code>#!</code> ( <i>&ndash;  </i>) gforth-0.2 &ldquo;hash-bang&rdquo;
</pre></div>
<p><code>\</code> の alias です。
</p>



</div>
<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5><a id="FOOT37" href="#DOCF37">(37)</a></h5>
<p>Unix
シェルは実際には 2 種類のファイルを認識します。 それは実行可能ファイルとデータ・ファイルです。
データ・ファイルは「インタープリター行」で指定されたインタープリターによって処理されます。 このインタープリター行は、 シーケンス #!
で始まるデータ・ファイルの最初の行です。 インタープリター行で指定できる文字数には小さな制限(例: 32)がある場合があります。</p>
</div>



</body>
</html>
