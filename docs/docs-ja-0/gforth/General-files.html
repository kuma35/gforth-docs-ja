<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>General files (Gforth マニュアル)</title>

<meta name="description" content="General files (Gforth マニュアル)">
<meta name="keywords" content="General files (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Files.html" rel="up" title="Files">
<link href="Redirection.html" rel="next" title="Redirection">
<link href="Forth-source-files.html" rel="prev" title="Forth source files">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="General-files">
<div class="header">
<p>
Next: <a href="Redirection.html" accesskey="n" rel="next">Redirection</a>, Previous: <a href="Forth-source-files.html" accesskey="p" rel="prev">Forth source files</a>, Up: <a href="Files.html" accesskey="u" rel="up">Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="General-files-1"></span><h4 class="subsection">6.18.2 General files</h4>
<span id="index-general-files"></span>
<span id="index-file_002dhandling"></span>

<p>Files are opened/created by name and type. The following file access methods
(FAMs) are recognised:
</p>
<span id="index-fam-_0028file-access-method_0029"></span>
<span id="index-r_002fo-_0028--_002d_002d-fam--_0029-file"></span>
<span id="index-r_002fo"></span>
<span id="index-r_002fo-1"></span>
<div class="format">
<pre class="format"><code>r/o</code> ( <i>&ndash; fam  </i>) file &ldquo;r-o&rdquo;
</pre></div>

<span id="index-r_002fw-_0028--_002d_002d-fam--_0029-file"></span>
<span id="index-r_002fw"></span>
<span id="index-r_002fw-1"></span>
<div class="format">
<pre class="format"><code>r/w</code> ( <i>&ndash; fam  </i>) file &ldquo;r-w&rdquo;
</pre></div>

<span id="index-w_002fo-_0028--_002d_002d-fam--_0029-file"></span>
<span id="index-w_002fo"></span>
<span id="index-w_002fo-1"></span>
<div class="format">
<pre class="format"><code>w/o</code> ( <i>&ndash; fam  </i>) file &ldquo;w-o&rdquo;
</pre></div>

<span id="index-bin-_0028--fam1-_002d_002d-fam2--_0029-file"></span>
<span id="index-bin"></span>
<span id="index-bin-1"></span>
<div class="format">
<pre class="format"><code>bin</code> ( <i>fam1 &ndash; fam2  </i>) file &ldquo;bin&rdquo;
</pre></div>

<span id="index-_002bfmode-_0028--fam1-rwxrwxrwx-_002d_002d-fam2--_0029-gforth_002d1_002e0"></span>
<span id="index-_002bfmode"></span>
<span id="index-_002bfmode-1"></span>
<div class="format">
<pre class="format"><code>+fmode</code> ( <i>fam1 rwxrwxrwx &ndash; fam2  </i>) gforth-1.0 &ldquo;plus-f-mode&rdquo;
</pre></div>
<p>add file access mode to fam - for create-file only
</p>



<p>When a file is opened/created, it returns a file identifier, <i>wfileid</i>
that is used for all other file commands. All file commands also return a
status value, <i>wior</i>, that is 0 for a successful operation and an
implementation-defined non-zero value in the case of an error.
</p>

<span id="index-open_002dfile-_0028--c_002daddr-u-wfam-_002d_002d-wfileid-wior--_0029-file"></span>
<span id="index-open_002dfile"></span>
<span id="index-open_002dfile-1"></span>
<div class="format">
<pre class="format"><code>open-file</code> ( <i>c-addr u wfam &ndash; wfileid wior </i>) file &ldquo;open-file&rdquo;
</pre></div>

<span id="index-create_002dfile-_0028--c_002daddr-u-wfam-_002d_002d-wfileid-wior--_0029-file"></span>
<span id="index-create_002dfile"></span>
<span id="index-create_002dfile-1"></span>
<div class="format">
<pre class="format"><code>create-file</code> ( <i>c-addr u wfam &ndash; wfileid wior </i>) file &ldquo;create-file&rdquo;
</pre></div>


<span id="index-close_002dfile-_0028--wfileid-_002d_002d-wior--_0029-file"></span>
<span id="index-close_002dfile"></span>
<span id="index-close_002dfile-1"></span>
<div class="format">
<pre class="format"><code>close-file</code> ( <i>wfileid &ndash; wior </i>) file &ldquo;close-file&rdquo;
</pre></div>

<span id="index-delete_002dfile-_0028--c_002daddr-u-_002d_002d-wior--_0029-file"></span>
<span id="index-delete_002dfile"></span>
<span id="index-delete_002dfile-1"></span>
<div class="format">
<pre class="format"><code>delete-file</code> ( <i>c-addr u &ndash; wior </i>) file &ldquo;delete-file&rdquo;
</pre></div>

<span id="index-rename_002dfile-_0028--c_002daddr1-u1-c_002daddr2-u2-_002d_002d-wior--_0029-file_002dext"></span>
<span id="index-rename_002dfile"></span>
<span id="index-rename_002dfile-1"></span>
<div class="format">
<pre class="format"><code>rename-file</code> ( <i>c-addr1 u1 c-addr2 u2 &ndash; wior </i>) file-ext &ldquo;rename-file&rdquo;
</pre></div>
<p>Rename file <i>c_addr1 u1</i> to new name <i>c_addr2 u2</i>
</p>
<span id="index-read_002dfile-_0028--c_002daddr-u1-wfileid-_002d_002d-u2-wior--_0029-file"></span>
<span id="index-read_002dfile"></span>
<span id="index-read_002dfile-1"></span>
<div class="format">
<pre class="format"><code>read-file</code> ( <i>c-addr u1 wfileid &ndash; u2 wior </i>) file &ldquo;read-file&rdquo;
</pre></div>
<p>Read <i>u1</i> characters from file <i>wfileid</i> into the buffer at <i>c_addr</i>.
A non-zero <i>wior</i> indicates an error.  <i>U2</i> indicates the length of the
read data.  End-of-file is not an error and is indicated by <i>u2</i>$&lt;$<i>u1</i>
and <i>wior</i>=0.
</p>
<span id="index-read_002dline-_0028--c_005faddr-u1-wfileid-_002d_002d-u2-flag-wior--_0029-file"></span>
<span id="index-read_002dline"></span>
<span id="index-read_002dline-1"></span>
<div class="format">
<pre class="format"><code>read-line</code> ( <i>c_addr u1 wfileid &ndash; u2 flag wior  </i>) file &ldquo;read-line&rdquo;
</pre></div>
<p>Reads a line from <i>wfileid</i> into the buffer at <i>c_addr u1</i>.  Gforth
supports all three common line terminators: LF, CR and CRLF.  A non-zero
<i>wior</i> indicates an error.  A false <i>flag</i> indicates that
<code>read-line</code> has been invoked at the end of the file. <i>u2</i> indicates
the line length (without terminator): <i>u2</i>$&lt;$<i>u1</i> indicates that the
line is <i>u2</i> chars long; <i>u2</i>=<i>u1</i> indicates that the line is at least
<i>u1</i> chars long, the <i>u1</i> chars of the buffer have been filled with
chars from the line, and the next slice of the line with be read with the
next <code>read-line</code>.  If the line is <i>u1</i> chars long, the first
<code>read-line</code> returns <i>u2</i>=<i>u1</i> and the next read-line returns
<i>u2</i>=0.
</p>

<span id="index-key_002dfile-_0028--fd-_002d_002d-key--_0029-gforth_002d0_002e4"></span>
<span id="index-key_002dfile"></span>
<span id="index-key_002dfile-1"></span>
<div class="format">
<pre class="format"><code>key-file</code> ( <i>fd &ndash; key  </i>) gforth-0.4 &ldquo;key-file&rdquo;
</pre></div>
<p>Read one character <i>n</i> from <i>wfileid</i>.  This word disables buffering for
<i>wfileid</i>.  If you want to read characters from a terminal in
non-canonical (raw) mode, you have to put the terminal in non-canonical mode
yourself (using the C interface); the exception is <code>stdin</code>: Gforth
automatically puts it into non-canonical mode.
</p>

<span id="index-key_003f_002dfile-_0028--wfileid-_002d_002d-f--_0029-gforth_002d0_002e4"></span>
<span id="index-key_003f_002dfile"></span>
<span id="index-key_003f_002dfile-1"></span>
<div class="format">
<pre class="format"><code>key?-file</code> ( <i>wfileid &ndash; f </i>) gforth-0.4 &ldquo;key-q-file&rdquo;
</pre></div>
<p><i>f</i> is true if at least one character can be read from <i>wfileid</i> without
blocking.  If you also want to use <code>read-file</code> or <code>read-line</code> on
the file, you have to call <code>key?-file</code> or <code>key-file</code> first (these
two words disable buffering).
</p>
<span id="index-file_002deof_003f-_0028--wfileid-_002d_002d-flag--_0029-gforth_002d0_002e6"></span>
<span id="index-file_002deof_003f"></span>
<span id="index-file_002deof_003f-1"></span>
<div class="format">
<pre class="format"><code>file-eof?</code> ( <i>wfileid &ndash; flag </i>) gforth-0.6 &ldquo;file-eof-query&rdquo;
</pre></div>
<p><var>Flag</var> is true if the end-of-file indicator for <var>wfileid</var> is set.
</p>
<span id="index-write_002dfile-_0028--c_002daddr-u1-wfileid-_002d_002d-wior--_0029-file"></span>
<span id="index-write_002dfile"></span>
<span id="index-write_002dfile-1"></span>
<div class="format">
<pre class="format"><code>write-file</code> ( <i>c-addr u1 wfileid &ndash; wior </i>) file &ldquo;write-file&rdquo;
</pre></div>

<span id="index-write_002dline-_0028--c_002daddr-u-wfileid-_002d_002d-ior--_0029-file"></span>
<span id="index-write_002dline"></span>
<span id="index-write_002dline-1"></span>
<div class="format">
<pre class="format"><code>write-line</code> ( <i>c-addr u wfileid &ndash; ior  </i>) file &ldquo;write-line&rdquo;
</pre></div>

<span id="index-emit_002dfile-_0028--c-wfileid-_002d_002d-wior--_0029-gforth_002d0_002e2"></span>
<span id="index-emit_002dfile"></span>
<span id="index-emit_002dfile-1"></span>
<div class="format">
<pre class="format"><code>emit-file</code> ( <i>c wfileid &ndash; wior </i>) gforth-0.2 &ldquo;emit-file&rdquo;
</pre></div>

<span id="index-flush_002dfile-_0028--wfileid-_002d_002d-wior--_0029-file_002dext"></span>
<span id="index-flush_002dfile"></span>
<span id="index-flush_002dfile-1"></span>
<div class="format">
<pre class="format"><code>flush-file</code> ( <i>wfileid &ndash; wior </i>) file-ext &ldquo;flush-file&rdquo;
</pre></div>


<span id="index-file_002dstatus-_0028--c_002daddr-u-_002d_002d-wfam-wior--_0029-file_002dext"></span>
<span id="index-file_002dstatus"></span>
<span id="index-file_002dstatus-1"></span>
<div class="format">
<pre class="format"><code>file-status</code> ( <i>c-addr u &ndash; wfam wior </i>) file-ext &ldquo;file-status&rdquo;
</pre></div>

<span id="index-file_002dposition-_0028--wfileid-_002d_002d-ud-wior--_0029-file"></span>
<span id="index-file_002dposition"></span>
<span id="index-file_002dposition-1"></span>
<div class="format">
<pre class="format"><code>file-position</code> ( <i>wfileid &ndash; ud wior </i>) file &ldquo;file-position&rdquo;
</pre></div>

<span id="index-reposition_002dfile-_0028--ud-wfileid-_002d_002d-wior--_0029-file"></span>
<span id="index-reposition_002dfile"></span>
<span id="index-reposition_002dfile-1"></span>
<div class="format">
<pre class="format"><code>reposition-file</code> ( <i>ud wfileid &ndash; wior </i>) file &ldquo;reposition-file&rdquo;
</pre></div>

<span id="index-file_002dsize-_0028--wfileid-_002d_002d-ud-wior--_0029-file"></span>
<span id="index-file_002dsize"></span>
<span id="index-file_002dsize-1"></span>
<div class="format">
<pre class="format"><code>file-size</code> ( <i>wfileid &ndash; ud wior </i>) file &ldquo;file-size&rdquo;
</pre></div>

<span id="index-resize_002dfile-_0028--ud-wfileid-_002d_002d-wior--_0029-file"></span>
<span id="index-resize_002dfile"></span>
<span id="index-resize_002dfile-1"></span>
<div class="format">
<pre class="format"><code>resize-file</code> ( <i>ud wfileid &ndash; wior </i>) file &ldquo;resize-file&rdquo;
</pre></div>


<span id="index-slurp_002dfile-_0028--c_002daddr1-u1-_002d_002d-c_002daddr2-u2--_0029-gforth_002d0_002e6"></span>
<span id="index-slurp_002dfile"></span>
<span id="index-slurp_002dfile-1"></span>
<div class="format">
<pre class="format"><code>slurp-file</code> ( <i>c-addr1 u1 &ndash; c-addr2 u2  </i>) gforth-0.6 &ldquo;slurp-file&rdquo;
</pre></div>
<p><var>c-addr1 u1</var> is the filename, <var>c-addr2 u2</var> is the file&rsquo;s contents
</p>

<span id="index-slurp_002dfid-_0028--fid-_002d_002d-addr-u--_0029-gforth_002d0_002e6"></span>
<span id="index-slurp_002dfid"></span>
<span id="index-slurp_002dfid-1"></span>
<div class="format">
<pre class="format"><code>slurp-fid</code> ( <i>fid &ndash; addr u  </i>) gforth-0.6 &ldquo;slurp-fid&rdquo;
</pre></div>
<p><var>addr u</var> is the content of the file <var>fid</var>
</p>

<span id="index-stdin-_0028--_002d_002d-wfileid--_0029-gforth_002d0_002e4"></span>
<span id="index-stdin"></span>
<span id="index-stdin-1"></span>
<div class="format">
<pre class="format"><code>stdin</code> ( <i>&ndash; wfileid </i>) gforth-0.4 &ldquo;stdin&rdquo;
</pre></div>
<p>The standard input file of the Gforth process.
</p>
<span id="index-stdout-_0028--_002d_002d-wfileid--_0029-gforth_002d0_002e2"></span>
<span id="index-stdout"></span>
<span id="index-stdout-1"></span>
<div class="format">
<pre class="format"><code>stdout</code> ( <i>&ndash; wfileid </i>) gforth-0.2 &ldquo;stdout&rdquo;
</pre></div>
<p>The standard output file of the Gforth process.
</p>
<span id="index-stderr-_0028--_002d_002d-wfileid--_0029-gforth_002d0_002e2"></span>
<span id="index-stderr"></span>
<span id="index-stderr-1"></span>
<div class="format">
<pre class="format"><code>stderr</code> ( <i>&ndash; wfileid </i>) gforth-0.2 &ldquo;stderr&rdquo;
</pre></div>
<p>The standard error output file of the Gforth process.
</p>

</div>
<hr>
<div class="header">
<p>
Next: <a href="Redirection.html">Redirection</a>, Previous: <a href="Forth-source-files.html">Forth source files</a>, Up: <a href="Files.html">Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
