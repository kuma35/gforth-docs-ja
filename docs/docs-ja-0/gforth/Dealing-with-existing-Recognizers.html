<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Dealing with existing Recognizers (Gforth マニュアル)</title>

<meta name="description" content="Dealing with existing Recognizers (Gforth マニュアル)">
<meta name="keywords" content="Dealing with existing Recognizers (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Recognizers.html" rel="up" title="Recognizers">
<link href="Defining-Recognizers.html" rel="next" title="Defining Recognizers">
<link href="Default-Recognizers.html" rel="prev" title="Default Recognizers">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsubsection" id="Dealing-with-existing-Recognizers">
<div class="header">
<p>
Next: <a href="Defining-Recognizers.html" accesskey="n" rel="next">Defining Recognizers</a>, Previous: <a href="Default-Recognizers.html" accesskey="p" rel="prev">Default Recognizers</a>, Up: <a href="Recognizers.html" accesskey="u" rel="up">Recognizers</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Dealing-with-existing-Recognizers-1"></span><h4 class="subsubsection">6.14.5.2 Dealing with existing Recognizers</h4>
<span id="index-Recognizers_002c-dealing-with"></span>

<p>認識器(recognizer)は、 あなたが文字列を渡すワードです。 認識器が文字列を認識すると、 通常はデータとそのデータを処理するためのワードの
xt を返します。 このワードはトランスレーター(translator)と呼ばれます。 認識器が文字列を認識しない場合は、
<code>notfound</code> の xt を返します。
</p>
<p>すべての認識器(recognizers)のスタック効果は ( c-addr u &ndash; ... xt ) です。
</p>


<p>認識器は文字列を受け取り、 いくつかのデータと、 そのデータを通訳(interpret)するためのトランスレーター(翻訳器)を返します。  Gforth
はそのトランスレーターを xt として実装します(これを実行すると、 現在の state でその文字列を処理する適切なアクションが実行されます)。
しかし、 他の Forth システムでは、 内部に 3 つの xt を含む実際のテーブルとして実装する可能性があります。  最初の xt は
通訳時(interpretation)/実行時(run-time) xt で、 データのインタープリター機能(interpretation
semantics)を実行します(通常はデータをスタックに置くだけです)。  2 番目の xt はコンパイル機能(compilation
semantics)を実行し、 データと実行時機能(run-time semantics)の xt を取得します。  3 番目の xt は
postpone 機能(postpone semantics)を実行し、 データと実行時機能の xt も取得します。  <code>&gt;postpone</code>
を使用すると、 実行時機能の xt を postpone できます。
</p>
<p>認識器群はスタックとして編成されるため、 ボキャブラリー・スタックと同じ方法で認識器群のシーケンスを配置できます。
認識器スタックはそれ自体が認識器群です。 つまり、 認識器スタックは実行可能であり、 文字列を受け取り、 トランスレーターを返します。
</p>
<span id="index-notfound-_0028--state-_002d_002d--_0029-gforth_002dexperimental"></span>
<span id="index-notfound"></span>
<span id="index-notfound-1"></span>
<div class="format">
<pre class="format"><code>notfound</code> ( <i>state &ndash;  </i>) gforth-experimental &ldquo;notfound&rdquo;
</pre></div>
<p>認識器の認識が失敗すると、 <code>notfound</code> の認識器トークン(訳注: 現状では <code>notfound</code> の xt )を返します
</p>

<span id="index-rec_002dnt-_0028--addr-u-_002d_002d-nt-translate_002dnt-_007c-notfound--_0029-gforth_002dexperimental"></span>
<span id="index-rec_002dnt"></span>
<span id="index-rec_002dnt-1"></span>
<div class="format">
<pre class="format"><code>rec-nt</code> ( <i>addr u &ndash; nt translate-nt | notfound  </i>) gforth-experimental &ldquo;rec-nt&rdquo;
</pre></div>
<p>名前トークンを認識します
</p>

<span id="index-rec_002dnum-_0028--addr-u-_002d_002d-n_002fd-table-_007c-notfound--_0029-gforth_002dexperimental"></span>
<span id="index-rec_002dnum"></span>
<span id="index-rec_002dnum-1"></span>
<div class="format">
<pre class="format"><code>rec-num</code> ( <i>addr u &ndash; n/d table | notfound  </i>) gforth-experimental &ldquo;rec-num&rdquo;
</pre></div>
<p>数値を 1倍長/2倍長 整数に変換します
</p>

<span id="index-rec_002dfloat-_0028--addr-u-_002d_002d-r-translate_002dfloat-_007c-notfound--_0029-gforth_002dexperimental"></span>
<span id="index-rec_002dfloat"></span>
<span id="index-rec_002dfloat-1"></span>
<div class="format">
<pre class="format"><code>rec-float</code> ( <i>addr u &ndash; r translate-float | notfound  </i>) gforth-experimental &ldquo;rec-float&rdquo;
</pre></div>
<p>浮動小数点数を認識します
</p>

<span id="index-rec_002dstring-_0028--addr-u-_002d_002d-addr-u_0027-r_003astring-_007c-rectype_002dnull--_0029-gforth_002dexperimental"></span>
<span id="index-rec_002dstring"></span>
<span id="index-rec_002dstring-1"></span>
<div class="format">
<pre class="format"><code>rec-string</code> ( <i>addr u &ndash; addr u&rsquo; r:string | rectype-null  </i>) gforth-experimental &ldquo;rec-string&rdquo;
</pre></div>
<p>二重引用符(double quotes)で囲まれた文字列(strings)を文字列リテラルに変換します。 エスケープは <code>S\&quot;</code>
と同様に扱われます。
</p>

<span id="index-rec_002dto-_0028--addr-u-_002d_002d-xt-n-r_003ato-_007c-rectype_002dnull--_0029-gforth_002dexperimental"></span>
<span id="index-rec_002dto"></span>
<span id="index-rec_002dto-1"></span>
<div class="format">
<pre class="format"><code>rec-to</code> ( <i>addr u &ndash; xt n r:to | rectype-null  </i>) gforth-experimental &ldquo;rec-to&rdquo;
</pre></div>
<p><code>-&gt;</code> で始まるワードは、 <code>TO</code> が前にあるものとして扱い、 <code>+&gt;</code> で始まるワードは <code>+TO</code>
が前にあるものとして扱い、 <code>'&gt;</code> で始まるワードは <code>ADDR</code> が前にあるものとして扱い、 <code>@&gt;</code>
で始まるワードは <code>ACTION-OF</code> が前にあるものとして扱い、 <code>=&gt;</code> で始まるワードは <code>IS</code>
が前にあるものとして扱います。
</p>

<span id="index-rec_002dtick-_0028--addr-u-_002d_002d-xt-rectype_002dnum-_007c-rectype_002dnull--_0029-gforth_002dexperimental"></span>
<span id="index-rec_002dtick"></span>
<span id="index-rec_002dtick-1"></span>
<div class="format">
<pre class="format"><code>rec-tick</code> ( <i>addr u &ndash; xt rectype-num | rectype-null  </i>) gforth-experimental &ldquo;rec-tick&rdquo;
</pre></div>
<p><code>`</code> (バッククォート)の接頭辞が付いたワードはその xt を返します。  例: <code>`dup</code> は dup の xt を返します
</p>

<span id="index-rec_002ddtick-_0028--addr-u-_002d_002d-nt-rectype_002dnum-_007c-rectype_002dnull--_0029-gforth_002dexperimental"></span>
<span id="index-rec_002ddtick"></span>
<span id="index-rec_002ddtick-1"></span>
<div class="format">
<pre class="format"><code>rec-dtick</code> ( <i>addr u &ndash; nt rectype-num | rectype-null  </i>) gforth-experimental &ldquo;rec-dtick&rdquo;
</pre></div>
<p><code>``</code> (バッククォート2つ)で始まるワードは、 その nt を返します。  例: <code>``S&quot;</code> は <code>S&quot;</code> の nt
を返します。
</p>

<span id="index-rec_002dbody-_0028--addr-u-_002d_002d-xt-translate_002dtick-_007c-translate_002dnull--_0029-gforth_002dexperimental"></span>
<span id="index-rec_002dbody"></span>
<span id="index-rec_002dbody-1"></span>
<div class="format">
<pre class="format"><code>rec-body</code> ( <i>addr u &ndash; xt translate-tick | translate-null  </i>) gforth-experimental &ldquo;rec-body&rdquo;
</pre></div>
<p><code>'&lt;'</code> <code>'&gt;'</code> で囲まれたワードはその本体(body)を返します。  例: <code>&lt;dup&gt;</code> は dup
の本体(body)を返します
</p>

<span id="index-get_002drecognizers-_0028--_002d_002d-xt1-_002e_002e-xtn-n--_0029-gforth_002dexperimental"></span>
<span id="index-get_002drecognizers"></span>
<span id="index-get_002drecognizers-1"></span>
<div class="format">
<pre class="format"><code>get-recognizers</code> ( <i>&ndash; xt1 .. xtn n  </i>) gforth-experimental &ldquo;get-recognizers&rdquo;
</pre></div>
<p>認識器スタックの内容(content)をスタックにプッシュします。 <i>n</i> は xt の個数です。
</p>

<span id="index-set_002drecognizers-_0028--xt1-_002e_002e-xtn-n-_002d_002d--_0029-gforth_002dexperimental"></span>
<span id="index-set_002drecognizers"></span>
<span id="index-set_002drecognizers-1"></span>
<div class="format">
<pre class="format"><code>set-recognizers</code> ( <i>xt1 .. xtn n &ndash;  </i>) gforth-experimental &ldquo;set-recognizers&rdquo;
</pre></div>
<p>スタック上の内容(content)を認識器スタックに設定します。 <i>n</i> は xt の個数です。
</p>

<span id="index-recognize-_0028--addr-u-rec_002daddr-_002d_002d-_002e_002e_002e-rectype--_0029-gforth_002dexperimental"></span>
<span id="index-recognize"></span>
<span id="index-recognize-1"></span>
<div class="format">
<pre class="format"><code>recognize</code> ( <i>addr u rec-addr &ndash; ... rectype  </i>) gforth-experimental &ldquo;recognize&rdquo;
</pre></div>
<p>訳注: 認識器スタック <i>rec-addr</i> の認識器を順に文字列 <i>addr u</i> に適用し、 認識したら、 そのトランスレーター
<i>rectype</i> (の xt ) を得ます。 何も適用できなかった場合はトランスレーター <code>notfound</code> (の xt )を返します
</p>

<span id="index-recognizer_002dsequence_003a-_0028--xt1-_002e_002e-xtn-n-_0022name_0022-_002d_002d--_0029-gforth_002dexperimental"></span>
<span id="index-recognizer_002dsequence_003a"></span>
<span id="index-recognizer_002dsequence_003a-1"></span>
<div class="format">
<pre class="format"><code>recognizer-sequence:</code> ( <i>xt1 .. xtn n &quot;name&quot; &ndash;  </i>) gforth-experimental &ldquo;recognizer-sequence:&rdquo;
</pre></div>
<p>訳注: <i>xt1 .. xtn n </i> という内容で <i>&quot;name&quot;</i> という名前の認識器スタックを作成します。 
</p>

<span id="index-forth_002drecognize-_0028--c_002daddr-u-_002d_002d-_002e_002e_002e-translate_002dxt--_0029-recognizer"></span>
<span id="index-forth_002drecognize"></span>
<span id="index-forth_002drecognize-1"></span>
<div class="format">
<pre class="format"><code>forth-recognize</code> ( <i>c-addr u &ndash; ... translate-xt  </i>) recognizer &ldquo;forth-recognize&rdquo;
</pre></div>
<p>システム認識器スタックです。
</p>

<span id="index-forth_002drecognizer-_0028--_002d_002d-xt--_0029-gforth_002dexperimental"></span>
<span id="index-forth_002drecognizer"></span>
<span id="index-forth_002drecognizer-1"></span>
<div class="format">
<pre class="format"><code>forth-recognizer</code> ( <i>&ndash; xt  </i>) gforth-experimental &ldquo;forth-recognizer&rdquo;
</pre></div>
<p>Matthias Trute recognizer API との下位互換性があります。  この構造は、 defer されたワードを value
のようなワードに変換します。
</p>

<span id="index-set_002dforth_002drecognize-_0028--xt-_002d_002d--_0029-recognizer"></span>
<span id="index-set_002dforth_002drecognize"></span>
<span id="index-set_002dforth_002drecognize-1"></span>
<div class="format">
<pre class="format"><code>set-forth-recognize</code> ( <i>xt &ndash;  </i>) recognizer &ldquo;set-forth-recognize&rdquo;
</pre></div>
<p>システム認識器スタックを変更する
</p>

<span id="index-translate_003a-_0028--int_002dxt-comp_002dxt-post_002dxt-_0022name_0022-_002d_002d--_0029-gforth_002dexperimental"></span>
<span id="index-translate_003a"></span>
<span id="index-translate_003a-1"></span>
<div class="format">
<pre class="format"><code>translate:</code> ( <i>int-xt comp-xt post-xt &quot;name&quot; &ndash;  </i>) gforth-experimental &ldquo;translate:&rdquo;
</pre></div>
<p><i>name</i> という名前のトランスレーター(トランスレーター・テーブル)を作成し、 トランスレーターのインタプリンタ機能アクション
<i>int-xt</i> と、 トランスレーターのコンパイル機能アクション <i>comp-xt</i> と、 トランスレーターの postpone
機能アクション <i>post-xt</i> を格納します。 加えて拡張機能(extensions)用に 7
つのスロットを用意します(拡張機能スロット初期値は no.extensions の xt で埋めます)。 実行時: <i>name</i> の 実行時は
state の値に応じてアクションが実行されます。 state が 0 (インタプリンタ状態)ならばインタプリンタ機能アクションを実行し、 stete
が -1 (コンパイル状態) ならばコンパイル機能アクションを実行し、 state が -2
(通常無い値。このために特別にセットする。アクション実行後は以前の値復元の事) ならばpostpone 機能アクションを実行します。
</p>

<span id="index-translate_002dnt-_0028--i_002ax-nt-_002d_002d-j_002ax--_0029-gforth_002dexperimental"></span>
<span id="index-translate_002dnt"></span>
<span id="index-translate_002dnt-1"></span>
<div class="format">
<pre class="format"><code>translate-nt</code> ( <i>i*x nt &ndash; j*x  </i>) gforth-experimental &ldquo;translate-nt&rdquo;
</pre></div>
<p>名前トークンのトランスレーター
</p>

<span id="index-translate_002dnum-_0028--x-_002d_002d-_007c-x--_0029-gforth_002dexperimental"></span>
<span id="index-translate_002dnum"></span>
<span id="index-translate_002dnum-1"></span>
<div class="format">
<pre class="format"><code>translate-num</code> ( <i>x &ndash; | x  </i>) gforth-experimental &ldquo;translate-num&rdquo;
</pre></div>
<p>数値のトランスレーター
</p>

<span id="index-translate_002ddnum-_0028--dx-_002d_002d-_007c-dx--_0029-gforth_002dexperimental"></span>
<span id="index-translate_002ddnum"></span>
<span id="index-translate_002ddnum-1"></span>
<div class="format">
<pre class="format"><code>translate-dnum</code> ( <i>dx &ndash; | dx  </i>) gforth-experimental &ldquo;translate-dnum&rdquo;
</pre></div>
<p>2倍長整数のトランスレーター
</p>

<p>doc-translate-float(訳注: まだ説明書いて無いっぽい)
<span id="index-try_002drecognize-_0028--addr-u-xt-_002d_002d-results-_007c-false--_0029-gforth_002dexperimental"></span>
<span id="index-try_002drecognize"></span>
<span id="index-try_002drecognize-1"></span>
</p><div class="format">
<pre class="format"><code>try-recognize</code> ( <i>addr u xt &ndash; results | false  </i>) gforth-experimental &ldquo;try-recognize&rdquo;
</pre></div>
<p>入れ子(nested)になった認識器(recognizers)用です: <var>addr u</var> の認識を試み、 <var>xt</var>
を実行して結果が望ましいかどうかを確認します。  <var>xt</var> が false を返した場合は、 認識器の副作用をすべてクリーンアップして
false を返します。  それ以外の場合は、 <var>xt</var> 呼び出しの結果をスタックに返し、 そのTOSはゼロ以外でなければなりません。
</p>

<span id="index-_003einterpret-_0028--translator-_002d_002d--_0029-gforth_002dexperimental"></span>
<span id="index-_003einterpret"></span>
<span id="index-_003einterpret-1"></span>
<div class="format">
<pre class="format"><code>&gt;interpret</code> ( <i>translator &ndash;  </i>) gforth-experimental &ldquo;&gt;interpret&rdquo;
</pre></div>
<p>指定のトランスレーターのインタプリンタ機能アクションを実行します。
</p>

<span id="index-_003ecompile-_0028--translator-_002d_002d--_0029-gforth_002dexperimental"></span>
<span id="index-_003ecompile"></span>
<span id="index-_003ecompile-1"></span>
<div class="format">
<pre class="format"><code>&gt;compile</code> ( <i>translator &ndash;  </i>) gforth-experimental &ldquo;&gt;compile&rdquo;
</pre></div>
<p>指定のトランスレーターのコンパイル機能アクションを実行します。
</p>

<span id="index-_003epostpone-_0028--translator-_002d_002d--_0029-gforth_002dexperimental"></span>
<span id="index-_003epostpone"></span>
<span id="index-_003epostpone-1"></span>
<div class="format">
<pre class="format"><code>&gt;postpone</code> ( <i>translator &ndash;  </i>) gforth-experimental &ldquo;&gt;postpone&rdquo;
</pre></div>
<p>指定のトランスレーターの postpone 機能アクションを実行します
</p>

<span id="index-translate_002dmethod_003a-_0028--_0022name_0022-_002d_002d--_0029-gforth_002dexperimental"></span>
<span id="index-translate_002dmethod_003a"></span>
<span id="index-translate_002dmethod_003a-1"></span>
<div class="format">
<pre class="format"><code>translate-method:</code> ( <i>&quot;name&quot; &ndash;  </i>) gforth-experimental &ldquo;translate-method:&rdquo;
</pre></div>
<p>新しいトランスレーター・メソッドを作成し、 トランスレーター・テーブルを拡張します。  <var>xt rectype</var> <code>to</code>
<var>translator</var> を使用して、 xt を既存のrectypeに割り当てることができます(訳注: <code>&gt;interpret</code> や
<code>&gt;compile</code> や <code>&gt;postpone</code> 定義用。 あなたが更に トランスレーター・メソッドを定義した場合はこれ以降の新規
state 値に対するアクションとなる。 現時点で 7 つまで追加可能)
</p>

<span id="index-translate_002dstate-_0028--xt-_002d_002d--_0029-gforth_002dexperimental"></span>
<span id="index-translate_002dstate"></span>
<span id="index-translate_002dstate-1"></span>
<div class="format">
<pre class="format"><code>translate-state</code> ( <i>xt &ndash;  </i>) gforth-experimental &ldquo;translate-state&rdquo;
</pre></div>
<p><var>xt</var> として渡された translate-method に一致するトランスレーターのアクションを実行するように、 システムの現在の
state を変更します。
</p>


</div>
<hr>
<div class="header">
<p>
Next: <a href="Defining-Recognizers.html">Defining Recognizers</a>, Previous: <a href="Default-Recognizers.html">Default Recognizers</a>, Up: <a href="Recognizers.html">Recognizers</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
