<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Literals in source code (Gforth マニュアル)</title>

<meta name="description" content="Literals in source code (Gforth マニュアル)">
<meta name="keywords" content="Literals in source code (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html" rel="up" title="Top">
<link href="Words.html" rel="next" title="Words">
<link href="Introduction.html" rel="prev" title="Introduction">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="chapter" id="Literals-in-source-code">
<div class="header">
<p>
Next: <a href="Words.html" accesskey="n" rel="next">Forth Words</a>, Previous: <a href="Introduction.html" accesskey="p" rel="prev">An Introduction to Standard Forth</a>, Up: <a href="index.html" accesskey="u" rel="up">Gforth</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Literals-in-source-code-1"></span><h2 class="chapter">5 Literals in source code</h2>
<span id="index-Literals-_0028in-source-code_0029"></span>

<span id="index-single_002dcell-numbers_002c-input-format"></span>
<span id="index-input-format-for-single_002dcell-numbers"></span>
<p>整数値をデータ・スタックにプッシュするために、 あなたはソース・コードに数値を書きます。 たとえば <code>123</code> です。 数字の連なりの前に
<code>-</code> を付けると、 負の数値を示すことができます。 たとえば <code>-123</code> です。
これはコロン定義の内部と外部の両方で機能します。  数値は <code>base</code> (基数)
の値に従って通訳(interpret)されます(see <a href="Number-Conversion.html">Number Conversion</a>)。  「数字」は <code>0</code> ～
<code>9</code> 、<code>a</code> (10進数の10) ～ <code>z</code> (10進数の35) です。 ただし、
基数(base)より小さい「数字」のみが認識されます。  変換では大文字と小文字が区別されないため、<code>A</code> と <code>a</code>
は同じ「数字」になります。
</p>
<span id="index-_0026_002dprefix-for-decimal-numbers"></span>
<span id="index-_0023_002dprefix-for-decimal-numbers"></span>
<span id="index-_0025_002dprefix-for-binary-numbers"></span>
<span id="index-_0024_002dprefix-for-hexadecimal-numbers"></span>
<span id="index-0x_002dprefix-for-hexadecimal-numbers"></span>
<p>以下のプレフィックスを使用すると、 数値の基数(base)を明示的に指定できます:
</p>
<ul>
<li> <code>#</code> &ndash; 10進数(decimal)
</li><li> <code>%</code> &ndash; 2進数(binary)
</li><li> <code>$</code> &ndash; 16進数(hexadecimal)
</li><li> <code>&amp;</code> &ndash; 10進数(decimal)(非標準)
</li><li> <code>0x</code> &ndash; 16進数(hexadecimal), if base&lt;33 (非標準)
</li></ul>

<p>基数プレフィックスと符号を含む組み合わせの場合、 標準的な順序では基数プレフィックスを最初に配置します(例: <code>#-123</code>)。 Gforth
は両方の順番をサポートします。
</p>
<span id="index-double_002dcell-numbers_002c-input-format"></span>
<span id="index-input-format-for-double_002dcell-numbers"></span>
<p>小数点 <code>.</code> を数値の末尾(または非標準的に、 プレフィックスの前を除く他の場所)に置くと、 2倍長整数double-cell
integer)として扱われます(例: <code>#-123.</code> または <code>#-.123</code> (この2つは同一の数値です))。
別のプログラミング言語の経験があるユーザーは、 基数プレフィックスのない、 このような数値(例: <code>-123.</code>) を見たり書いたりする場合、
その数値が浮動小数点値を表すものと期待する可能性があります。 混乱を早期に解決するために、 Gforth はそのような使用法について警告しています。
警告を回避するには、 常に基数プレフィックスを付けて 2倍長整数(double-cell integer)を記述することをお勧めします(例:
<code>#-123.</code>)
</p>
<p>以下にいくつかの例を示します。 なお、 同値の 10 進数が括弧内に示されています:
</p>
<p><code>$-41</code> (-65), <code>%1001101</code> (205), <code>%1001.0001</code> (145 - 倍精度数(a
double-precision number)), <code>#905</code> (905), <code>$abc</code> (2478),
<code>$ABC</code> (2478)
</p>
<span id="index-_0027_002dprefix-for-characters_002fcode-points"></span>
<span id="index-input-format-for-characters_002fcode-points"></span>
<p>(文字)コード・ポイントの数値を取得するには、 文字を <code>'</code> で囲みます (例: <code>'a'</code>)。  末尾の <code>'</code>
は標準では必須ですが、Gforth では省略できます。  注意: これは非 ASCII 文字でも機能することに注意してください。  多くの用途では、
文字をセルとしてではなく文字列として持つ方が便利です。 文字列の構文については、 以下を参照してください。
</p>
<span id="index-floating_002dpoint-numbers_002c-input-format"></span>
<span id="index-input-format-for-floating_002dpoint-numbers"></span>
<p>Forth の浮動小数点数は、 その指数によって認識されます。  つまり、 <code>1.</code> は 2倍長整数(double-cell
integer)で、 そして <code>1e0</code> は浮動小数点数です。 後者は <code>1e</code> に短縮できます(通常は短縮します)。
仮数部(<code>e</code> や <code>E</code> より前の部分)と指数の部分の両方に符号(<code>+</code> を含む)を含めることができます。
仮数部には少なくとも 1 つの数字が含まれている必要があり、 小数点を含めることができます。 指数は空であってもかまいません。
浮動小数点数は仮数と指数の両方に常に 10 進数の基数を使用し、 基数が 10 進数の場合にのみ認識されます。  例: <code>1e 1e0 1.e
1.e0 +1e+0</code> (これらは全て同一の数値です)、 <code>+12.E-4</code>
</p>
<p>Gforth 拡張機能 (1.0 以降)では、 浮動小数点数をスケーリングされた表記で書くことができます。 オプションで符号、 その次に 1
つ以上の数字を指定し、その後ろに、 主に SI で定義されたスケーリング記号(別名 メトリック・プレフィックス)または <code>%</code> のうちの 1
つを使用でき、 その後に、 オプションで更に多くの桁を指定できます。 Gforth が受け入れるスケーリング記号の完全なリストは以下のとおりです:
</p>
<ul>
<li> <code>Q</code> <code>e30</code> quetta(クエタ) 
</li><li> <code>R</code> <code>e27</code> ronna(ロナ)  
</li><li> <code>Y</code> <code>e24</code> yotta(ヨタ)  
</li><li> <code>Z</code> <code>e21</code> zetta(ゼタ)  
</li><li> <code>X</code> <code>e18</code> exa(エクサ)(<code>E</code> じゃ無いので注意) 
</li><li> <code>P</code> <code>e15</code> peta(ペタ)   
</li><li> <code>T</code> <code>e12</code> tera(テラ)   
</li><li> <code>G</code> <code>e9</code> giga(ギガ)   
</li><li> <code>M</code> <code>e6</code> mega(メガ)   
</li><li> <code>k</code> <code>e3</code> kilo(キロ)   
</li><li> <code>h</code> <code>e2</code> hecto(ヘクト)  
</li><li> <code>d</code> <code>e-1</code> deci(デシ)   
</li><li> <code>%</code> <code>e-2</code> percent(パーセント)(<code>c</code> じゃ無いので注意)(訳注: 一般の centi(センチ)
と違うので注意)
</li><li> <code>m</code> <code>e-3</code> milli(ミリ)  
</li><li> <code>u</code> <code>e-6</code> micro(マイクロ)(<code>μ</code> じゃ無いので注意)
</li><li> <code>n</code> <code>e-9</code> nano(ナノ)   
</li><li> <code>p</code> <code>e-12</code> pico(ピコ)   
</li><li> <code>f</code> <code>e-15</code> femto(フェムト)  
</li><li> <code>a</code> <code>e-18</code> atto(アト)   
</li><li> <code>z</code> <code>e-21</code> zepto(ゼプト)  
</li><li> <code>y</code> <code>e-24</code> yocto(ヨクト)  
</li><li> <code>r</code> <code>e-27</code> ronto(ロント)  
</li><li> <code>q</code> <code>e-30</code> quecto(クエント) 
</li></ul>

<p>Gforth の残りのほとんどとは異なり、 スケーリング・シンボルは大文字と小文字が区別されて扱われます。 スケール表記を使用するということは、
スケール記号の代わりに小数点を使用し、 末尾に指数表記を追加することと同じです。  スケール表記の例: <code>6k5</code> (6500e),
<code>23%</code> (0.23e)
</p>
<span id="index-String-input-format"></span>
<span id="index-input-format-for-strings"></span>
<p>文字列を <code>&quot;</code> で囲んで入力できます(例: <code>&quot;abc&quot;</code>、<code>&quot;a b&quot;</code>)。 その結果は、データスタック上の、
文字列の開始アドレスと、 バイト(=char)のカウントです。
</p>
<p>文字列内の <code>&quot;</code> は <code>\</code> でエスケープする必要があります(例: <code>&quot;double-quote-&gt;\&quot;&lt;-&quot;</code>)。
さらに、 この文字列構文は、 <code>s\&quot;</code> でサポートされている制御文字を記述するすべての方法をサポートしています(see <a href="String-and-character-literals.html">String and Character literals</a>)。 この文字列構文の欠点は、 標準ではないことです。 標準プログラムの場合は、 <code>&quot;…&quot;</code>
の代わりに <code>s\&quot;</code> を使用してください。
</p>
<span id="index-environment-variable-input-format"></span>
<span id="index-input-format-for-environment-variables"></span>
<p>環境変数を取得するには、 最初に <samp>rec-env.fs</samp> をロードし、 次に環境変数の前に <code>$</code> を付けます (例:
<code>$HOME</code>)。 結果は、 上で説明した形式のデータ・スタック上の文字列記述子(string descriptor)になります。  これは
<code>&quot;HOME&quot; getenv</code> と同等です。つまり、 環境変数は実行時(run-time)に解決されます。
</p>
<span id="index-xt-input-format"></span>
<span id="index-execution-token-input-format"></span>
<span id="index-input-format-for-execution-tokens"></span>
<span id="index-_0060-prefix-of-word"></span>
<p>ワード名の前に <code>`</code> を付けることで、 ワードの実行トークン (xt) を取得できます (例: <code>`dup</code>)。
<code>'</code> または <code>[']</code> を使うよりも有利な点は、 コロン定義の内側から外側へ、
またはその逆にコードをコピーして貼り付けるときに、 これらを切り替える必要がないことです。  欠点は、 この構文が標準ではないことです。
</p>
<span id="index-nt-input-format"></span>
<span id="index-nt-token-input-format"></span>
<span id="index-input-format-for-name-tokens"></span>
<span id="index-_0060_0060-prefix-of-word"></span>
<p>ワード名の前に <code>``</code> を付けることで、 ワードのの名前トークン (nt) を取得できます (例: <code>``dup</code>)。
この構文も非標準です。
</p>
<span id="index-body_002drelative-address-input-format"></span>
<span id="index-input-format-for-body_002drelative-addresses"></span>
<p>ワードの本体アドレスを <code>&lt;</code> と <code>&gt;</code> で囲むことで取得できます (例: <code>&lt;spaces&gt;</code>)。 ワード名と末尾の
<code>&gt;</code> の間に <code>+</code> と数値を入れることで、
その本体アドレスから正のオフセットのアドレス(通常はそのワードの本体内のアドレス)を取得することもできます(例:
<code>&lt;spaces+$15&gt;</code>, <code>spaces+-3</code>)。  例えば <code>&lt;spaces+$15&gt;</code> とか
<code>&lt;spaces+-3&gt;</code>) とすると、 その本体アドレスに数値を足したのを得るでしょう。 この非標準機能は、 <code>...</code>
の出力をコピーして貼り付けることを可能にするために存在します(see <a href="Examining-data.html">Examining data and code</a>)。
</p>

</div>
<hr>
<div class="header">
<p>
Next: <a href="Words.html">Forth Words</a>, Previous: <a href="Introduction.html">An Introduction to Standard Forth</a>, Up: <a href="index.html">Gforth</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
