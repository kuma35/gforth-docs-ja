<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Standard Forth locals (Gforth マニュアル)</title>

<meta name="description" content="Standard Forth locals (Gforth マニュアル)">
<meta name="keywords" content="Standard Forth locals (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Locals.html" rel="up" title="Locals">
<link href="Gforth-locals.html" rel="prev" title="Gforth locals">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="Standard-Forth-locals">
<div class="header">
<p>
Previous: <a href="Gforth-locals.html" accesskey="p" rel="prev">Gforth locals</a>, Up: <a href="Locals.html" accesskey="u" rel="up">Locals</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Standard-Forth-locals-1"></span><h4 class="subsection">6.22.2 Standard Forth locals</h4>
<span id="index-locals_002c-Standard-Forth-style"></span>

<p>Forth-2012 標準では、 Gforth のローカル変数の制限付きバージョンであるローカル変数構文が定義されています:
</p>
<ul>
<li> ローカル変数はセル・サイズの値のみにすることができます(型指定子は許可されません)。
</li><li> ローカル変数は制御構造の外側でのみ定義できます。
</li><li> 定義ごとに許可されるローカル変数定義ブロック(<code>{:</code> 〜 <code>:}</code>)は 1 つだけです。
</li><li> ローカル変数は、 リターン・スタックの明示的な使用を妨げる可能性があります。 正確な(そして長い)ルールについては、 標準を参照してください。
ローカル変数を使用している定義でリターン・スタックにアクセスするワードを使用しない場合は問題ありません。 このルールの目的は、
リターン・スタックを使ったローカル変数の実装を容易にすることです。
</li><li> ローカル変数定義全体を 1 行に含める必要があります。
</li></ul>

<p>標準 Forth ローカル変数ワードセット自体は <code>{:</code> と 以下の 2 つのワードで構成されます:
</p>
<span id="index-_0028local_0029-_0028--addr-u-_002d_002d--_0029-local"></span>
<span id="index-_0028local_0029"></span>
<span id="index-_0028local_0029-1"></span>
<div class="format">
<pre class="format"><code>(local)</code> ( <i>addr u &ndash;  </i>) local &ldquo;paren-local-paren&rdquo;
</pre></div>


<p>ANS Forth ローカル変数拡張ワードセット(ANS Forth locals extension wordset)は <code>locals|</code>
を使用して構文を定義しますが、 これはとても酷い代物なので、 使用しないことを強くお勧めします。 Gforth
への移植を容易にするためにこの構文を実装しましたが、 ここでは文書化しません。 この構文の問題は、
ローカル変数が標準のスタック・コメント表記とは逆の順序で定義されているため、 プログラムが読みにくくなり、
読み間違いや書き間違いが起こりやすくなることです。 この構文の唯一の利点は、 ANS Forth
ローカル変数ワードセットを使用して実装が簡単であることですが、 <code>{:</code> 構文だって同じくらい実装は簡単ですからね？
</p>
</div>



</body>
</html>
