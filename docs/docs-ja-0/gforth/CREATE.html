<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>CREATE (Gforth マニュアル)</title>

<meta name="description" content="CREATE (Gforth マニュアル)">
<meta name="keywords" content="CREATE (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Defining-Words.html" rel="up" title="Defining Words">
<link href="Variables.html" rel="next" title="Variables">
<link href="Defining-Words.html" rel="prev" title="Defining Words">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="subsection" id="CREATE">
<div class="header">
<p>
Next: <a href="Variables.html" accesskey="n" rel="next">Variables</a>, Previous: <a href="Defining-Words.html" accesskey="p" rel="prev">Defining Words</a>, Up: <a href="Defining-Words.html" accesskey="u" rel="up">Defining Words</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="CREATE-1"></span><h4 class="subsection">6.10.1 <code>CREATE</code></h4>
<span id="index-simple-defining-words"></span>
<span id="index-defining-words_002c-simple"></span>

<p>定義ワードは、 ディクショナリに新しいエントリを作成するために使用されます。 最も単純な定義ワードは <code>CREATE</code> です。
<code>CREATE</code> は以下のように使用します:
</p>
<div class="example">
<pre class="example">CREATE new-word1
</pre></div>

<p><code>CREATE</code> はパース・ワード(parsing word)です。
つまり、入力ストリームから引数(argument)を受け取ります(この例では <code>new-word1</code> です)。 <code>CREATE</code> は
<code>new-word1</code> のディクショナリ・エントリを作成します。  <code>new-word1</code> が実行される時は、
アドレスがスタックに残されるだけです。 そのアドレスは、 <code>new-word1</code>
が定義された時点のデータ空間ポインタ(<code>HERE</code>)の値を表します。したがって、 <code>CREATE</code>
は名前をメモリ領域のアドレスに関連付ける方法です。
</p>
<span id="index-Create-_0028--_0022name_0022-_002d_002d--_0029-core"></span>
<span id="index-Create"></span>
<span id="index-Create-1"></span>
<div class="format">
<pre class="format"><code>Create</code> ( <i>&quot;name&quot; &ndash;  </i>) core &ldquo;Create&rdquo;
</pre></div>


<p>注意: 標準 Forth は、 <code>create</code> に対してのみ、 そのボディ部分がディクショナリのデータ空間(つまり、 <code>here</code>
や <code>allot</code> などが機能する空間。 see <a href="Dictionary-allocation.html">Dictionary allocation</a>)にあることを保証することに注意してください。  また、 標準 Forth では、 <code>does&gt;</code> で変更できるのは
<code>create</code> で作成されたワードのみで(see <a href="User_002ddefined-Defining-Words.html">User-defined Defining Words</a>)、 標準 Forth の
<code>&gt;body</code> は <code>create</code> されたワードにのみ適用できます。
</p>
<p>この new-word1 の例を拡張して、 データ空間にメモリを少々確保すると、 最終的には <i>variable</i> のような代物になります。
これを行う 2 つの異なる方法を以下に示します:
</p>
<div class="example">
<pre class="example">CREATE new-word2 1 cells allot  \ 1 セル予約 - 初期値未定義
CREATE new-word3 4 ,            \ 1 セル予約 かつ (4で)初期化
</pre></div>

<p>これらの変数は、 以下のように <code>@</code> (「フェッチ」(fetch;取り出す)) と <code>!</code>
(「ストア」(store;格納する)) を使用して検査(examine)および変更(modify)できます:
</p>
<div class="example">
<pre class="example">new-word2 @ .      \ get address, fetch from it and display
1234 new-word2 !   \ new value, get address, store to it
</pre></div>

<span id="index-arrays"></span>
<p>同様のメカニズムを使用して配列を作成できます。 たとえば、 80 文字のテキスト入力バッファーです:
</p>
<div class="example">
<pre class="example">CREATE text-buf 80 chars allot

text-buf 0 chars + c@ \ the 1st character (offset 0)
text-buf 3 chars + c@ \ the 4th character (offset 3)
</pre></div>

<p>メモリに適切な領域を割り当てることで、 思いつく限りの複雑なデータ構造を構築できます。 これについてさらに詳しく説明し、 それを容易にする Gforth
ツールについて知りたい場合は、 See <a href="Structures.html">Structures</a> を参照ください。
</p>

</div>



</body>
</html>
