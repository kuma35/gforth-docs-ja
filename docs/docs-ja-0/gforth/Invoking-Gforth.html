<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- このマニュアルは、 標準 Forth 言語の高速で移植可能な実装である Gforth (バージョン 0.7.9_20240418,
April 18, 2024)用です。 これはリファレンス・マニュアルとして機能しますが、 Forth の概要と Forth
チュートリアルも含まれています。

Authors: Bernd Paysan, Anton Ertl, Gerald Wodni Copyright (C) 1995,
1996, 1997, 1998, 2000, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,
2011, 2012, 2013, 2014,2015,2016,2017,2018,2019,2020,2021,2022,2023 Free
Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.1 or any later
version published by the Free Software Foundation; with no Invariant
Sections, with the Front-Cover texts being "A GNU Manual," and with the
Back-Cover Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify this
GNU Manual, like GNU software.  Copies published by the Free Software
Foundation raise funds for GNU development." -->
<title>Invoking Gforth (Gforth マニュアル)</title>

<meta name="description" content="Invoking Gforth (Gforth マニュアル)">
<meta name="keywords" content="Invoking Gforth (Gforth マニュアル)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Word-Index.html" rel="index" title="Word Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Gforth-Environment.html" rel="up" title="Gforth Environment">
<link href="Leaving-Gforth.html" rel="next" title="Leaving Gforth">
<link href="Gforth-Environment.html" rel="prev" title="Gforth Environment">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="gforth.css">


</head>

<body lang="en">
<div class="section" id="Invoking-Gforth">
<div class="header">
<p>
Next: <a href="Leaving-Gforth.html" accesskey="n" rel="next">Leaving Gforth</a>, Previous: <a href="Gforth-Environment.html" accesskey="p" rel="prev">Gforth Environment</a>, Up: <a href="Gforth-Environment.html" accesskey="u" rel="up">Gforth Environment</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Invoking-Gforth-1"></span><h3 class="section">2.1 Invoking Gforth</h3>
<span id="index-invoking-Gforth"></span>
<span id="index-running-Gforth"></span>
<span id="index-command_002dline-options"></span>
<span id="index-options-on-the-command-line"></span>
<span id="index-flags-on-the-command-line"></span>

<p>Gforth は 2 つの部分から成ります。 実行可能「エンジン」(<code>gforth</code> または <code>gforth-fast</code>
という名前)と、イメージ・ファイルです。 Gforth を開始するには、 通常は <code>gforth</code> とするだけです。 これにより、
デフォルトのイメージ・ファイル <samp>gforth.fi</samp> が自動的にロードされます。 他の多くの場合、 デフォルトの Gforth
イメージは以下のように呼び出されます:
</p><div class="example">
<pre class="example">gforth [file | -e forth-code] ...
</pre></div>
<p>これにより、 ファイルの内容や、 (訳注:コマンドラインに記述された、) Forth コードが、 指定の順序で通訳(interpret)されます。
</p>
<p><code>gforth</code> エンジンに加えて、 <code>gforth-fast</code> というエンジンもあります。 これは高速ですが、
表示されるエラー・メッセージ(see <a href="Error-messages.html">Error messages</a>)の情報が少なく、 そして、 一部のエラーのキャッチ(特に、
スタック・アンダーフローや整数除算エラーなど)が遅れて発生するか、 あるいはまったく発生しません。 デバッグ済みの、
パフォーマンスが重要なプログラムに対して使用するべきです。
</p>
<p>さらに、 <code>gforth-itc</code> というエンジンがあり、 下位互換性が必要な状況(see <a href="Direct-or-Indirect-Threaded_003f.html">Direct or Indirect Threaded?</a>)で役に立ちます。
</p>
<p>一般に、 コマンドラインは以下のようになります:
</p>
<div class="example">
<pre class="example">gforth[-fast] [engine options] [image options]
</pre></div>

<p>エンジン・オプションは、 コマンド・ラインの他の部分より前に指定する必要があります。 それらは以下のとおりです:
</p>
<dl compact="compact">
<dd><span id="index-_002di_002c-command_002dline-option"></span>
<span id="index-_002d_002dimage_002dfile_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--image-file <i>file</i></code></span></dt>
<dt><span><code>-i <i>file</i></code></span></dt>
<dd><p>デフォルトの <samp>gforth.fi</samp> の代わりに、 指定の Forth イメージ・ファイルをロードします(see <a href="Image-Files.html">Image Files</a>)。
</p>
<span id="index-_002d_002dappl_002dimage_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--appl-image <i>file</i></code></span></dt>
<dd><p>指定のイメージ・ファイルをロードし、 これ以降のコマンドライン引数は(エンジンのオプションとして処理するのではなく)、
すべてそのイメージが処理する為に残します。 これは、 <code>gforthmi --application ...</code> で構築された、 Unix
上で実行可能なアプリケーション・イメージを構築する場合に便利です。
</p>
<span id="index-_002d_002dpath_002c-command_002dline-option"></span>
<span id="index-_002dp_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--path <i>path</i></code></span></dt>
<dt><span><code>-p <i>path</i></code></span></dt>
<dd><p>デフォルトである環境変数 <code>GFORTHPATH</code> 、 またはインストール時に指定されたパス(例:
<samp>/usr/local/share/gforth/0.2.0:.</samp>)と作業ディレクトリ <code>.</code> の代わりに、
指定のパスを使用してイメージ・ファイルと Forth ソース・コード・ファイルを検索します。 パスは &lsquo;<samp>:</samp>&rsquo;
で区切られたディレクトリのリストとして指定されます(以前のバージョンには他の OS 用に &lsquo;<samp>;</samp>&rsquo; がありましたが、 Cygwin は現在は
<code>/cygdrive/&lt;letter&gt;</code> のみを受け入れ、 かつ、 私達は OS/2 や MS-DOS のサポートは終了してしまったため、
どこでも全部 &lsquo;<samp>:</samp>&rsquo; になりました)。
</p>
<span id="index-_002d_002ddictionary_002dsize_002c-command_002dline-option"></span>
<span id="index-_002dm_002c-command_002dline-option"></span>
<span id="index-size-parameters-for-command_002dline-options"></span>
<span id="index-size-of-the-dictionary-and-the-stacks"></span>
</dd>
<dt><span><code>--dictionary-size <i>size</i></code></span></dt>
<dt><span><code>-m <i>size</i></code></span></dt>
<dd><p>イメージで指定されているデフォルト(通常は 256K)を使用する代わりに、 Forth
ディクショナリー用のスペースに指定サイズ(<i>size</i>)のスペースを割り当てます。
このオプションと、下記のオプションのサイズ(<i>size</i>)指定は整数と単位で構成されます(例: <code>4M</code>)。 単位は <code>b</code>
(バイト)、 <code>e</code> (elementの略。セル単位)、 <code>k</code> (キロバイト)、 <code>M</code> (メガバイト)、
<code>G</code> (ギガバイト)、 <code>T</code> (テラバイト)のいずれかになります。 単位が指定されていない場合 <code>e</code>
が使用されます。
</p>
<span id="index-_002d_002ddata_002dstack_002dsize_002c-command_002dline-option"></span>
<span id="index-_002dd_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--data-stack-size <i>size</i></code></span></dt>
<dt><span><code>-d <i>size</i></code></span></dt>
<dd><p>イメージで指定されているデフォルト(通常は 16K) を使用する代わりに、
データ・スタックに指定のサイズ(<i>size</i>)のスペースを割り当てます。サイズ(<i>size</i>)指定は整数と単位で構成されます(例:
<code>4M</code>)。 単位は <code>b</code> (バイト)、 <code>e</code> (elementの略。セル単位)、 <code>k</code> (キロバイト)、
<code>M</code> (メガバイト)、 <code>G</code> (ギガバイト)、 <code>T</code> (テラバイト)のいずれかになります。
単位が指定されていない場合 <code>e</code> が使用されます。
</p>
<span id="index-_002d_002dreturn_002dstack_002dsize_002c-command_002dline-option"></span>
<span id="index-_002dr_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--return-stack-size <i>size</i></code></span></dt>
<dt><span><code>-r <i>size</i></code></span></dt>
<dd><p>イメージで指定されたデフォルト(通常は 15K)を使用する代わりに、 リターン・スタックに指定のサイズ(<i>size</i>)のスペースを割り当てます。
サイズ(<i>size</i>)指定は整数と単位で構成されます(例: <code>4M</code>)。 単位は <code>b</code> (バイト)、 <code>e</code>
(elementの略。セル単位)、 <code>k</code> (キロバイト)、 <code>M</code> (メガバイト)、 <code>G</code> (ギガバイト)、
<code>T</code> (テラバイト)のいずれかになります。 単位が指定されていない場合 <code>e</code> が使用されます。
</p>
<span id="index-_002d_002dfp_002dstack_002dsize_002c-command_002dline-option"></span>
<span id="index-_002df_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--fp-stack-size <i>size</i></code></span></dt>
<dt><span><code>-f <i>size</i></code></span></dt>
<dd><p>イメージで指定されているデフォルト(通常は 15.5K)を使用する代わりに、
浮動小数点スタックに指定のサイズ(<i>size</i>)のスペースを割り当てます。この場合、単位指定子 <code>e</code> は浮動小数点数を参照します。
サイズ(<i>size</i>)指定は整数と単位で構成されます(例: <code>4M</code>)。 単位は <code>b</code> (バイト)、 <code>e</code>
(elementの略。セル単位)、 <code>k</code> (キロバイト)、 <code>M</code> (メガバイト)、 <code>G</code> (ギガバイト)、
<code>T</code> (テラバイト)のいずれかになります。 単位が指定されていない場合 <code>e</code> が使用されます。
</p>
<span id="index-_002d_002dlocals_002dstack_002dsize_002c-command_002dline-option"></span>
<span id="index-_002dl_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--locals-stack-size <i>size</i></code></span></dt>
<dt><span><code>-l <i>size</i></code></span></dt>
<dd><p>イメージで指定されているデフォルト(通常は 14.5K)を使用する代わりに、 ローカル・スタック(locals
stack)に指定サイズ(<i>size</i>)のスペースを割り当てます。 サイズ(<i>size</i>)指定は整数と単位で構成されます(例:
<code>4M</code>)。 単位は <code>b</code> (バイト)、 <code>e</code> (elementの略。セル単位)、 <code>k</code> (キロバイト)、
<code>M</code> (メガバイト)、 <code>G</code> (ギガバイト)、 <code>T</code> (テラバイト)のいずれかになります。
単位が指定されていない場合 <code>e</code> が使用されます。
</p>
<span id="index-_002d_002dvm_002dcommit_002c-command_002dline-option"></span>
<span id="index-overcommit-memory-for-dictionary-and-stacks"></span>
<span id="index-memory-overcommit-for-dictionary-and-stacks"></span>
</dd>
<dt><span><code>--vm-commit</code></span></dt>
<dd><p>通常 Gforth は、 ディクショナリーとスタックに十分な仮想メモリー(virtual memory)がない場合でも起動しようとします(OS
がサポートしていれば <code>MAP_NORESERVE</code> を使用します)。 したがって、
あなたは非常に大きなディクショナリーやスタックを要求することができ、 利用可能なのを超える仮想メモリーを使用しない限り、
すべて問題ありません(ただし、それを超えて使用すると、 プロセスが強制終了(kill)されます)。 このオプションを使用すると、 OS
のデフォルトの割り当てポリシーを使用するようになります。 とりわけ、 オーバーコミットしない OS (Solaris など) の場合、 これは、
大きなディクショナリーやスタックを要求することはできませんし、 要求すべきではないことを意味しますが、 しかし、 Gforth
が正常に起動する事に成功したならば、 メモリー不足によって強制終了(kill)させられることはありません。
</p>
<span id="index-_002dh_002c-command_002dline-option"></span>
<span id="index-_002d_002dhelp_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--help</code></span></dt>
<dt><span><code>-h</code></span></dt>
<dd><p>コマンドライン・オプションに関するメッセージを出力します
</p>
<span id="index-_002dv_002c-command_002dline-option"></span>
<span id="index-_002d_002dversion_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--version</code></span></dt>
<dt><span><code>-v</code></span></dt>
<dd><p>バージョンを出力して終了(exit)
</p>
<span id="index-_002d_002ddebug_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--debug</code></span></dt>
<dd><p>起動時のデバッグに役立ついくつかの情報を出力します。
</p>
<span id="index-_002d_002doffset_002dimage_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--offset-image</code></span></dt>
<dd><p>それ以外の場合に使用される位置とはわずかに異なる位置でディクショナリーを開始します (データ再配置可能イメージ(data-relocatable
images)の作成に役立ちます see <a href="Data_002dRelocatable-Image-Files.html">Data-Relocatable Image Files</a>)。
</p>
<span id="index-_002d_002dno_002doffset_002dim_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--no-offset-im</code></span></dt>
<dd><p>ディクショナリーを通常の位置で開始します。
</p>
<span id="index-_002d_002dclear_002ddictionary_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--clear-dictionary</code></span></dt>
<dd><p>イメージをロードする前に、 ディクショナリー内の全てのバイトを 0 に初期化します(see <a href="Data_002dRelocatable-Image-Files.html">Data-Relocatable Image Files</a>)。
</p>
<span id="index-_002d_002ddie_002don_002dsignal_002c-command_002dline_002doption"></span>
</dd>
<dt><span><code>--die-on-signal</code></span></dt>
<dd><p>通常、 Gforth はほとんどのシグナル(例えば、 ユーザー割り込みの SIGINT や、 セグメンテーション違反 SIGSEGV)を Forth の
<code>THROW</code> に変換することで処理します。 このオプションを使用すると、 Gforth
はそのようなシグナルを受信すると終了(exit)します。 このオプションは、
(最初のシグナルから回復する前に別のシグナルが発生するなど、)エンジンやイメージがひどく壊れている可能性がある場合に役立ちます。 このオプションは、
そのような場合の無限ループを回避します。
</p>
<span id="index-_002d_002dno_002ddynamic_002c-command_002dline-option"></span>
<span id="index-_002d_002ddynamic_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--no-dynamic</code></span></dt>
<dt><span><code>--dynamic</code></span></dt>
<dd><p>レプリケーション(replication)を伴う動的スーパー命令(dynamic
superinstructions)を無効または有効にします(see <a href="Dynamic-Superinstructions.html">Dynamic Superinstructions</a>)。
</p>
<span id="index-_002d_002dno_002dsuper_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--no-super</code></span></dt>
<dd><p>動的スーパー命令(dynamic superinstructions)を無効にし、 動的レプリケーション(dynamic
replication)のみを使用します。 これは、 スレッド化コード(threaded
code)にパッチを適用する場合に便利です(see <a href="Dynamic-Superinstructions.html">Dynamic Superinstructions</a>)。
</p>
<span id="index-_002d_002dss_002dnumber_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--ss-number=<var>N</var></code></span></dt>
<dd><p>エンジンにコンパイル済みの最初の <var>N</var> 個の静的スーパー命令(static
superinstructions)のみを使用します(デフォルトでは全てを使用します。 注意: <code>gforth-fast</code>
のみのオプションです)。 このオプションは、 静的スーパー命令(static
superinstructions)のパフォーマンスへの影響を測定するのに役立ちます。
</p>
<span id="index-_002d_002dss_002dmin_002d_002e_002e_002e_002c-command_002dline-options"></span>
</dd>
<dt><span><code>--ss-min-codesize</code></span></dt>
<dt><span><code>--ss-min-ls</code></span></dt>
<dt><span><code>--ss-min-lsu</code></span></dt>
<dt><span><code>--ss-min-nexts</code></span></dt>
<dd><p>指定のメトリックを使用して、 静的スーパー命令の選択(static superinstruction
selection)をするためにプリミティブまたは静的スーパー命令のコストを決定します。 <code>Codesize</code>
はプリミティブまたは静的スーパー命令のネイティブ・コード・サイズ、 そして、 <code>ls</code> はロードとストアの数、 そして、 <code>lsu</code>
はロードとストアと更新の数、 そして、 <code>nexts</code> は(動的スーパー命令を考慮しない)ディスパッチの数です。 ここで、
すべてのプリミティブまたは静的スーパー命令のコストは 1 です。 デフォルトでは、 動的コード生成を使用する場合は <code>codesize</code>、
それ以外の場合は <code>nexts</code> です。
</p>
<span id="index-_002d_002dss_002dgreedy_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--ss-greedy</code></span></dt>
<dd><p>このオプションは、 静的スーパー命令のパフォーマンスへの影響を測定するのに役立ちます。 デフォルトでは、
静的スーパー命令の選択には最適な最短パス・アルゴリズム(shortest-path algorithm)が使用されます。
<samp>--ss-greedy</samp> を使用すると、 そのアルゴリズムは、
現在検討中の静的スーパー命令以降は静的スーパー命令に結合されないと想定するように変更されます。 <samp>--ss-min-nexts</samp>
を使用すると、 その時点で利用可能な最長のスーパー命令を常に選択する貪欲なアルゴリズムと同じ結果が生成されます。 たとえば、スーパー命令 AB と
BCD がある場合、 シーケンス A B C D に対して、 最適アルゴリズムは A BCD を選択し、 貪欲アルゴリズムは AB C D
を選択します。
</p>
<span id="index-_002d_002dprint_002dmetrics_002c-command_002dline-option"></span>
</dd>
<dt><span><code>--print-metrics</code></span></dt>
<dd><p>静的スーパー命令の選択中に使用されるいくつかのメトリックを出力します。 <code>code size</code> は、
動的に生成されたコードの実際のサイズです。  <code>Metric codesize</code>
は、静的スーパー命令の選択によって確認できるコードサイズ・メトリック(codesize metrics)の合計で、 <code>code size</code>
とは異なります。 これは、 すべてのプリミティブと静的スーパー命令が動的に生成されるコードにコンパイルされるわけではないことと、
マーカーがあるためです。 他のメトリクスは <samp>ss-min-...</samp> オプションに対応します。
このオプションは、<samp>--ss-...</samp> オプションの効果を評価するのに役立ちます。
</p>
</dd>
</dl>

<span id="index-loading-files-at-startup"></span>
<span id="index-executing-code-on-startup"></span>
<span id="index-batch-processing-with-Gforth"></span>
<p>上記にて説明したように、 デフォルト・イメージである <samp>gforth.fi</samp> のイメージ固有のコマンドライン引数は、 一連のファイル名と、
指定した順序で通訳(interpret)される <code>-e <var>forth-code</var></code> オプションで構成されます。 <code>-e
<var>forth-code</var></code> または <code>--evaluate <var>forth-code</var></code> オプションは Forth
コードを評価(evaluate)します。 このオプションは引数を 1 つだけ取ります。 あなたが、もし、 さらに多くの Forth
ワードを評価したい場合は、 ワードを引用符で囲むか、 <code>-e</code> を複数回使用する必要があります。
コマンド・ラインの処理後に(対話モードに入るのではなく、)終了(exit)するには、 コマンド・ラインに <code>-e bye</code> を追加します。
Forth プログラムではコマンド・ライン引数を処理することもできます(see <a href="OS-command-line-arguments.html">OS command line arguments</a>)。
</p>
<span id="index-versions_002c-invoking-other-versions-of-Gforth"></span>
<p>複数のバージョンの Gforth がインストールされている場合、 <code>gforth</code> は最後にインストールされたバージョンを呼び出します。
<code>gforth-<i>&lt;version&gt;</i></code> は特定のバージョンを呼び出します。 あなたの環境に環境変数 <code>GFORTHPATH</code>
がある場合、 <code>--path</code> オプションを使用してこの環境変数をオーバーライドできます。
</p>
<p>起動時、 イメージ・オプションを処理する前に、 環境変数 <code>GFORTH_ENV</code> で指定されたユーザー初期化ファイル、
またはその環境変数が設定されていない場合は(存在する場合、) <samp>~/.config/gforthrc0</samp> がインクルードされます。
<code>GFORTH_ENV</code> が「<code>off</code>」の場合は何もインクルードしません。 すべてのイメージ・オプションを処理した後、
ブート・メッセージを出力する直前に、 オプション <code>--no-rc</code> が指定されていない限り、 ホーム・ディレクトリのユーザー初期化ファイル
<samp>~/.config/gforthrc</samp> がインクルードされます。
</p>
<p>警告レベルは以下のように設定できます
</p>
<dl compact="compact">
<dd><span id="index-_002dW_002c-command_002dline-option"></span>
</dd>
<dt><span><code>-W</code></span></dt>
<dd><p>警告(warnings)をオフにする
</p>
<span id="index-_002dWon_002c-command_002dline-option"></span>
</dd>
<dt><span><code>-Won</code></span></dt>
<dd><p>警告(warnings)をオンにする(レベル 1)
</p>
<span id="index-_002dWall_002c-command_002dline-option"></span>
</dd>
<dt><span><code>-Wall</code></span></dt>
<dd><p>初心者向け警告をオンにする(レベル 2)
</p>
<span id="index-_002dWpedantic_002c-command_002dline-option"></span>
</dd>
<dt><span><code>-Wpedantic</code></span></dt>
<dd><p>細かい構文的な警告(pedantic warnings)をオンにする(レベル 3)
</p>
<span id="index-_002dWerror_002c-command_002dline-option"></span>
</dd>
<dt><span><code>-Werror</code></span></dt>
<dd><p>警告をエラーとして出す(レベル 4)
</p></dd>
</dl>

</div>
<hr>
<div class="header">
<p>
Next: <a href="Leaving-Gforth.html">Leaving Gforth</a>, Previous: <a href="Gforth-Environment.html">Gforth Environment</a>, Up: <a href="Gforth-Environment.html">Gforth Environment</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Word-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
